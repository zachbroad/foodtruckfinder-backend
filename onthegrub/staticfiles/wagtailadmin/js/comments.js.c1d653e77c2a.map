{"version":3,"sources":["webpack://wagtail/./node_modules/dateformat/lib/dateformat.js","webpack://wagtail/./node_modules/immer/dist/immer.esm.js","webpack://wagtail/./node_modules/redux/es/redux.js","webpack://wagtail/./node_modules/reselect/es/index.js","webpack://wagtail/./client/src/components/CommentApp/actions/comments.ts","webpack://wagtail/./client/src/components/CommentApp/actions/settings.ts","webpack://wagtail/./client/src/components/CommentApp/components/CommentHeader/index.tsx","webpack://wagtail/./client/src/components/CommentApp/components/CommentReply/index.tsx","webpack://wagtail/./client/src/components/CommentApp/components/Comment/index.tsx","webpack://wagtail/./client/src/components/CommentApp/components/Form/index.tsx","webpack://wagtail/./client/src/components/CommentApp/components/TextArea/index.tsx","webpack://wagtail/./client/src/components/CommentApp/main.tsx","webpack://wagtail/./client/src/components/CommentApp/selectors/index.ts","webpack://wagtail/./client/src/components/CommentApp/state/comments.ts","webpack://wagtail/./client/src/components/CommentApp/state/index.ts","webpack://wagtail/./client/src/components/CommentApp/state/settings.ts","webpack://wagtail/./client/src/components/CommentApp/state/utils.ts","webpack://wagtail/./client/src/components/CommentApp/utils/layout.ts","webpack://wagtail/./client/src/components/CommentApp/utils/maps.ts","webpack://wagtail/./client/src/components/CommentApp/utils/sequences.ts","webpack://wagtail/./client/src/entrypoints/admin/comments.js","webpack://wagtail/webpack/bootstrap","webpack://wagtail/webpack/runtime/compat get default export","webpack://wagtail/webpack/runtime/define property getters","webpack://wagtail/webpack/runtime/global","webpack://wagtail/webpack/runtime/harmony module decorator","webpack://wagtail/webpack/runtime/hasOwnProperty shorthand","webpack://wagtail/webpack/runtime/make namespace object","webpack://wagtail/webpack/runtime/runtimeId","webpack://wagtail/webpack/runtime/jsonp chunk loading","webpack://wagtail/webpack/startup"],"names":["global","token","timezone","timezoneClip","dateFormat","date","mask","utc","gmt","arguments","length","kindOf","test","undefined","Date","isNaN","TypeError","maskSlice","String","masks","slice","_","d","D","m","y","H","M","s","L","o","getTimezoneOffset","W","getWeek","N","getDayOfWeek","flags","dd","pad","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","HH","MM","ss","l","Math","round","t","tt","T","TT","Z","match","pop","replace","floor","abs","S","val","len","targetThursday","getFullYear","getMonth","getDate","setDate","getDay","firstThursday","ds","setHours","getHours","weekDiff","dow","Array","isArray","toString","call","toLowerCase","n","r","e","Error","map","join","Q","Object","getPrototypeOf","hasOwnProperty","constructor","Function","v","i","keys","nn","forEach","u","has","prototype","a","get","f","set","delete","add","c","X","Map","q","Set","p","rn","writable","configurable","enumerable","value","create","clear","freeze","isFrozen","b","tn","U","j","g","O","w","P","x","A","I","k","R","concat","F","z","getOwnPropertyDescriptor","E","C","en","on","Proxy","revocable","revoke","proxy","J","push","K","from","this","defineProperty","min","entries","$","path","op","splice","unshift","JSON","stringify","setPrototypeOf","__proto__","size","values","V","next","done","G","Symbol","B","Reflect","for","iterator","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","getOwnPropertyDescriptors","deleteProperty","apply","un","produce","Promise","then","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","an","fn","cn","bind","sn","vn","pn","ln","dn","randomString","random","substring","split","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","obj","proto","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","index","indexOf","dispatch","action","type","listeners","replaceReducer","nextReducer","observable","_ref","outerSubscribe","observer","observeState","unsubscribe","getUndefinedStateErrorMessage","key","actionType","combineReducers","reducers","reducerKeys","finalReducers","shapeAssertionError","finalReducerKeys","assertReducerShape","state","hasChanged","nextState","_i","_key","previousStateForKey","nextStateForKey","errorMessage","bindActionCreator","actionCreator","bindActionCreators","actionCreators","boundActionCreators","_defineProperty","object","enumerableOnly","filter","sym","_objectSpread2","target","source","defineProperties","compose","_len","funcs","arg","reduce","applyMiddleware","middlewares","store","_dispatch","middlewareAPI","chain","middleware","defaultEqualityCheck","areArgumentsShallowlyEqual","equalityCheck","prev","defaultMemoize","func","lastArgs","lastResult","getDependencies","dependencies","every","dep","dependencyTypes","createSelectorCreator","memoize","memoizeOptions","_len2","_key2","recomputations","resultFunc","memoizedResultFunc","selector","params","resetRecomputations","createSelector","createStructuredSelector","selectors","selectorCreator","objectKeys","_len3","_key3","composition","addComment","comment","exports","ADD_COMMENT","updateComment","commentId","update","UPDATE_COMMENT","deleteComment","DELETE_COMMENT","resolveComment","RESOLVE_COMMENT","setFocusedComment","_a","_b","updatePinnedComment","forceFocus","SET_FOCUSED_COMMENT","addReply","reply","ADD_REPLY","updateReply","replyId","UPDATE_REPLY","deleteReply","DELETE_REPLY","invalidateContentPath","contentPath","INVALIDATE_CONTENT_PATH","__esModule","commentActionFunctions","SET_PINNED_COMMENT","updateGlobalSettings","UPDATE_GLOBAL_SETTINGS","__awaiter","thisArg","_arguments","generator","resolve","reject","fulfilled","step","rejected","result","__generator","body","label","sent","trys","ops","verb","__importDefault","mod","CommentHeader","dateformat_1","react_1","Icon_1","commentReply","strings","onResolve","onEdit","onDelete","descriptionId","author","createElement","className","RESOLVE","onClick","preventDefault","name","MORE_ACTIONS","role","EDIT","DELETE","avatarUrl","src","id","extendStatics","__extends","__","saveCommentReply","comments_1","CommentHeader_1","TextArea_1","localId","mode","text","newText","err","console","error","deleteCommentReply","CommentReplyComponent","_super","renderEditing","_this","props","Fragment","onSubmit","onChange","disabled","SAVE","CANCEL","renderSaving","SAVING","renderSaveError","SAVE_ERROR","RETRY","renderDeleteConfirm","CONFIRM_DELETE_COMMENT","renderDeleting","DELETING","renderDeleteError","DELETE_ERROR","renderDefault","user","render","inner","Component","__values","react_dom_1","focus_trap_react_1","comments_2","sequences_1","CommentReply_1","saveComment","remoteId","doDeleteComment","doResolveComment","CommentComponent","renderReplies","e_1","_d","hideNewReply","_e","isFocused","replies","replyBeingEdited","_f","_g","deleted","e_1_1","newReplyHidden","replyForm","newReply","getNextReplyId","newCommentReply","now","placeholder","REPLY","renderCreating","focusTarget","additionalAttributes","COMMENT","top","layout","getCommentPosition","right","focusTrapOptions","preventScroll","clickOutsideDeactivates","onDeactivate","initialFocus","active","tabIndex","includes","style","position","display","isVisible","onDoubleClick","componentDidMount","element","findDOMNode","HTMLElement","setCommentElement","setCommentHeight","offsetHeight","componentWillUnmount","componentDidUpdate","CommentFormSetComponent","CommentFormComponent","CommentReplyFormSetComponent","CommentReplyFormComponent","PrefixedHiddenInput","prefix","fieldName","formNumber","fullPrefix","remoteReplyCount","commentForms","resolved","contentpath","comments","remoteCommentCount","__assign","assign","TextArea","forwardRef","ref","focusOnMount","_c","textAreaElement","useRef","useImperativeHandle","current","useEffect","height","scrollHeight","focus","rows","resize","overflowY","initCommentApp","CommentApp","defaultStrings","redux_1","layout_1","maps_1","state_1","settings_1","selectors_1","Comment_1","Form_1","settings_2","SHOW_COMMENTS","getAuthor","authors","authorData","getOrDefault","avatar_url","renderCommentsUi","settings","commentsEnabled","currentTab","focusedComment","commentsToRender","commentsRendered","getCommentVisible","utils","selectCommentsForContentPathFactory","selectCommentFactory","selectComments","selectEnabled","selectFocused","selectIsDirty","selectCommentCount","actions","INITIAL_STATE","LayoutController","setUser","userId","updateAnnotation","annotation","attachAnnotationLayout","setCommentAnnotation","setCurrentTab","tab","makeComment","getNextCommentId","newComment","setVisible","visible","renderApp","outputElement","initialComments","translationStrings","e_2","pinnedComment","initialFocusedCommentId","commentParams","URLSearchParams","window","location","search","parseInt","commentList","setPinnedComment","refreshDesiredPositions","refreshLayout","initialComments_1","initialComments_1_1","parse","created_at","pk","e_2_1","document","addEventListener","closest","setTimeout","__read","ar","__spreadArray","to","il","selectRemoteCommentCount","reselect_1","some","originalText","__createBinding","k2","__setModuleDefault","__importStar","utils_1","immer_1","enableES5","enableMapSet","draft","startsWith","showResolvedComments","base","updatePartial","commentElements","commentAnnotations","commentTabs","commentDesiredPositions","commentHeights","commentCalculatedPositions","isDirty","getTab","updateDesiredPosition","getDesiredPosition","oldDesiredPositions","allBlocks","containsPinnedComment","pinnedCommentPosition","blocksByTab","block","blocks","pinnedCommentTab","pinnedCommentOnThisTab","sort","comparisonBlock","currentBlocks","overlaps","newBlocks","previousBlock","currentBlocks_1","currentBlocks_1_1","TOP_MARGIN","currentPosition","defaultValue","nextCommentId","nextReplyId","main_1","wagtailConfig_1","commentApp","isCommentShortcut","ctrlKey","metaKey","altKey","keyCode","getContentPath","fieldNode","contentpaths","dataset","parentElement","reverse","BasicFieldLevelAnnotation","node","subscribeToUpdates","selectComment","initialState","focused","shown","onFocus","show","nowFocused","onUnfocus","hide","setOnClickHandler","remove","classList","ariaLabel","STRINGS","UNFOCUS_COMMENT","FOCUS_COMMENT","getAttribute","getBoundingClientRect","documentElement","scrollTop","FieldLevelCommentWidget","commentAdditionNode","annotationTemplateNode","register","currentlyEnabled","selectCommentsForContentPath","currentComments","updateVisibility","unsubscribeWidget","newComments","newEnabled","commentsChanged","enabledChanged","getAnnotationForComment","newShown","annotationNode","cloneNode","insertAdjacentElement","initAddCommentButton","buttonElement","widget","querySelector","initCommentsInterface","formElement","commentsElement","getElementById","commentsOutputElement","dataElement","data","textContent","querySelectorAll","tabNavElement","detail","commentToggle","commentNotificationsToggle","tabContentElement","updateCommentVisibility","checked","commentCounter","updateCommentCount","commentCount","innerText","__webpack_module_cache__","__webpack_require__","moduleId","module","loaded","__webpack_modules__","getter","definition","globalThis","hmd","children","prop","toStringTag","installedChunks","324","deferredModules","checkDeferredModules","webpackJsonpCallback","parentChunkLoadingFunction","chunkId","chunkIds","moreModules","runtime","executeModules","resolves","shift","chunkLoadingGlobal","self","checkDeferredModulesImpl","deferredModule","depId","startup"],"mappings":"yCAAA,OAcA,SAAUA,GACR,aAEA,IACQC,EACAC,EACAC,EAHJC,GACIH,EAAQ,mEACRC,EAAW,uIACXC,EAAe,cAGZ,SAAUE,EAAMC,EAAMC,EAAKC,GAchC,GAXyB,IAArBC,UAAUC,QAAiC,WAAjBC,EAAON,IAAuB,KAAKO,KAAKP,KACpEC,EAAOD,EACPA,OAAOQ,IAGTR,EAAOA,GAAQ,IAAIS,gBAEEA,OACnBT,EAAO,IAAIS,KAAKT,IAGdU,MAAMV,GACR,MAAMW,UAAU,gBAMlB,IAAIC,GAHJX,EAAOY,OAAOd,EAAWe,MAAMb,IAASA,GAAQF,EAAWe,MAAe,UAGrDC,MAAM,EAAG,GACZ,SAAdH,GAAsC,SAAdA,IAC1BX,EAAOA,EAAKc,MAAM,GAClBb,GAAM,EACY,SAAdU,IACFT,GAAM,IAIV,IAAIa,EAAId,EAAM,SAAW,MACrBe,EAAIjB,EAAKgB,EAAI,UACbE,EAAIlB,EAAKgB,EAAI,SACbG,EAAInB,EAAKgB,EAAI,WACbI,EAAIpB,EAAKgB,EAAI,cACbK,EAAIrB,EAAKgB,EAAI,WACbM,EAAItB,EAAKgB,EAAI,aACbO,EAAIvB,EAAKgB,EAAI,aACbQ,EAAIxB,EAAKgB,EAAI,kBACbS,EAAIvB,EAAM,EAAIF,EAAK0B,oBACnBC,EAAIC,EAAQ5B,GACZ6B,EAAIC,EAAa9B,GACjB+B,EAAQ,CACVd,EAAMA,EACNe,GAAMC,EAAIhB,GACViB,IAAMnC,EAAWoC,KAAKC,SAASlB,GAC/BmB,KAAMtC,EAAWoC,KAAKC,SAASlB,EAAI,GACnCC,EAAMA,EAAI,EACVmB,GAAML,EAAId,EAAI,GACdoB,IAAMxC,EAAWoC,KAAKK,WAAWrB,GACjCsB,KAAM1C,EAAWoC,KAAKK,WAAWrB,EAAI,IACrCuB,GAAM7B,OAAOO,GAAGL,MAAM,GACtB4B,KAAMvB,EACNwB,EAAMvB,EAAI,IAAM,GAChBwB,GAAMZ,EAAIZ,EAAI,IAAM,IACpBA,EAAMA,EACNyB,GAAMb,EAAIZ,GACVC,EAAMA,EACNyB,GAAMd,EAAIX,GACVC,EAAMA,EACNyB,GAAMf,EAAIV,GACV0B,EAAMhB,EAAIT,EAAG,GACbA,EAAMS,EAAIiB,KAAKC,MAAM3B,EAAI,KACzB4B,EAAM/B,EAAI,GAAK,IAAO,IACtBgC,GAAMhC,EAAI,GAAK,KAAO,KACtBiC,EAAMjC,EAAI,GAAK,IAAO,IACtBkC,GAAMlC,EAAI,GAAK,KAAO,KACtBmC,EAAMrD,EAAM,MAAQD,EAAM,OAASW,OAAOb,GAAMyD,MAAM5D,IAAa,CAAC,KAAK6D,MAAMC,QAAQ7D,EAAc,IACrG2B,GAAOA,EAAI,EAAI,IAAM,KAAOQ,EAAmC,IAA/BiB,KAAKU,MAAMV,KAAKW,IAAIpC,GAAK,IAAYyB,KAAKW,IAAIpC,GAAK,GAAI,GACvFqC,EAAM,CAAC,KAAM,KAAM,KAAM,MAAM7C,EAAI,GAAK,EAAI,GAAKA,EAAI,IAAMA,EAAI,IAAM,IAAMA,EAAI,IAC/EU,EAAMA,EACNE,EAAMA,GAGR,OAAO5B,EAAK0D,QAAQ/D,GAAO,SAAU6D,GACnC,OAAIA,KAAS1B,EACJA,EAAM0B,GAERA,EAAM1C,MAAM,EAAG0C,EAAMpD,OAAS,QAiC/C,SAAS4B,EAAI8B,EAAKC,GAGhB,IAFAD,EAAMlD,OAAOkD,GACbC,EAAMA,GAAO,EACND,EAAI1D,OAAS2D,GAClBD,EAAM,IAAMA,EAEd,OAAOA,EAWT,SAASnC,EAAQ5B,GAEf,IAAIiE,EAAiB,IAAIxD,KAAKT,EAAKkE,cAAelE,EAAKmE,WAAYnE,EAAKoE,WAGxEH,EAAeI,QAAQJ,EAAeG,WAAcH,EAAeK,SAAW,GAAK,EAAK,GAGxF,IAAIC,EAAgB,IAAI9D,KAAKwD,EAAeC,cAAe,EAAG,GAG9DK,EAAcF,QAAQE,EAAcH,WAAcG,EAAcD,SAAW,GAAK,EAAK,GAGrF,IAAIE,EAAKP,EAAevC,oBAAsB6C,EAAc7C,oBAC5DuC,EAAeQ,SAASR,EAAeS,WAAaF,GAGpD,IAAIG,GAAYV,EAAiBM,GAAiB,OAClD,OAAO,EAAIrB,KAAKU,MAAMe,GAUxB,SAAS7C,EAAa9B,GACpB,IAAI4E,EAAM5E,EAAKsE,SAIf,OAHW,IAARM,IACDA,EAAM,GAEDA,EAQT,SAAStE,EAAOyD,GACd,OAAY,OAARA,EACK,YAGGvD,IAARuD,EACK,YAGU,iBAARA,SACKA,EAGZc,MAAMC,QAAQf,GACT,QAGF,GAAGgB,SAASC,KAAKjB,GACrBhD,MAAM,GAAI,GAAGkE,cAzGhBlF,EAAWe,MAAQ,CACjB,QAAyB,2BACzB,UAAyB,SACzB,WAAyB,cACzB,SAAyB,eACzB,SAAyB,qBACzB,UAAyB,UACzB,WAAyB,aACzB,SAAyB,eACzB,QAAyB,aACzB,QAAyB,WACzB,YAAyB,yBACzB,eAAyB,+BACzB,oBAAyB,+BAI3Bf,EAAWoC,KAAO,CAChBC,SAAU,CACR,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAC1C,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAEpEI,WAAY,CACV,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAC7E,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,kBAyF/G,KAFD,aACE,OAAOzC,GACR,8BA7ML,I,mCCdA,SAASmF,EAAEA,GAAG,IAAI,IAAIC,EAAE/E,UAAUC,OAAO+C,EAAEyB,MAAMM,EAAE,EAAEA,EAAE,EAAE,GAAGC,EAAE,EAAEA,EAAED,EAAEC,IAAIhC,EAAEgC,EAAE,GAAGhF,UAAUgF,GAAkJ,MAAMC,MAAM,8BAA8BH,GAAG9B,EAAE/C,OAAO,IAAI+C,EAAEkC,KAAI,SAAUJ,GAAG,MAAM,IAAIA,EAAE,OAAOK,KAAK,KAAK,IAAI,oDAAoD,SAASJ,EAAED,GAAG,QAAQA,KAAKA,EAAEM,GAAG,SAASpC,EAAE8B,GAAG,QAAQA,IAAI,SAASA,GAAG,IAAIA,GAAG,iBAAiBA,EAAE,OAAM,EAAG,IAAIC,EAAEM,OAAOC,eAAeR,GAAG,GAAG,OAAOC,EAAE,OAAM,EAAG,IAAI/B,EAAEqC,OAAOE,eAAeX,KAAKG,EAAE,gBAAgBA,EAAES,YAAY,MAAM,mBAAmBxC,GAAGyC,SAASd,SAASC,KAAK5B,KAAKI,GAA5N,CAA+N0B,IAAIL,MAAMC,QAAQI,MAAMA,EAAE1D,MAAM0D,EAAEU,YAAYpE,IAAID,EAAE2D,IAAIY,EAAEZ,IAAI,SAASE,EAAEhC,GAAG,OAAO+B,EAAE/B,IAAI8B,EAAE,GAAG9B,GAAGA,EAAEoC,GAAGpC,EAAE,SAAS2C,EAAEb,EAAEC,EAAE/B,QAAG,IAASA,IAAIA,GAAE,GAAI,IAAI3B,EAAEyD,IAAI9B,EAAEqC,OAAOO,KAAKC,IAAIf,GAAGgB,SAAQ,SAAUd,GAAGhC,GAAG,iBAAiBgC,GAAGD,EAAEC,EAAEF,EAAEE,GAAGF,MAAMA,EAAEgB,SAAQ,SAAU9C,EAAEgC,GAAG,OAAOD,EAAEC,EAAEhC,EAAE8B,MAAM,SAASzD,EAAEyD,GAAG,IAAIC,EAAED,EAAEM,GAAG,OAAOL,EAAEA,EAAEY,EAAE,EAAEZ,EAAEY,EAAE,EAAEZ,EAAEY,EAAElB,MAAMC,QAAQI,GAAG,EAAE3D,EAAE2D,GAAG,EAAEY,EAAEZ,GAAG,EAAE,EAAE,SAASiB,EAAEjB,EAAEC,GAAG,OAAO,IAAI1D,EAAEyD,GAAGA,EAAEkB,IAAIjB,GAAGM,OAAOY,UAAUV,eAAeX,KAAKE,EAAEC,GAAG,SAASmB,EAAEpB,EAAEC,GAAG,OAAO,IAAI1D,EAAEyD,GAAGA,EAAEqB,IAAIpB,GAAGD,EAAEC,GAAG,SAASqB,EAAEtB,EAAEC,EAAE/B,GAAG,IAAIgC,EAAE3D,EAAEyD,GAAG,IAAIE,EAAEF,EAAEuB,IAAItB,EAAE/B,GAAG,IAAIgC,GAAGF,EAAEwB,OAAOvB,GAAGD,EAAEyB,IAAIvD,IAAI8B,EAAEC,GAAG/B,EAAE,SAASwD,EAAE1B,EAAEC,GAAG,OAAOD,IAAIC,EAAE,IAAID,GAAG,EAAEA,GAAG,EAAEC,EAAED,GAAGA,GAAGC,GAAGA,EAAE,SAAS5D,EAAE2D,GAAG,OAAO2B,GAAG3B,aAAa4B,IAAI,SAAShB,EAAEZ,GAAG,OAAO6B,GAAG7B,aAAa8B,IAAI,SAASC,EAAE/B,GAAG,OAAOA,EAAEzD,GAAGyD,EAAE9B,EAAE,SAASH,EAAEiC,GAAG,GAAGL,MAAMC,QAAQI,GAAG,OAAOL,MAAMwB,UAAUtF,MAAMiE,KAAKE,GAAG,IAAIC,EAAE+B,GAAGhC,UAAUC,EAAEK,GAAG,IAAI,IAAIpC,EAAE6C,GAAGd,GAAGC,EAAE,EAAEA,EAAEhC,EAAE/C,OAAO+E,IAAI,CAAC,IAAIW,EAAE3C,EAAEgC,GAAG3D,EAAE0D,EAAEY,IAAG,IAAKtE,EAAE0F,WAAW1F,EAAE0F,UAAS,EAAG1F,EAAE2F,cAAa,IAAK3F,EAAE8E,KAAK9E,EAAEgF,OAAOtB,EAAEY,GAAG,CAACqB,cAAa,EAAGD,UAAS,EAAGE,WAAW5F,EAAE4F,WAAWC,MAAMpC,EAAEa,KAAK,OAAON,OAAO8B,OAAO9B,OAAOC,eAAeR,GAAGC,GAAG,SAASlE,EAAEiE,EAAEE,GAAG,YAAO,IAASA,IAAIA,GAAE,GAAIhE,EAAE8D,IAAIC,EAAED,KAAK9B,EAAE8B,KAAMzD,EAAEyD,GAAG,IAAIA,EAAEuB,IAAIvB,EAAEyB,IAAIzB,EAAEsC,MAAMtC,EAAEwB,OAAO9D,GAAG6C,OAAOgC,OAAOvC,GAAGE,GAAGW,EAAEb,GAAE,SAAUA,EAAEC,GAAG,OAAOlE,EAAEkE,GAAE,MAAM,IAApGD,EAA2G,SAAStC,IAAIsC,EAAE,GAAG,SAAS9D,EAAE8D,GAAG,OAAO,MAAMA,GAAG,iBAAiBA,GAAGO,OAAOiC,SAASxC,GAAG,SAASyC,EAAExC,GAAG,IAAI/B,EAAEwE,GAAGzC,GAAG,OAAO/B,GAAG8B,EAAE,GAAGC,GAAG/B,EAAE,SAASjC,EAAE+D,EAAEC,GAAGyC,GAAG1C,KAAK0C,GAAG1C,GAAGC,GAAG,SAASnE,IAAI,OAAmD6G,EAAE,SAASC,EAAE5C,EAAEC,GAAGA,IAAIwC,EAAE,WAAWzC,EAAEiB,EAAE,GAAGjB,EAAE3D,EAAE,GAAG2D,EAAEY,EAAEX,GAAG,SAAS4C,EAAE7C,GAAG8C,EAAE9C,GAAGA,EAAE+B,EAAEf,QAAQpC,GAAGoB,EAAE+B,EAAE,KAAK,SAASe,EAAE9C,GAAGA,IAAI2C,IAAIA,EAAE3C,EAAEjC,GAAG,SAASgF,EAAE/C,GAAG,OAAO2C,EAAE,CAACZ,EAAE,GAAGhE,EAAE4E,EAAEjF,EAAEsC,EAAE/D,GAAE,EAAGH,EAAE,GAAG,SAAS8C,EAAEoB,GAAG,IAAIC,EAAED,EAAEM,GAAG,IAAIL,EAAEY,GAAG,IAAIZ,EAAEY,EAAEZ,EAAE2C,IAAI3C,EAAE4C,GAAE,EAAG,SAASG,EAAE/C,EAAEC,GAAGA,EAAEpE,EAAEoE,EAAE6B,EAAE5G,OAAO,IAAI0F,EAAEX,EAAE6B,EAAE,GAAGxF,OAAE,IAAS0D,GAAGA,IAAIY,EAAE,OAAOX,EAAExC,EAAEoF,GAAGL,EAAE,OAAO7D,EAAEsB,EAAED,EAAE1D,GAAGA,GAAGsE,EAAEP,GAAG0C,IAAIH,EAAE3C,GAAGF,EAAE,IAAI9B,EAAE+B,KAAKA,EAAE7D,EAAE8D,EAAED,GAAGC,EAAEnC,GAAGkF,EAAE/C,EAAED,IAAIC,EAAEe,GAAGwB,EAAE,WAAWrG,EAAEyE,EAAEP,GAAGL,EAAEC,EAAEe,EAAEf,EAAE7D,IAAI4D,EAAE7D,EAAE8D,EAAEW,EAAE,IAAIgC,EAAE3C,GAAGA,EAAEe,GAAGf,EAAEU,EAAEV,EAAEe,EAAEf,EAAE7D,GAAG4D,IAAI9D,EAAE8D,OAAE,EAAO,SAAS7D,EAAE4D,EAAEC,EAAE/B,GAAG,GAAGhC,EAAE+D,GAAG,OAAOA,EAAE,IAAIC,EAAED,EAAEK,GAAG,IAAIJ,EAAE,OAAOW,EAAEZ,GAAE,SAAUY,EAAEtE,GAAG,OAAO2G,EAAElD,EAAEE,EAAED,EAAEY,EAAEtE,EAAE2B,MAAK,GAAI+B,EAAE,GAAGC,EAAEgD,IAAIlD,EAAE,OAAOC,EAAE,IAAIC,EAAE8C,EAAE,OAAOC,EAAEjD,EAAEE,EAAEhC,GAAE,GAAIgC,EAAEhC,EAAE,IAAIgC,EAAEiD,EAAE,CAACjD,EAAEiD,GAAE,EAAGjD,EAAEgD,EAAEpH,IAAI,IAAIS,EAAE,IAAI2D,EAAEW,GAAG,IAAIX,EAAEW,EAAEX,EAAE3D,EAAEwB,EAAEmC,EAAEkD,GAAGlD,EAAE3D,EAAEsE,EAAE,IAAIX,EAAEW,EAAE,IAAIiB,IAAIvF,GAAGA,GAAE,SAAU0D,EAAEY,GAAG,OAAOqC,EAAElD,EAAEE,EAAE3D,EAAE0D,EAAEY,EAAE3C,MAAM+E,EAAEjD,EAAEzD,GAAE,GAAI2B,GAAG8B,EAAEiB,GAAGwB,EAAE,WAAWY,EAAEnD,EAAEhC,EAAE8B,EAAEiB,EAAEjB,EAAE3D,GAAG,OAAO6D,EAAE3D,EAAE,SAAS2G,EAAEhD,EAAEW,EAAEtE,EAAE6E,EAAEM,EAAErF,GAAG,GAAoD4D,EAAEyB,GAAG,CAAC,IAAId,EAAExE,EAAE8D,EAAEwB,EAAErF,GAAGwE,GAAG,IAAIA,EAAEA,IAAII,EAAEJ,EAAE7E,EAAEoF,GAAG/E,EAAEiH,OAAOlC,QAAG,GAAQ,GAAGE,EAAE/E,EAAE6E,EAAER,IAAIX,EAAEW,GAAG,OAAOV,EAAEjE,GAAE,EAAG,GAAGiC,EAAEwD,KAAKxF,EAAEwF,GAAG,CAAC,IAAIxB,EAAExC,EAAE6F,GAAGrD,EAAEpE,EAAE,EAAE,OAAOM,EAAE8D,EAAEwB,GAAGb,GAAGA,EAAEqC,EAAEnF,GAAGkF,EAAE/C,EAAEwB,IAAI,SAASuB,EAAEjD,EAAEC,EAAE/B,QAAG,IAASA,IAAIA,GAAE,GAAI8B,EAAEtC,EAAE6F,GAAGvD,EAAE/D,GAAGF,EAAEkE,EAAE/B,GAAG,SAASsF,EAAExD,EAAEC,GAAG,IAAI/B,EAAE8B,EAAEM,GAAG,OAAOpC,EAAE6D,EAAE7D,GAAG8B,GAAGC,GAAG,SAASkD,EAAEnD,EAAEC,GAAG,GAAGA,KAAKD,EAAE,IAAI,IAAI9B,EAAEqC,OAAOC,eAAeR,GAAG9B,GAAG,CAAC,IAAIgC,EAAEK,OAAOkD,yBAAyBvF,EAAE+B,GAAG,GAAGC,EAAE,OAAOA,EAAEhC,EAAEqC,OAAOC,eAAetC,IAAI,SAASkF,EAAEpD,GAAGA,EAAEgD,IAAIhD,EAAEgD,GAAE,EAAGhD,EAAEjC,GAAGqF,EAAEpD,EAAEjC,IAAI,SAAS2F,EAAE1D,GAAGA,EAAEzD,IAAIyD,EAAEzD,EAAEwB,EAAEiC,EAAE9B,IAAI,SAASmF,EAAErD,EAAEC,EAAE/B,GAAG,IAAIgC,EAAE7D,EAAE4D,GAAGwC,EAAE,UAAU9F,EAAEsD,EAAE/B,GAAG0C,EAAEX,GAAGwC,EAAE,UAAUrE,EAAE6B,EAAE/B,GAAG8B,EAAE8C,EAAE,SAAS9C,EAAEC,GAAG,IAAI/B,EAAEyB,MAAMC,QAAQI,GAAGE,EAAE,CAACW,EAAE3C,EAAE,EAAE,EAAEgF,EAAEjD,EAAEA,EAAEiD,EAAEpH,IAAIkH,GAAE,EAAGG,GAAE,EAAGnH,EAAE,GAAG+B,EAAEkC,EAAE/B,EAAE8B,EAAEoD,EAAE,KAAK7G,EAAE,KAAKqG,EAAE,KAAKe,GAAE,GAAI9C,EAAEX,EAAE3D,EAAEqH,GAAG1F,IAAI2C,EAAE,CAACX,GAAG3D,EAAEsH,IAAI,IAAI5C,EAAE6C,MAAMC,UAAUlD,EAAEtE,GAAG6E,EAAEH,EAAE+C,OAAO1C,EAAEL,EAAEgD,MAAM,OAAO/D,EAAEkD,EAAE9B,EAAEpB,EAAE0C,EAAExB,EAAEE,EAA1M,CAA6MrB,EAAE/B,GAAGuE,EAAE,OAAOyB,EAAEjE,EAAE/B,GAAG,OAAOA,EAAEA,EAAEgF,EAAEpH,KAAKiG,EAAEoC,KAAKjE,GAAGA,EAAE,SAASlE,EAAEkE,GAAG,OAAOD,EAAEC,IAAIF,EAAE,GAAGE,GAAG,SAASF,EAAEC,GAAG,IAAI/B,EAAE+B,GAAG,OAAOA,EAAE,IAAIC,EAAEe,EAAEhB,EAAEK,GAAGoB,EAAEnF,EAAE0D,GAAG,GAAGgB,EAAE,CAAC,IAAIA,EAAE+B,IAAI/B,EAAEJ,EAAE,IAAI4B,EAAE,OAAO2B,EAAEnD,IAAI,OAAOA,EAAE/C,EAAE+C,EAAEkC,GAAE,EAAGjD,EAAEqD,EAAEtD,EAAEyB,GAAGT,EAAEkC,GAAE,OAAQjD,EAAEqD,EAAEtD,EAAEyB,GAAG,OAAOb,EAAEX,GAAE,SAAUD,EAAE/B,GAAG+C,GAAGG,EAAEH,EAAE/C,EAAE+B,KAAK/B,GAAGoD,EAAEpB,EAAED,EAAED,EAAE9B,OAAO,IAAIwD,EAAE,IAAII,IAAI5B,GAAGA,EAAtN,CAAyNA,GAAG,SAASqD,EAAEvD,EAAEC,GAAG,OAAOA,GAAG,KAAK,EAAE,OAAO,IAAI2B,IAAI5B,GAAG,KAAK,EAAE,OAAOL,MAAM0E,KAAKrE,GAAG,OAAOjC,EAAEiC,GAAG,SAASrD,IAAI,SAASuB,EAAE8B,EAAEC,GAAG,IAAI/B,EAAE7B,EAAE2D,GAAG,OAAO9B,EAAEA,EAAEiE,WAAWlC,EAAE5D,EAAE2D,GAAG9B,EAAE,CAACgE,cAAa,EAAGC,WAAWlC,EAAEoB,IAAI,WAAW,IAAIpB,EAAEqE,KAAKhE,GAAG,OAAgDsD,GAAGvC,IAAIpB,EAAED,IAAIuB,IAAI,SAAStB,GAAG,IAAI/B,EAAEoG,KAAKhE,GAA6CsD,GAAGrC,IAAIrD,EAAE8B,EAAEC,KAAK/B,EAAE,SAASgC,EAAEF,GAAG,IAAI,IAAIC,EAAED,EAAE7E,OAAO,EAAE8E,GAAG,EAAEA,IAAI,CAAC,IAAI/B,EAAE8B,EAAEC,GAAGK,GAAG,IAAIpC,EAAE8E,EAAE,OAAO9E,EAAE2C,GAAG,KAAK,EAAEO,EAAElD,IAAIkF,EAAElF,GAAG,MAAM,KAAK,EAAE3B,EAAE2B,IAAIkF,EAAElF,KAAK,SAAS3B,EAAEyD,GAAG,IAAI,IAAIC,EAAED,EAAE9B,EAAEA,EAAE8B,EAAEoD,EAAElD,EAAEa,GAAG7C,GAAG2C,EAAEX,EAAE/E,OAAO,EAAE0F,GAAG,EAAEA,IAAI,CAAC,IAAItE,EAAE2D,EAAEW,GAAG,GAAGtE,IAAI+D,EAAE,CAAC,IAAIc,EAAEnB,EAAE1D,GAAG,QAAG,IAAS6E,IAAIH,EAAEhB,EAAE1D,GAAG,OAAM,EAAG,IAAI+E,EAAEpD,EAAE3B,GAAGF,EAAEiF,GAAGA,EAAEhB,GAAG,GAAGjE,EAAEA,EAAE6B,IAAIkD,GAAGM,EAAEJ,EAAEF,GAAG,OAAM,GAAI,IAAIR,IAAIX,EAAEK,GAAG,OAAOJ,EAAE/E,SAAS4F,GAAGd,GAAG9E,QAAQyF,EAAE,EAAE,GAAG,SAASQ,EAAEpB,GAAG,IAAIC,EAAED,EAAEoD,EAAE,GAAGnD,EAAE9E,SAAS6E,EAAE9B,EAAE/C,OAAO,OAAM,EAAG,IAAI+C,EAAEqC,OAAOkD,yBAAyBxD,EAAEA,EAAE9E,OAAO,GAAG,SAAS+C,GAAGA,EAAEmD,KAAkD,IAAIhF,EAAE,GAAGJ,EAAE,MAAM,CAACiI,EAAE,SAASlE,EAAEC,GAAG,IAAIC,EAAEP,MAAMC,QAAQI,GAAGa,EAAE,SAASb,EAAEC,GAAG,GAAGD,EAAE,CAAC,IAAI,IAAIE,EAAEP,MAAMM,EAAE9E,QAAQ0F,EAAE,EAAEA,EAAEZ,EAAE9E,OAAO0F,IAAIN,OAAOgE,eAAerE,EAAE,GAAGW,EAAE3C,EAAE2C,GAAE,IAAK,OAAOX,EAAE,IAAI3D,EAAEyF,GAAG/B,UAAU1D,EAAE+D,GAAG,IAAI,IAAIW,EAAEF,GAAGxE,GAAG6E,EAAE,EAAEA,EAAEH,EAAE9F,OAAOiG,IAAI,CAAC,IAAIE,EAAEL,EAAEG,GAAG7E,EAAE+E,GAAGpD,EAAEoD,EAAEtB,KAAKzD,EAAE+E,GAAGa,YAAY,OAAO5B,OAAO8B,OAAO9B,OAAOC,eAAeP,GAAG1D,GAApQ,CAAwQ2D,EAAEF,GAAGzD,EAAE,CAACsE,EAAEX,EAAE,EAAE,EAAEgD,EAAEjD,EAAEA,EAAEiD,EAAEpH,IAAIkH,GAAE,EAAGG,GAAE,EAAGnH,EAAE,GAAG+B,EAAEkC,EAAE/B,EAAE8B,EAAEoD,EAAEvC,EAAEtE,EAAE,KAAKsG,GAAE,EAAGc,GAAE,GAAI,OAAOpD,OAAOgE,eAAe1D,EAAEP,EAAE,CAAC8B,MAAM7F,EAAE0F,UAAS,IAAKpB,GAAGjC,EAAE,SAASoB,EAAE9B,EAAE3B,GAAGA,EAAE0D,EAAE/B,IAAIA,EAAEoC,GAAG4C,IAAIlD,GAAGE,EAAEF,EAAE+B,IAAI/B,EAAEiB,GAAG,SAASjB,EAAEC,GAAG,GAAGA,GAAG,iBAAiBA,EAAE,CAAC,IAAI/B,EAAE+B,EAAEK,GAAG,GAAGpC,EAAE,CAAC,IAAIgC,EAAEhC,EAAEA,EAAE3B,EAAE2B,EAAEkF,EAAE9B,EAAEpD,EAAElC,EAAE0F,EAAExD,EAAE2C,EAAE,GAAG,IAAIa,EAAEb,EAAEtE,GAAE,SAAU0D,GAAGA,IAAIK,SAAI,IAASJ,EAAED,IAAIgB,EAAEf,EAAED,GAAGqB,EAAErB,IAAID,EAAEzD,EAAE0D,KAAKqB,EAAErB,IAAG,EAAGmD,EAAElF,QAAQ2C,EAAEX,GAAE,SAAUF,QAAG,IAASzD,EAAEyD,IAAIiB,EAAE1E,EAAEyD,KAAKsB,EAAEtB,IAAG,EAAGoD,EAAElF,YAAY,GAAG,IAAIwD,EAAE,CAAC,GAAGN,EAAElD,KAAKkF,EAAElF,GAAGoD,EAAEnG,QAAO,GAAIoB,EAAEpB,OAAO+E,EAAE/E,OAAO,IAAI,IAAIkB,EAAEE,EAAEpB,OAAOkB,EAAE6D,EAAE/E,OAAOkB,IAAIiF,EAAEjF,IAAG,OAAQ,IAAI,IAAIuE,EAAEV,EAAE/E,OAAOyF,EAAErE,EAAEpB,OAAOyF,IAAIU,EAAEV,IAAG,EAAG,IAAI,IAAImB,EAAE/D,KAAKwG,IAAIjI,EAAEpB,OAAO+E,EAAE/E,QAAQ4C,EAAE,EAAEA,EAAEgE,EAAEhE,SAAI,IAASuD,EAAEvD,IAAIiC,EAAEzD,EAAEwB,OAAnc,CAA2ciC,EAAE+B,EAAE,IAAI7B,EAAEF,EAAE+B,KAAKqC,EAAE,SAASpE,GAAG,OAAO,IAAIA,EAAEa,EAAEtE,EAAEyD,GAAGoB,EAAEpB,MAAM,SAAS5B,IAAI,SAAS8B,EAAEF,GAAG,IAAI9B,EAAE8B,GAAG,OAAOA,EAAE,GAAGL,MAAMC,QAAQI,GAAG,OAAOA,EAAEI,IAAIF,GAAG,GAAG7D,EAAE2D,GAAG,OAAO,IAAI4B,IAAIjC,MAAM0E,KAAKrE,EAAEyE,WAAWrE,KAAI,SAAUJ,GAAG,MAAM,CAACA,EAAE,GAAGE,EAAEF,EAAE,SAAS,GAAGY,EAAEZ,GAAG,OAAO,IAAI8B,IAAInC,MAAM0E,KAAKrE,GAAGI,IAAIF,IAAI,IAAID,EAAEM,OAAO8B,OAAO9B,OAAOC,eAAeR,IAAI,IAAI,IAAIa,KAAKb,EAAEC,EAAEY,GAAGX,EAAEF,EAAEa,IAAI,OAAOI,EAAEjB,EAAE1D,KAAK2D,EAAE3D,GAAG0D,EAAE1D,IAAI2D,EAAE,SAASqB,EAAEtB,GAAG,OAAOC,EAAED,GAAGE,EAAEF,GAAGA,EAAE,IAAI0B,EAAE,MAAMzF,EAAE,UAAU,CAACyI,EAAE,SAASzE,EAAE/B,GAAG,OAAOA,EAAE8C,SAAQ,SAAU9C,GAAG,IAAI,IAAI2C,EAAE3C,EAAEyG,KAAK1D,EAAE/C,EAAE0G,GAAGtD,EAAErB,EAAE5D,EAAE,EAAEA,EAAEwE,EAAE1F,OAAO,EAAEkB,IAAI,CAAC,IAAIuE,EAAErE,EAAE+E,GAAGS,EAAElB,EAAExE,GAAG,IAAIuE,GAAG,IAAIA,GAAG,cAAcmB,GAAG,gBAAgBA,GAAG/B,EAAE,IAAI,mBAAmBsB,GAAG,cAAcS,GAAG/B,EAAE,IAAI,iBAAiBsB,EAAEF,EAAEE,EAAES,KAAK/B,EAAE,GAAGa,EAAER,KAAK,MAAM,IAAItC,EAAExB,EAAE+E,GAAGvF,EAAEmE,EAAEhC,EAAEkE,OAAO1E,EAAEmD,EAAEA,EAAE1F,OAAO,GAAG,OAAO8F,GAAG,IAAI,UAAU,OAAOlD,GAAG,KAAK,EAAE,OAAOuD,EAAEC,IAAI7D,EAAE3B,GAAG,KAAK,EAAEiE,EAAE,IAAI,QAAQ,OAAOsB,EAAE5D,GAAG3B,EAAE,KAAK2F,EAAE,OAAO3D,GAAG,KAAK,EAAE,OAAOuD,EAAEuD,OAAOnH,EAAE,EAAE3B,GAAG,KAAK,EAAE,OAAOuF,EAAEC,IAAI7D,EAAE3B,GAAG,KAAK,EAAE,OAAOuF,EAAEG,IAAI1F,GAAG,QAAQ,OAAOuF,EAAE5D,GAAG3B,EAAE,IAAI,SAAS,OAAOgC,GAAG,KAAK,EAAE,OAAOuD,EAAEuD,OAAOnH,EAAE,GAAG,KAAK,EAAE,OAAO4D,EAAEE,OAAO9D,GAAG,KAAK,EAAE,OAAO4D,EAAEE,OAAOtD,EAAEkE,OAAO,QAAQ,cAAcd,EAAE5D,GAAG,QAAQsC,EAAE,GAAGiB,OAAOhB,GAAGoD,EAAE,SAASrD,EAAEC,EAAE/B,EAAEgC,GAAG,OAAOF,EAAEa,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,SAASb,EAAEC,EAAE/B,EAAEgC,GAAG,IAAI3D,EAAEyD,EAAE9B,EAAE7B,EAAE2D,EAAEzD,EAAEsE,EAAEb,EAAEhE,GAAE,SAAUgE,EAAEa,GAAG,IAAID,EAAEQ,EAAE7E,EAAEyD,GAAG+B,EAAEX,EAAE/E,EAAE2D,GAAGjC,EAAE8C,EAAEI,EAAE1E,EAAEyD,GAAG,UAAU0B,EAAE,SAAS,GAAGd,IAAImB,GAAG,YAAYhE,EAAE,CAAC,IAAIhC,EAAEkE,EAAEqD,OAAOtD,GAAG9B,EAAEiG,KAAK,WAAWpG,EAAE,CAAC6G,GAAG7G,EAAE4G,KAAK5I,GAAG,CAAC6I,GAAG7G,EAAE4G,KAAK5I,EAAEqG,MAAML,IAAI7B,EAAEiE,KAAKpG,IAAI2D,EAAE,CAACkD,GAAG,SAASD,KAAK5I,GAAG,WAAWgC,EAAE,CAAC6G,GAAGlD,EAAEiD,KAAK5I,EAAEqG,MAAMd,EAAEV,IAAI,CAACgE,GAAG,UAAUD,KAAK5I,EAAEqG,MAAMd,EAAEV,SAAtT,CAAgUZ,EAAEC,EAAE/B,EAAEgC,GAAG,KAAK,EAAE,KAAK,EAAE,OAAO,SAASF,EAAEC,EAAE/B,EAAEgC,GAAG,IAAIW,EAAEb,EAAE9B,EAAE3B,EAAEyD,EAAEhE,EAAEiF,EAAEjB,EAAEzD,EAAE,GAAG0E,EAAE9F,OAAO0F,EAAE1F,OAAO,CAAC,IAAIiG,EAAE,CAACH,EAAEJ,GAAGA,EAAEO,EAAE,GAAGH,EAAEG,EAAE,GAAG,IAAI/E,EAAE,CAAC6D,EAAEhC,GAAGA,EAAE7B,EAAE,GAAG6D,EAAE7D,EAAE,GAAG,IAAI,IAAIuE,EAAE,EAAEA,EAAEC,EAAE1F,OAAOyF,IAAI,GAAGrE,EAAEqE,IAAIK,EAAEL,KAAKC,EAAED,GAAG,CAAC,IAAImB,EAAE9B,EAAEqD,OAAO,CAAC1C,IAAI1C,EAAEiG,KAAK,CAACS,GAAG,UAAUD,KAAK5C,EAAEK,MAAMd,EAAEL,EAAEL,MAAMV,EAAEiE,KAAK,CAACS,GAAG,UAAUD,KAAK5C,EAAEK,MAAMd,EAAET,EAAED,MAAM,IAAI,IAAI7C,EAAE8C,EAAE1F,OAAO4C,EAAEkD,EAAE9F,OAAO4C,IAAI,CAAC,IAAIhC,EAAEkE,EAAEqD,OAAO,CAACvF,IAAIG,EAAEiG,KAAK,CAACS,GAAGlD,EAAEiD,KAAK5I,EAAEqG,MAAMd,EAAEL,EAAElD,MAAM8C,EAAE1F,OAAO8F,EAAE9F,QAAQ+E,EAAEiE,KAAK,CAACS,GAAG,UAAUD,KAAK1E,EAAEqD,OAAO,CAAC,WAAWlB,MAAMvB,EAAE1F,SAApb,CAA8b6E,EAAEC,EAAE/B,EAAEgC,GAAG,KAAK,EAAE,OAAO,SAASF,EAAEC,EAAE/B,EAAEgC,GAAG,IAAIW,EAAEb,EAAE9B,EAAE3B,EAAEyD,EAAEzD,EAAE0E,EAAE,EAAEJ,EAAEG,SAAQ,SAAUhB,GAAG,IAAIzD,EAAE2E,IAAIlB,GAAG,CAAC,IAAIa,EAAEZ,EAAEqD,OAAO,CAACrC,IAAI/C,EAAEiG,KAAK,CAACS,GAAG,SAASD,KAAK9D,EAAEuB,MAAMpC,IAAIE,EAAE4E,QAAQ,CAACF,GAAGlD,EAAEiD,KAAK9D,EAAEuB,MAAMpC,IAAIiB,OAAOA,EAAE,EAAE1E,EAAEyE,SAAQ,SAAUhB,GAAG,IAAIa,EAAEK,IAAIlB,GAAG,CAAC,IAAIzD,EAAE0D,EAAEqD,OAAO,CAACrC,IAAI/C,EAAEiG,KAAK,CAACS,GAAGlD,EAAEiD,KAAKpI,EAAE6F,MAAMpC,IAAIE,EAAE4E,QAAQ,CAACF,GAAG,SAASD,KAAKpI,EAAE6F,MAAMpC,IAAIiB,OAA/S,CAAuTjB,EAAEC,EAAE/B,EAAEgC,KAAK9D,EAAE,SAAS4D,EAAEC,EAAE/B,EAAEgC,GAAGhC,EAAEiG,KAAK,CAACS,GAAG,UAAUD,KAAK,GAAGvC,MAAMnC,IAAIC,EAAEiE,KAAK,CAACS,GAAG,UAAUD,KAAK,GAAGvC,MAAMpC,EAAE9B,OAAO,SAASyF,IAAI,SAAS1D,EAAED,EAAEC,GAAG,SAAS/B,IAAIoG,KAAK5D,YAAYV,EAAEoB,EAAEpB,EAAEC,GAAGD,EAAEmB,WAAWjD,EAAEiD,UAAUlB,EAAEkB,UAAU,IAAIjD,GAAG,SAASgC,EAAEF,GAAGA,EAAEzD,IAAIyD,EAAEhE,EAAE,IAAI4F,IAAI5B,EAAEzD,EAAE,IAAIqF,IAAI5B,EAAE9B,IAAI,SAAS3B,EAAEyD,GAAGA,EAAEzD,IAAIyD,EAAEzD,EAAE,IAAIuF,IAAI9B,EAAE9B,EAAE8C,SAAQ,SAAUf,GAAG,GAAG/B,EAAE+B,GAAG,CAAC,IAAIC,EAAEmD,EAAErD,EAAEkD,EAAExF,EAAEuC,EAAED,GAAGA,EAAE+B,EAAER,IAAItB,EAAEC,GAAGF,EAAEzD,EAAEkF,IAAIvB,QAAQF,EAAEzD,EAAEkF,IAAIxB,OAAO,SAASgB,EAAEhB,GAAGA,EAAE4C,GAAG7C,EAAE,EAAE+E,KAAKC,UAAUjD,EAAE9B,KAAK,IAAImB,EAAE,SAASpB,EAAEC,GAAG,OAAOmB,EAAEb,OAAO0E,gBAAgB,CAACC,UAAU,cAAcvF,OAAO,SAASK,EAAEC,GAAGD,EAAEkF,UAAUjF,IAAI,SAASD,EAAEC,GAAG,IAAI,IAAI/B,KAAK+B,EAAEA,EAAEQ,eAAevC,KAAK8B,EAAE9B,GAAG+B,EAAE/B,MAAM8B,EAAEC,IAAIqB,EAAE,WAAW,SAAStB,EAAEA,EAAEC,GAAG,OAAOqE,KAAKhE,GAAG,CAACO,EAAE,EAAE9C,EAAEkC,EAAEiD,EAAEjD,EAAEA,EAAEiD,EAAEpH,IAAIkH,GAAE,EAAGG,GAAE,EAAG5G,OAAE,EAAOP,OAAE,EAAOkC,EAAE8B,EAAEoD,EAAEkB,KAAKX,GAAE,EAAGd,GAAE,GAAIyB,KAAKrE,EAAED,EAAE4B,KAAK,IAAIrF,EAAEyD,EAAEmB,UAAU,OAAOZ,OAAOgE,eAAehI,EAAE,OAAO,CAAC8E,IAAI,WAAW,OAAOU,EAAEuC,KAAKhE,IAAI6E,QAAQ5I,EAAE2E,IAAI,SAASlB,GAAG,OAAO+B,EAAEuC,KAAKhE,IAAIY,IAAIlB,IAAIzD,EAAEgF,IAAI,SAASvB,EAAEC,GAAG,IAAI/B,EAAEoG,KAAKhE,GAAG,OAAOW,EAAE/C,GAAG6D,EAAE7D,GAAGgD,IAAIlB,IAAI+B,EAAE7D,GAAGmD,IAAIrB,KAAKC,IAAIC,EAAEhC,GAAGkF,EAAElF,GAAGA,EAAElC,EAAEuF,IAAIvB,GAAE,GAAI9B,EAAE3B,EAAEgF,IAAIvB,EAAEC,GAAG/B,EAAElC,EAAEuF,IAAIvB,GAAE,IAAKsE,MAAM/H,EAAEiF,OAAO,SAASxB,GAAG,IAAIsE,KAAKpD,IAAIlB,GAAG,OAAM,EAAG,IAAIC,EAAEqE,KAAKhE,GAAG,OAAOW,EAAEhB,GAAGC,EAAED,GAAGmD,EAAEnD,GAAGA,EAAEjE,EAAEuF,IAAIvB,GAAE,GAAIC,EAAE1D,EAAEiF,OAAOxB,IAAG,GAAIzD,EAAE+F,MAAM,WAAW,IAAItC,EAAEsE,KAAKhE,GAAGW,EAAEjB,GAAG+B,EAAE/B,GAAGmF,OAAOjF,EAAEF,GAAGoD,EAAEpD,GAAGA,EAAEhE,EAAE,IAAI4F,IAAIf,EAAEb,EAAE9B,GAAE,SAAU+B,GAAGD,EAAEhE,EAAEuF,IAAItB,GAAE,MAAOD,EAAEzD,EAAE+F,UAAU/F,EAAEyE,QAAQ,SAAShB,EAAEC,GAAG,IAAI/B,EAAEoG,KAAKvC,EAAEuC,KAAKhE,IAAIU,SAAQ,SAAUd,EAAEW,GAAGb,EAAEF,KAAKG,EAAE/B,EAAEmD,IAAIR,GAAGA,EAAE3C,OAAO3B,EAAE8E,IAAI,SAASrB,GAAG,IAAIC,EAAEqE,KAAKhE,GAAGW,EAAEhB,GAAG,IAAIY,EAAEkB,EAAE9B,GAAGoB,IAAIrB,GAAG,GAAGC,EAAEkD,IAAIjF,EAAE2C,GAAG,OAAOA,EAAE,GAAGA,IAAIZ,EAAE/B,EAAEmD,IAAIrB,GAAG,OAAOa,EAAE,IAAItE,EAAE8G,EAAEpD,EAAEiD,EAAExF,EAAEmD,EAAEZ,GAAG,OAAOC,EAAED,GAAGA,EAAE1D,EAAEgF,IAAIvB,EAAEzD,GAAGA,GAAGA,EAAEuE,KAAK,WAAW,OAAOiB,EAAEuC,KAAKhE,IAAIQ,QAAQvE,EAAE6I,OAAO,WAAW,IAAIpF,EAAEC,EAAEqE,KAAKpG,EAAEoG,KAAKxD,OAAO,OAAOd,EAAE,IAAIqF,IAAG,WAAW,OAAOpF,EAAEmF,UAAUpF,EAAEsF,KAAK,WAAW,IAAItF,EAAE9B,EAAEoH,OAAO,OAAOtF,EAAEuF,KAAKvF,EAAE,CAACuF,MAAK,EAAGnD,MAAMnC,EAAEoB,IAAIrB,EAAEoC,SAASpC,GAAGzD,EAAEkI,QAAQ,WAAW,IAAIzE,EAAEC,EAAEqE,KAAKpG,EAAEoG,KAAKxD,OAAO,OAAOd,EAAE,IAAIqF,IAAG,WAAW,OAAOpF,EAAEwE,WAAWzE,EAAEsF,KAAK,WAAW,IAAItF,EAAE9B,EAAEoH,OAAO,GAAGtF,EAAEuF,KAAK,OAAOvF,EAAE,IAAIE,EAAED,EAAEoB,IAAIrB,EAAEoC,OAAO,MAAM,CAACmD,MAAK,EAAGnD,MAAM,CAACpC,EAAEoC,MAAMlC,KAAKF,GAAGzD,EAAE8I,IAAG,WAAW,OAAOf,KAAKG,WAAWzE,EAA10C,GAA+0C0B,EAAE,WAAW,SAAS1B,EAAEA,EAAEC,GAAG,OAAOqE,KAAKhE,GAAG,CAACO,EAAE,EAAE9C,EAAEkC,EAAEiD,EAAEjD,EAAEA,EAAEiD,EAAEpH,IAAIkH,GAAE,EAAGG,GAAE,EAAG5G,OAAE,EAAO2B,EAAE8B,EAAEoD,EAAEkB,KAAKvC,EAAE,IAAIH,IAAIiB,GAAE,EAAGc,GAAE,GAAIW,KAAKrE,EAAED,EAAE8B,KAAK,IAAI5D,EAAE8B,EAAEmB,UAAU,OAAOZ,OAAOgE,eAAerG,EAAE,OAAO,CAACmD,IAAI,WAAW,OAAOU,EAAEuC,KAAKhE,IAAI6E,QAAQjH,EAAEgD,IAAI,SAASlB,GAAG,IAAIC,EAAEqE,KAAKhE,GAAG,OAAOW,EAAEhB,GAAGA,EAAE1D,IAAI0D,EAAE1D,EAAE2E,IAAIlB,OAAOC,EAAE8B,EAAEb,IAAIlB,KAAKC,EAAE1D,EAAE2E,IAAIjB,EAAE8B,EAAEV,IAAIrB,KAAKC,EAAE/B,EAAEgD,IAAIlB,IAAI9B,EAAEuD,IAAI,SAASzB,GAAG,IAAIC,EAAEqE,KAAKhE,GAAG,OAAOW,EAAEhB,GAAGqE,KAAKpD,IAAIlB,KAAKzD,EAAE0D,GAAGmD,EAAEnD,GAAGA,EAAE1D,EAAEkF,IAAIzB,IAAIsE,MAAMpG,EAAEsD,OAAO,SAASxB,GAAG,IAAIsE,KAAKpD,IAAIlB,GAAG,OAAM,EAAG,IAAIC,EAAEqE,KAAKhE,GAAG,OAAOW,EAAEhB,GAAG1D,EAAE0D,GAAGmD,EAAEnD,GAAGA,EAAE1D,EAAEiF,OAAOxB,MAAMC,EAAE8B,EAAEb,IAAIlB,IAAIC,EAAE1D,EAAEiF,OAAOvB,EAAE8B,EAAEV,IAAIrB,KAAK9B,EAAEoE,MAAM,WAAW,IAAItC,EAAEsE,KAAKhE,GAAGW,EAAEjB,GAAG+B,EAAE/B,GAAGmF,OAAO5I,EAAEyD,GAAGoD,EAAEpD,GAAGA,EAAEzD,EAAE+F,UAAUpE,EAAEkH,OAAO,WAAW,IAAIpF,EAAEsE,KAAKhE,GAAG,OAAOW,EAAEjB,GAAGzD,EAAEyD,GAAGA,EAAEzD,EAAE6I,UAAUlH,EAAEuG,QAAQ,WAAW,IAAIzE,EAAEsE,KAAKhE,GAAG,OAAOW,EAAEjB,GAAGzD,EAAEyD,GAAGA,EAAEzD,EAAEkI,WAAWvG,EAAE4C,KAAK,WAAW,OAAOwD,KAAKc,UAAUlH,EAAEmH,IAAG,WAAW,OAAOf,KAAKc,UAAUlH,EAAE8C,QAAQ,SAAShB,EAAEC,GAAG,IAAI,IAAI/B,EAAEoG,KAAKc,SAASlF,EAAEhC,EAAEoH,QAAQpF,EAAEqF,MAAMvF,EAAEF,KAAKG,EAAEC,EAAEkC,MAAMlC,EAAEkC,MAAMkC,MAAMpE,EAAEhC,EAAEoH,QAAQtF,EAAz7B,GAA87B/D,EAAE,SAAS,CAACU,EAAE,SAASqD,EAAEC,GAAG,OAAO,IAAIqB,EAAEtB,EAAEC,IAAI7B,EAAE,SAAS4B,EAAEC,GAAG,OAAO,IAAIyB,EAAE1B,EAAEC,MAAM,SAASiE,IAAIvH,IAAIgH,IAAIvF,IAAI,SAASgG,EAAEpE,GAAG,OAAOA,EAAE,SAAS0E,EAAE1E,GAAG,OAAOA,E,+rBAAE,IAAIwF,EAAE7C,EAAElG,EAAE,oBAAoBgJ,QAAQ,iBAAiBA,OAAO,KAAK9D,EAAE,oBAAoBC,IAAIC,EAAE,oBAAoBC,IAAI4D,EAAE,oBAAoB5B,YAAO,IAASA,MAAMC,WAAW,oBAAoB4B,QAAQxJ,EAAEM,EAAEgJ,OAAOG,IAAI,mBAAmBJ,EAAE,IAAI,kBAAiB,EAAGA,GAAGlJ,EAAEG,EAAEgJ,OAAOG,IAAI,mBAAmB,qBAAqBtF,EAAE7D,EAAEgJ,OAAOG,IAAI,eAAe,iBAAiBP,GAAE,oBAAoBI,QAAQA,OAAOI,UAAU,aAAyyDvH,GAAE,GAAGiC,OAAOY,UAAUT,YAAYK,GAAG,oBAAoB4E,SAASA,QAAQG,QAAQH,QAAQG,aAAQ,IAASvF,OAAOwF,sBAAsB,SAAS/F,GAAG,OAAOO,OAAOyF,oBAAoBhG,GAAGsD,OAAO/C,OAAOwF,sBAAsB/F,KAAKO,OAAOyF,oBAAoBhE,GAAGzB,OAAO0F,2BAA2B,SAASjG,GAAG,IAAIC,EAAE,GAAG,OAAOc,GAAGf,GAAGgB,SAAQ,SAAU9C,GAAG+B,EAAE/B,GAAGqC,OAAOkD,yBAAyBzD,EAAE9B,MAAM+B,GAAGyC,GAAG,GAAGkB,GAAG,CAACvC,IAAI,SAASrB,EAAEC,GAAG,GAAGA,IAAIK,EAAE,OAAON,EAAE,IAAIE,EAAE6B,EAAE/B,GAAG,IAAIiB,EAAEf,EAAED,GAAG,OAAO,SAASD,EAAEC,EAAE/B,GAAG,IAAIgC,EAAEW,EAAEsC,EAAElD,EAAE/B,GAAG,OAAO2C,EAAE,UAAUA,EAAEA,EAAEuB,MAAM,QAAQlC,EAAEW,EAAEQ,WAAM,IAASnB,OAAE,EAAOA,EAAEJ,KAAKE,EAAEoD,QAAG,EAA5G,CAAoHpD,EAAEE,EAAED,GAAG,IAAIY,EAAEX,EAAED,GAAG,OAAOD,EAAEmD,IAAIjF,EAAE2C,GAAGA,EAAEA,IAAI2C,EAAExD,EAAE9B,EAAE+B,IAAIyD,EAAE1D,GAAGA,EAAEzD,EAAE0D,GAAGoD,EAAErD,EAAEkD,EAAExF,EAAEmD,EAAEb,IAAIa,GAAGK,IAAI,SAASlB,EAAEC,GAAG,OAAOA,KAAK8B,EAAE/B,IAAI8F,QAAQ,SAAS9F,GAAG,OAAO2F,QAAQG,QAAQ/D,EAAE/B,KAAKuB,IAAI,SAASvB,EAAEC,EAAE/B,GAAG,IAAIgC,EAAEiD,EAAEpB,EAAE/B,GAAGC,GAAG,GAAG,MAAMC,OAAE,EAAOA,EAAEqB,IAAI,OAAOrB,EAAEqB,IAAIzB,KAAKE,EAAEoD,EAAElF,IAAG,EAAG,IAAI8B,EAAEgD,EAAE,CAAC,IAAInC,EAAE2C,EAAEzB,EAAE/B,GAAGC,GAAG1D,EAAE,MAAMsE,OAAE,EAAOA,EAAEP,GAAG,GAAG/D,GAAGA,EAAE2B,IAAIA,EAAE,OAAO8B,EAAEzD,EAAE0D,GAAG/B,EAAE8B,EAAEhE,EAAEiE,IAAG,GAAG,EAAG,GAAGyB,EAAExD,EAAE2C,UAAK,IAAS3C,GAAG+C,EAAEjB,EAAE9B,EAAE+B,IAAI,OAAM,EAAGyD,EAAE1D,GAAGoD,EAAEpD,GAAG,OAAOA,EAAEzD,EAAE0D,KAAK/B,GAAG,iBAAiBA,IAAI8B,EAAEzD,EAAE0D,GAAG/B,EAAE8B,EAAEhE,EAAEiE,IAAG,GAAG,IAAKiG,eAAe,SAASlG,EAAEC,GAAG,YAAO,IAASuD,EAAExD,EAAE9B,EAAE+B,IAAIA,KAAKD,EAAE9B,GAAG8B,EAAEhE,EAAEiE,IAAG,EAAGyD,EAAE1D,GAAGoD,EAAEpD,WAAWA,EAAEhE,EAAEiE,GAAGD,EAAEzD,UAAUyD,EAAEzD,EAAE0D,IAAG,GAAIwD,yBAAyB,SAASzD,EAAEC,GAAG,IAAI/B,EAAE6D,EAAE/B,GAAGE,EAAEyF,QAAQlC,yBAAyBvF,EAAE+B,GAAG,OAAOC,EAAE,CAAC+B,UAAS,EAAGC,aAAa,IAAIlC,EAAEa,GAAG,WAAWZ,EAAEkC,WAAWjC,EAAEiC,WAAWC,MAAMlE,EAAE+B,IAAIC,GAAGqE,eAAe,WAAWvE,EAAE,KAAKQ,eAAe,SAASR,GAAG,OAAOO,OAAOC,eAAeR,EAAE9B,IAAI+G,eAAe,WAAWjF,EAAE,MAAM6D,GAAG,GAAGhD,EAAE+C,IAAG,SAAU5D,EAAEC,GAAG4D,GAAG7D,GAAG,WAAW,OAAO9E,UAAU,GAAGA,UAAU,GAAG,GAAG+E,EAAEkG,MAAM7B,KAAKpJ,eAAe2I,GAAGqC,eAAe,SAASjG,EAAE/B,GAAG,OAAqE0F,GAAGsC,eAAepG,KAAKwE,KAAKrE,EAAE,GAAG/B,IAAI2F,GAAGtC,IAAI,SAAStB,EAAE/B,EAAEgC,GAAG,OAAmF0D,GAAGrC,IAAIzB,KAAKwE,KAAKrE,EAAE,GAAG/B,EAAEgC,EAAED,EAAE,KAAK,IAAImG,GAAG,WAAW,SAASlG,EAAED,GAAG,IAAIC,EAAEoE,KAAKA,KAAKxB,EAAE4C,EAAEpB,KAAKf,GAAE,EAAGe,KAAK+B,QAAQ,SAASpG,EAAEY,EAAEtE,GAAG,GAAG,mBAAmB0D,GAAG,mBAAmBY,EAAE,CAAC,IAAII,EAAEJ,EAAEA,EAAEZ,EAAE,IAAImB,EAAElB,EAAE,OAAO,SAASF,GAAG,IAAIC,EAAEqE,UAAK,IAAStE,IAAIA,EAAEiB,GAAG,IAAI,IAAI/C,EAAEhD,UAAUC,OAAO+E,EAAEP,MAAMzB,EAAE,EAAEA,EAAE,EAAE,GAAG3B,EAAE,EAAEA,EAAE2B,EAAE3B,IAAI2D,EAAE3D,EAAE,GAAGrB,UAAUqB,GAAG,OAAO6E,EAAEiF,QAAQrG,GAAE,SAAUA,GAAG,IAAI9B,EAAE,OAAOA,EAAE2C,GAAGf,KAAKqG,MAAMjI,EAAE,CAAC+B,EAAED,GAAGsD,OAAOpD,QAAQ,IAAIoB,EAAE,GAAG,mBAAmBT,GAAGb,EAAE,QAAG,IAASzD,GAAG,mBAAmBA,GAAGyD,EAAE,GAAG9B,EAAE+B,GAAG,CAAC,IAAIyB,EAAEqB,EAAE7C,GAAG7D,EAAEgH,EAAEnD,EAAED,OAAE,GAAQW,GAAE,EAAG,IAAIU,EAAET,EAAExE,GAAGuE,GAAE,EAAG,QAAQA,EAAEiC,EAAEnB,GAAGoB,EAAEpB,GAAG,MAAM,oBAAoB4E,SAAShF,aAAagF,QAAQhF,EAAEiF,MAAK,SAAUvG,GAAG,OAAO4C,EAAElB,EAAEnF,GAAGyG,EAAEhD,EAAE0B,MAAK,SAAU1B,GAAG,MAAM6C,EAAEnB,GAAG1B,MAAM4C,EAAElB,EAAEnF,GAAGyG,EAAE1B,EAAEI,IAAI,IAAIzB,GAAG,iBAAiBA,EAAE,CAAC,IAAIqB,EAAET,EAAEZ,MAAM9D,EAAE,OAAO,YAAO,IAASmF,IAAIA,EAAErB,GAAGC,EAAEqD,GAAGxH,EAAEuF,GAAE,GAAIA,EAAEtB,EAAE,GAAGC,IAAIqE,KAAKkC,mBAAmB,SAASxG,EAAEC,GAAG,MAAM,mBAAmBD,EAAE,SAASC,GAAG,IAAI,IAAI/B,EAAEhD,UAAUC,OAAO0F,EAAElB,MAAMzB,EAAE,EAAEA,EAAE,EAAE,GAAG3B,EAAE,EAAEA,EAAE2B,EAAE3B,IAAIsE,EAAEtE,EAAE,GAAGrB,UAAUqB,GAAG,OAAO2D,EAAEsG,mBAAmBvG,GAAE,SAAUA,GAAG,OAAOD,EAAEmG,WAAM,EAAO,CAAClG,GAAGqD,OAAOzC,QAAQ,CAACX,EAAEmG,QAAQrG,EAAEC,GAAE,SAAUD,EAAEC,GAAG/B,EAAE8B,EAAEa,EAAEZ,KAAK/B,EAAE2C,GAAG,IAAI3C,EAAE2C,GAAG,kBAAkB,MAAMZ,OAAE,EAAOA,EAAEwG,aAAanC,KAAKoC,cAAczG,EAAEwG,YAAY,kBAAkB,MAAMxG,OAAE,EAAOA,EAAE0G,aAAarC,KAAKsC,cAAc3G,EAAE0G,YAAY,IAAI9F,EAAEX,EAAEiB,UAAU,OAAON,EAAEgG,YAAY,SAAS3G,GAAGhC,EAAEgC,IAAIF,EAAE,GAAGC,EAAEC,KAAKA,EAAElE,EAAEkE,IAAI,IAAIW,EAAEkC,EAAEuB,MAAM/H,EAAE8G,EAAEiB,KAAKpE,OAAE,GAAQ,OAAO3D,EAAE+D,GAAGqD,GAAE,EAAGb,EAAEjC,GAAGtE,GAAGsE,EAAEiG,YAAY,SAAS7G,EAAE/B,GAAG,IAAiF2C,GAA3EZ,GAAGA,EAAEK,IAA0E4C,EAAE,OAAON,EAAE/B,EAAE3C,GAAG8E,OAAE,EAAOnC,IAAIA,EAAE+F,cAAc,SAAS5G,GAAGsE,KAAKf,EAAEvD,GAAGa,EAAE6F,cAAc,SAASzG,GAAGA,IAAIyF,GAAG1F,EAAE,IAAIsE,KAAKxB,EAAE7C,GAAGY,EAAEkG,aAAa,SAAS/G,EAAE9B,GAAG,IAAIgC,EAAE,IAAIA,EAAEhC,EAAE/C,OAAO,EAAE+E,GAAG,EAAEA,IAAI,CAAC,IAAIW,EAAE3C,EAAEgC,GAAG,GAAG,IAAIW,EAAE8D,KAAKxJ,QAAQ,YAAY0F,EAAE+D,GAAG,CAAC5E,EAAEa,EAAEuB,MAAM,OAAO,IAAI7F,EAAEkG,EAAE,WAAWiC,EAAE,OAAOzE,EAAED,GAAGzD,EAAEyD,EAAE9B,GAAGoG,KAAK+B,QAAQrG,GAAE,SAAUA,GAAG,OAAOzD,EAAEyD,EAAE9B,EAAErC,MAAMqE,EAAE,QAAQA,EAA1wD,GAA+wD8G,GAAG,IAAIZ,GAAGa,GAAGD,GAAGX,QAAQa,GAAGF,GAAGR,mBAAmBW,KAAKH,IAAII,GAAGJ,GAAGJ,cAAcO,KAAKH,IAAIK,GAAGL,GAAGN,cAAcS,KAAKH,IAAIM,GAAGN,GAAGD,aAAaI,KAAKH,IAAIO,GAAGP,GAAGH,YAAYM,KAAKH,IAAIQ,GAAGR,GAAGF,YAAYK,KAAKH,IAAI,c,iSCQ7liBS,EAAe,WACjB,OAAOzJ,KAAK0J,SAAS7H,SAAS,IAAI8H,UAAU,GAAGC,MAAM,IAAIvH,KAAK,MAG5DwH,EAAc,CAChBC,KAAM,eAAiBL,IACvBM,QAAS,kBAAoBN,IAC7BO,qBAAsB,WACpB,MAAO,+BAAiCP,MAQ5C,SAASQ,EAAcC,GACrB,GAAmB,iBAARA,GAA4B,OAARA,EAAc,OAAO,EAGpD,IAFA,IAAIC,EAAQD,EAE4B,OAAjC3H,OAAOC,eAAe2H,IAC3BA,EAAQ5H,OAAOC,eAAe2H,GAGhC,OAAO5H,OAAOC,eAAe0H,KAASC,EA6BxC,SAASC,EAAYC,EAASC,EAAgBC,GAC5C,IAAIC,EAEJ,GAA8B,mBAAnBF,GAAqD,mBAAbC,GAA+C,mBAAbA,GAAmD,mBAAjBrN,UAAU,GAC/H,MAAM,IAAIiF,MAAM,uJAQlB,GAL8B,mBAAnBmI,QAAqD,IAAbC,IACjDA,EAAWD,EACXA,OAAiBhN,QAGK,IAAbiN,EAA0B,CACnC,GAAwB,mBAAbA,EACT,MAAM,IAAIpI,MAAM,2CAGlB,OAAOoI,EAASH,EAATG,CAAsBF,EAASC,GAGxC,GAAuB,mBAAZD,EACT,MAAM,IAAIlI,MAAM,0CAGlB,IAAIsI,EAAiBJ,EACjBK,EAAeJ,EACfK,EAAmB,GACnBC,EAAgBD,EAChBE,GAAgB,EASpB,SAASC,IACHF,IAAkBD,IACpBC,EAAgBD,EAAiB9M,SAUrC,SAASkN,IACP,GAAIF,EACF,MAAM,IAAI1I,MAAM,wMAGlB,OAAOuI,EA2BT,SAASM,EAAUC,GACjB,GAAwB,mBAAbA,EACT,MAAM,IAAI9I,MAAM,2CAGlB,GAAI0I,EACF,MAAM,IAAI1I,MAAM,6TAGlB,IAAI+I,GAAe,EAGnB,OAFAJ,IACAF,EAAczE,KAAK8E,GACZ,WACL,GAAKC,EAAL,CAIA,GAAIL,EACF,MAAM,IAAI1I,MAAM,kKAGlB+I,GAAe,EACfJ,IACA,IAAIK,EAAQP,EAAcQ,QAAQH,GAClCL,EAAc/D,OAAOsE,EAAO,GAC5BR,EAAmB,OA8BvB,SAASU,EAASC,GAChB,IAAKrB,EAAcqB,GACjB,MAAM,IAAInJ,MAAM,2EAGlB,QAA2B,IAAhBmJ,EAAOC,KAChB,MAAM,IAAIpJ,MAAM,sFAGlB,GAAI0I,EACF,MAAM,IAAI1I,MAAM,sCAGlB,IACE0I,GAAgB,EAChBH,EAAeD,EAAeC,EAAcY,GAC5C,QACAT,GAAgB,EAKlB,IAFA,IAAIW,EAAYb,EAAmBC,EAE1B/H,EAAI,EAAGA,EAAI2I,EAAUrO,OAAQ0F,KAEpCoI,EADeO,EAAU3I,MAI3B,OAAOyI,EAcT,SAASG,EAAeC,GACtB,GAA2B,mBAAhBA,EACT,MAAM,IAAIvJ,MAAM,8CAGlBsI,EAAiBiB,EAKjBL,EAAS,CACPE,KAAM1B,EAAYE,UAWtB,SAAS4B,IACP,IAAIC,EAEAC,EAAiBb,EACrB,OAAOY,EAAO,CASZZ,UAAW,SAAmBc,GAC5B,GAAwB,iBAAbA,GAAsC,OAAbA,EAClC,MAAM,IAAIrO,UAAU,0CAGtB,SAASsO,IACHD,EAASxE,MACXwE,EAASxE,KAAKyD,KAMlB,OAFAgB,IAEO,CACLC,YAFgBH,EAAeE,OAK7B,KAAgB,WACtB,OAAOzF,MACNsF,EASL,OAHAP,EAAS,CACPE,KAAM1B,EAAYC,QAEbU,EAAQ,CACba,SAAUA,EACVL,UAAWA,EACXD,SAAUA,EACVU,eAAgBA,IACT,KAAgBE,EAAYnB,EA0BvC,SAASyB,EAA8BC,EAAKZ,GAC1C,IAAIa,EAAab,GAAUA,EAAOC,KAElC,MAAO,UADiBY,GAAc,WAAcxO,OAAOwO,GAAc,KAAQ,aAC3C,cAAiBD,EAAhD,iLAgET,SAASE,EAAgBC,GAIvB,IAHA,IAAIC,EAAc/J,OAAOO,KAAKuJ,GAC1BE,EAAgB,GAEX1J,EAAI,EAAGA,EAAIyJ,EAAYnP,OAAQ0F,IAAK,CAC3C,IAAIqJ,EAAMI,EAAYzJ,GAQO,mBAAlBwJ,EAASH,KAClBK,EAAcL,GAAOG,EAASH,IAIlC,IASIM,EATAC,EAAmBlK,OAAOO,KAAKyJ,GAWnC,KAjEF,SAA4BF,GAC1B9J,OAAOO,KAAKuJ,GAAUrJ,SAAQ,SAAUkJ,GACtC,IAAI7B,EAAUgC,EAASH,GAKvB,QAA4B,IAJT7B,OAAQ/M,EAAW,CACpCiO,KAAM1B,EAAYC,OAIlB,MAAM,IAAI3H,MAAM,YAAe+J,EAAf,iRAGlB,QAEO,IAFI7B,OAAQ/M,EAAW,CAC5BiO,KAAM1B,EAAYG,yBAElB,MAAM,IAAI7H,MAAM,YAAe+J,EAAf,6EAA0GrC,EAAYC,KAAtH,kTAoDlB4C,CAAmBH,GACnB,MAAOrK,GACPsK,EAAsBtK,EAGxB,OAAO,SAAqByK,EAAOrB,GAKjC,QAJc,IAAVqB,IACFA,EAAQ,IAGNH,EACF,MAAMA,EAcR,IAX2C,IAQvCI,GAAa,EACbC,EAAY,GAEPC,EAAK,EAAGA,EAAKL,EAAiBtP,OAAQ2P,IAAM,CACnD,IAAIC,EAAON,EAAiBK,GACxBzC,EAAUkC,EAAcQ,GACxBC,EAAsBL,EAAMI,GAC5BE,EAAkB5C,EAAQ2C,EAAqB1B,GAEnD,QAA+B,IAApB2B,EAAiC,CAC1C,IAAIC,EAAejB,EAA8Bc,EAAMzB,GACvD,MAAM,IAAInJ,MAAM+K,GAGlBL,EAAUE,GAAQE,EAClBL,EAAaA,GAAcK,IAAoBD,EAIjD,OADAJ,EAAaA,GAAcH,EAAiBtP,SAAWoF,OAAOO,KAAK6J,GAAOxP,QACtD0P,EAAYF,GAIpC,SAASQ,EAAkBC,EAAe/B,GACxC,OAAO,WACL,OAAOA,EAAS+B,EAAcjF,MAAM7B,KAAMpJ,aA0B9C,SAASmQ,EAAmBC,EAAgBjC,GAC1C,GAA8B,mBAAnBiC,EACT,OAAOH,EAAkBG,EAAgBjC,GAG3C,GAA8B,iBAAnBiC,GAAkD,OAAnBA,EACxC,MAAM,IAAInL,MAAM,0EAA+F,OAAnBmL,EAA0B,cAAgBA,GAAtH,8FAGlB,IAAIC,EAAsB,GAE1B,IAAK,IAAIrB,KAAOoB,EAAgB,CAC9B,IAAIF,EAAgBE,EAAepB,GAEN,mBAAlBkB,IACTG,EAAoBrB,GAAOiB,EAAkBC,EAAe/B,IAIhE,OAAOkC,EAGT,SAASC,EAAgBtD,EAAKgC,EAAK9H,GAYjC,OAXI8H,KAAOhC,EACT3H,OAAOgE,eAAe2D,EAAKgC,EAAK,CAC9B9H,MAAOA,EACPD,YAAY,EACZD,cAAc,EACdD,UAAU,IAGZiG,EAAIgC,GAAO9H,EAGN8F,EAGT,SAASpC,EAAQ2F,EAAQC,GACvB,IAAI5K,EAAOP,OAAOO,KAAK2K,GASvB,OAPIlL,OAAOwF,uBACTjF,EAAKqD,KAAKgC,MAAMrF,EAAMP,OAAOwF,sBAAsB0F,IAGjDC,IAAgB5K,EAAOA,EAAK6K,QAAO,SAAUC,GAC/C,OAAOrL,OAAOkD,yBAAyBgI,EAAQG,GAAKzJ,eAE/CrB,EAGT,SAAS+K,EAAeC,GACtB,IAAK,IAAIjL,EAAI,EAAGA,EAAI3F,UAAUC,OAAQ0F,IAAK,CACzC,IAAIkL,EAAyB,MAAhB7Q,UAAU2F,GAAa3F,UAAU2F,GAAK,GAE/CA,EAAI,EACNiF,EAAQiG,GAAQ,GAAM/K,SAAQ,SAAUkJ,GACtCsB,EAAgBM,EAAQ5B,EAAK6B,EAAO7B,OAE7B3J,OAAO0F,0BAChB1F,OAAOyL,iBAAiBF,EAAQvL,OAAO0F,0BAA0B8F,IAEjEjG,EAAQiG,GAAQ/K,SAAQ,SAAUkJ,GAChC3J,OAAOgE,eAAeuH,EAAQ5B,EAAK3J,OAAOkD,yBAAyBsI,EAAQ7B,OAKjF,OAAO4B,EAaT,SAASG,IACP,IAAK,IAAIC,EAAOhR,UAAUC,OAAQgR,EAAQ,IAAIxM,MAAMuM,GAAOnB,EAAO,EAAGA,EAAOmB,EAAMnB,IAChFoB,EAAMpB,GAAQ7P,UAAU6P,GAG1B,OAAqB,IAAjBoB,EAAMhR,OACD,SAAUiR,GACf,OAAOA,GAIU,IAAjBD,EAAMhR,OACDgR,EAAM,GAGRA,EAAME,QAAO,SAAUjL,EAAGqB,GAC/B,OAAO,WACL,OAAOrB,EAAEqB,EAAE0D,WAAM,EAAQjL,gBAsB/B,SAASoR,IACP,IAAK,IAAIJ,EAAOhR,UAAUC,OAAQoR,EAAc,IAAI5M,MAAMuM,GAAOnB,EAAO,EAAGA,EAAOmB,EAAMnB,IACtFwB,EAAYxB,GAAQ7P,UAAU6P,GAGhC,OAAO,SAAU3C,GACf,OAAO,WACL,IAAIoE,EAAQpE,EAAYjC,WAAM,EAAQjL,WAElCuR,EAAY,WACd,MAAM,IAAItM,MAAM,2HAGduM,EAAgB,CAClB3D,SAAUyD,EAAMzD,SAChBM,SAAU,WACR,OAAOoD,EAAUtG,WAAM,EAAQjL,aAG/ByR,EAAQJ,EAAYnM,KAAI,SAAUwM,GACpC,OAAOA,EAAWF,MAGpB,OAAOb,EAAe,GAAIW,EAAO,CAC/BnD,SAFFoD,EAAYR,EAAQ9F,WAAM,EAAQwG,EAAtBV,CAA6BO,EAAMnD,gB,mCCnoBrD,SAASwD,EAAqBzL,EAAGqB,GAC/B,OAAOrB,IAAMqB,EAGf,SAASqK,EAA2BC,EAAeC,EAAM1H,GACvD,GAAa,OAAT0H,GAA0B,OAAT1H,GAAiB0H,EAAK7R,SAAWmK,EAAKnK,OACzD,OAAO,EAKT,IADA,IAAIA,EAAS6R,EAAK7R,OACT0F,EAAI,EAAGA,EAAI1F,EAAQ0F,IAC1B,IAAKkM,EAAcC,EAAKnM,GAAIyE,EAAKzE,IAC/B,OAAO,EAIX,OAAO,EAGF,SAASoM,EAAeC,GAC7B,IAAIH,EAAgB7R,UAAUC,OAAS,QAAsBG,IAAjBJ,UAAU,GAAmBA,UAAU,GAAK2R,EAEpFM,EAAW,KACXC,EAAa,KAEjB,OAAO,WAOL,OANKN,EAA2BC,EAAeI,EAAUjS,aAEvDkS,EAAaF,EAAK/G,MAAM,KAAMjL,YAGhCiS,EAAWjS,UACJkS,GAIX,SAASC,EAAgBlB,GACvB,IAAImB,EAAe3N,MAAMC,QAAQuM,EAAM,IAAMA,EAAM,GAAKA,EAExD,IAAKmB,EAAaC,OAAM,SAAUC,GAChC,MAAsB,mBAARA,KACZ,CACF,IAAIC,EAAkBH,EAAalN,KAAI,SAAUoN,GAC/C,cAAcA,KACbnN,KAAK,MACR,MAAM,IAAIF,MAAM,wGAAgHsN,EAAkB,KAGpJ,OAAOH,EAGF,SAASI,EAAsBC,GACpC,IAAK,IAAIzB,EAAOhR,UAAUC,OAAQyS,EAAiBjO,MAAMuM,EAAO,EAAIA,EAAO,EAAI,GAAInB,EAAO,EAAGA,EAAOmB,EAAMnB,IACxG6C,EAAe7C,EAAO,GAAK7P,UAAU6P,GAGvC,OAAO,WACL,IAAK,IAAI8C,EAAQ3S,UAAUC,OAAQgR,EAAQxM,MAAMkO,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACjF3B,EAAM2B,GAAS5S,UAAU4S,GAG3B,IAAIC,EAAiB,EACjBC,EAAa7B,EAAM3N,MACnB8O,EAAeD,EAAgBlB,GAE/B8B,EAAqBN,EAAQxH,WAAM7K,EAAW,CAAC,WAGjD,OAFAyS,IAEOC,EAAW7H,MAAM,KAAMjL,aAC7BoI,OAAOsK,IAGNM,EAAWP,GAAQ,WAIrB,IAHA,IAAIQ,EAAS,GACThT,EAASmS,EAAanS,OAEjB0F,EAAI,EAAGA,EAAI1F,EAAQ0F,IAE1BsN,EAAOhK,KAAKmJ,EAAazM,GAAGsF,MAAM,KAAMjL,YAI1C,OAAO+S,EAAmB9H,MAAM,KAAMgI,MAWxC,OARAD,EAASF,WAAaA,EACtBE,EAASZ,aAAeA,EACxBY,EAASH,eAAiB,WACxB,OAAOA,GAETG,EAASE,oBAAsB,WAC7B,OAAOL,EAAiB,GAEnBG,G,iLAIJ,IAAIG,EAAiBX,EAAsBT,GAE3C,SAASqB,EAAyBC,GACvC,IAAIC,EAAkBtT,UAAUC,OAAS,QAAsBG,IAAjBJ,UAAU,GAAmBA,UAAU,GAAKmT,EAE1F,GAAyB,iBAAdE,EACT,MAAM,IAAIpO,MAAM,gIAAwIoO,GAE1J,IAAIE,EAAalO,OAAOO,KAAKyN,GAC7B,OAAOC,EAAgBC,EAAWrO,KAAI,SAAU8J,GAC9C,OAAOqE,EAAUrE,OACf,WACF,IAAK,IAAIwE,EAAQxT,UAAUC,OAAQiK,EAASzF,MAAM+O,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAClFvJ,EAAOuJ,GAASzT,UAAUyT,GAG5B,OAAOvJ,EAAOiH,QAAO,SAAUuC,EAAaxM,EAAO+G,GAEjD,OADAyF,EAAYH,EAAWtF,IAAU/G,EAC1BwM,IACN,S,iCCxGP,SAASC,EAAWC,GAChB,MAAO,CACHvF,KAAMwF,EAAQC,YACdF,QAASA,GAIjB,SAASG,EAAcC,EAAWC,GAC9B,MAAO,CACH5F,KAAMwF,EAAQK,eACdF,UAAWA,EACXC,OAAQA,GAIhB,SAASE,EAAcH,GACnB,MAAO,CACH3F,KAAMwF,EAAQO,eACdJ,UAAWA,GAInB,SAASK,EAAeL,GACpB,MAAO,CACH3F,KAAMwF,EAAQS,gBACdN,UAAWA,GAInB,SAASO,EAAkBP,EAAWQ,GAClC,IAAIC,OAAY,IAAPD,EAAgB,CAAEE,qBAAqB,EAAOC,YAAY,GAAUH,EAAIE,EAAsBD,EAAGC,oBAAqBC,EAAaF,EAAGE,WAC/I,MAAO,CACHtG,KAAMwF,EAAQe,oBACdZ,UAAWA,EACXU,oBAAqBA,EACrBC,WAAYA,GAIpB,SAASE,EAASb,EAAWc,GACzB,MAAO,CACHzG,KAAMwF,EAAQkB,UACdf,UAAWA,EACXc,MAAOA,GAIf,SAASE,EAAYhB,EAAWiB,EAAShB,GACrC,MAAO,CACH5F,KAAMwF,EAAQqB,aACdlB,UAAWA,EACXiB,QAASA,EACThB,OAAQA,GAIhB,SAASkB,EAAYnB,EAAWiB,GAC5B,MAAO,CACH5G,KAAMwF,EAAQuB,aACdpB,UAAWA,EACXiB,QAASA,GAIjB,SAASI,EAAsBC,GAC3B,MAAO,CACHjH,KAAMwF,EAAQ0B,wBACdD,YAAaA,GA/ErBzB,EAAQ2B,YAAa,EACrB3B,EAAQ4B,uBAAyB5B,EAAQwB,sBAAwBxB,EAAQsB,YAActB,EAAQmB,YAAcnB,EAAQgB,SAAWhB,EAAQU,kBAAoBV,EAAQQ,eAAiBR,EAAQM,cAAgBN,EAAQE,cAAgBF,EAAQF,WAAaE,EAAQ0B,wBAA0B1B,EAAQuB,aAAevB,EAAQqB,aAAerB,EAAQkB,UAAYlB,EAAQ6B,mBAAqB7B,EAAQe,oBAAsBf,EAAQS,gBAAkBT,EAAQO,eAAiBP,EAAQK,eAAiBL,EAAQC,iBAAc,EAC3fD,EAAQC,YAAc,cACtBD,EAAQK,eAAiB,iBACzBL,EAAQO,eAAiB,iBACzBP,EAAQS,gBAAkB,kBAC1BT,EAAQe,oBAAsB,sBAC9Bf,EAAQ6B,mBAAqB,qBAC7B7B,EAAQkB,UAAY,YACpBlB,EAAQqB,aAAe,eACvBrB,EAAQuB,aAAe,eACvBvB,EAAQ0B,wBAA0B,0BAOlC1B,EAAQF,WAAaA,EAQrBE,EAAQE,cAAgBA,EAOxBF,EAAQM,cAAgBA,EAOxBN,EAAQQ,eAAiBA,EAUzBR,EAAQU,kBAAoBA,EAQ5BV,EAAQgB,SAAWA,EASnBhB,EAAQmB,YAAcA,EAQtBnB,EAAQsB,YAAcA,EAOtBtB,EAAQwB,sBAAwBA,EAChCxB,EAAQ4B,uBAAyB,CAC7B9B,WAAYA,EACZI,cAAeA,EACfI,cAAeA,EACfE,eAAgBA,EAChBE,kBAAmBA,EACnBM,SAAUA,EACVG,YAAaA,EACbG,YAAaA,EACbE,sBAAuBA,I,iCC5F3BxB,EAAQ2B,YAAa,EACrB3B,EAAQ8B,qBAAuB9B,EAAQ+B,4BAAyB,EAChE/B,EAAQ+B,uBAAyB,yBAOjC/B,EAAQ8B,qBANR,SAA8B1B,GAC1B,MAAO,CACH5F,KAAMwF,EAAQ+B,uBACd3B,OAAQA,K,mCCLhB,IAAI4B,EAAazM,MAAQA,KAAKyM,WAAc,SAAUC,EAASC,EAAYjO,EAAGkO,GAE1E,OAAO,IAAKlO,IAAMA,EAAIsD,WAAU,SAAU6K,EAASC,GAC/C,SAASC,EAAUjP,GAAS,IAAMkP,EAAKJ,EAAU5L,KAAKlD,IAAW,MAAOlC,GAAKkR,EAAOlR,IACpF,SAASqR,EAASnP,GAAS,IAAMkP,EAAKJ,EAAiB,MAAE9O,IAAW,MAAOlC,GAAKkR,EAAOlR,IACvF,SAASoR,EAAKE,GAJlB,IAAepP,EAIaoP,EAAOjM,KAAO4L,EAAQK,EAAOpP,QAJ1CA,EAIyDoP,EAAOpP,MAJhDA,aAAiBY,EAAIZ,EAAQ,IAAIY,GAAE,SAAUmO,GAAWA,EAAQ/O,OAITmE,KAAK8K,EAAWE,GAClGD,GAAMJ,EAAYA,EAAU/K,MAAM6K,EAASC,GAAc,KAAK3L,YAGlEmM,EAAenN,MAAQA,KAAKmN,aAAgB,SAAUT,EAASU,GAC/D,IAAsGpQ,EAAGpF,EAAGgC,EAAG2E,EAA3G/G,EAAI,CAAE6V,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP1T,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO2T,KAAM,GAAIC,IAAK,IAChG,OAAOjP,EAAI,CAAEyC,KAAMyM,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXtM,SAA0B5C,EAAE4C,OAAOI,UAAY,WAAa,OAAOvB,OAAUzB,EACvJ,SAASkP,EAAK/R,GAAK,OAAO,SAAUY,GAAK,OACzC,SAAcgE,GACV,GAAItD,EAAG,MAAM,IAAI7F,UAAU,mCAC3B,KAAOK,OACH,GAAIwF,EAAI,EAAGpF,IAAMgC,EAAY,EAAR0G,EAAG,GAAS1I,EAAU,OAAI0I,EAAG,GAAK1I,EAAS,SAAOgC,EAAIhC,EAAU,SAAMgC,EAAE4B,KAAK5D,GAAI,GAAKA,EAAEoJ,SAAWpH,EAAIA,EAAE4B,KAAK5D,EAAG0I,EAAG,KAAKW,KAAM,OAAOrH,EAE3J,OADIhC,EAAI,EAAGgC,IAAG0G,EAAK,CAAS,EAARA,EAAG,GAAQ1G,EAAEkE,QACzBwC,EAAG,IACP,KAAK,EAAG,KAAK,EAAG1G,EAAI0G,EAAI,MACxB,KAAK,EAAc,OAAX9I,EAAE6V,QAAgB,CAAEvP,MAAOwC,EAAG,GAAIW,MAAM,GAChD,KAAK,EAAGzJ,EAAE6V,QAASzV,EAAI0I,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAK9I,EAAEgW,IAAItT,MAAO1C,EAAE+V,KAAKrT,MAAO,SACxC,QACI,MAAkBN,GAAZA,EAAIpC,EAAE+V,MAAY1W,OAAS,GAAK+C,EAAEA,EAAE/C,OAAS,KAAkB,IAAVyJ,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE9I,EAAI,EAAG,SACjG,GAAc,IAAV8I,EAAG,MAAc1G,GAAM0G,EAAG,GAAK1G,EAAE,IAAM0G,EAAG,GAAK1G,EAAE,IAAM,CAAEpC,EAAE6V,MAAQ/M,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAY9I,EAAE6V,MAAQzT,EAAE,GAAI,CAAEpC,EAAE6V,MAAQzT,EAAE,GAAIA,EAAI0G,EAAI,MAC7D,GAAI1G,GAAKpC,EAAE6V,MAAQzT,EAAE,GAAI,CAAEpC,EAAE6V,MAAQzT,EAAE,GAAIpC,EAAEgW,IAAI3N,KAAKS,GAAK,MACvD1G,EAAE,IAAIpC,EAAEgW,IAAItT,MAChB1C,EAAE+V,KAAKrT,MAAO,SAEtBoG,EAAK8M,EAAK5R,KAAKkR,EAASlV,GAC1B,MAAOoE,GAAK0E,EAAK,CAAC,EAAG1E,GAAIhE,EAAI,EAAK,QAAUoF,EAAIpD,EAAI,EACtD,GAAY,EAAR0G,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAExC,MAAOwC,EAAG,GAAKA,EAAG,QAAK,EAAQW,MAAM,GArB9B+L,CAAK,CAACtR,EAAGY,OAwBzDoR,EAAmB1N,MAAQA,KAAK0N,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIvB,WAAcuB,EAAM,CAAE,QAAWA,IAExDlD,EAAQ2B,YAAa,EACrB3B,EAAQmD,mBAAgB,EACxB,IAAIC,EAAeH,EAAgB,EAAQ,QACvCI,EAAUJ,EAAgB,EAAQ,QAClCK,EAASL,EAAgB,EAAQ,QAgDrCjD,EAAQmD,cA/CY,SAAUxC,GAC1B,IAAI4C,EAAe5C,EAAG4C,aAAc9F,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAASC,EAAY9C,EAAG8C,UAAWC,EAAS/C,EAAG+C,OAAQC,EAAWhD,EAAGgD,SAAUC,EAAgBjD,EAAGiD,cACjKC,EAASN,EAAaM,OAAQ9X,EAAOwX,EAAaxX,KAyBtD,OAAQsX,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,kBACzDV,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,2BACjDN,GACIJ,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,0DACjDV,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAU,aAAcgJ,EAAQQ,QAASC,QA5BvF,SAAU9S,GAC3BA,EAAE+S,iBACET,GACAA,EAAUF,EAAc9F,KA0BZ4F,EAAiB,QAAES,cAAcR,EAAgB,QAAG,CAAEa,KAAM,aACvET,GAAUC,IACPN,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,uDACjDV,EAAiB,QAAES,cAAc,UAAW,KACxCT,EAAiB,QAAES,cAAc,UAAW,CAAE,aAAcN,EAAQY,aAAc,gBAAiB,OAAQC,KAAM,UAC7GhB,EAAiB,QAAES,cAAcR,EAAgB,QAAG,CAAEa,KAAM,gBAChEd,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,+BAAgCM,KAAM,QACvFX,GAAUL,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAU6J,KAAM,WAAYJ,QA9B/F,SAAU9S,GAAK,OAAO6Q,OAAU,OAAQ,OAAQ,GAAQ,WACtE,OAAOU,EAAYnN,MAAM,SAAUoL,GAK/B,OAJAxP,EAAE+S,iBACER,GACAA,EAAOH,EAAc9F,GAElB,CAAC,WAwByH+F,EAAQc,MACzHX,GAAYN,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAU6J,KAAM,WAAYJ,QAtB/F,SAAU9S,GAAK,OAAO6Q,OAAU,OAAQ,OAAQ,GAAQ,WACxE,OAAOU,EAAYnN,MAAM,SAAUoL,GAK/B,OAJAxP,EAAE+S,iBACEP,GACAA,EAASJ,EAAc9F,GAEpB,CAAC,WAgB6H+F,EAAQe,YACjJV,GAAUA,EAAOW,WACbnB,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,yBAA0BU,IAAKZ,EAAOW,UAAWH,KAAM,iBAChHhB,EAAiB,QAAES,cAAc,OAAQ,CAAEY,GAAId,GAC3CP,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,0BAA4BF,EAASA,EAAOM,KAAO,IACtGd,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,wBAA0BX,EAAsB,QAAErX,EAAM,oB,kCCzFvH,IACQ4Y,EADJC,EAAarP,MAAQA,KAAKqP,YACtBD,EAAgB,SAAU3X,EAAG0G,GAI7B,OAHAiR,EAAgBnT,OAAO0E,gBAClB,CAAEC,UAAW,cAAgBvF,OAAS,SAAU5D,EAAG0G,GAAK1G,EAAEmJ,UAAYzC,IACvE,SAAU1G,EAAG0G,GAAK,IAAK,IAAIV,KAAKU,EAAOlC,OAAOY,UAAUV,eAAeX,KAAK2C,EAAGV,KAAIhG,EAAEgG,GAAKU,EAAEV,MAC3EhG,EAAG0G,IAErB,SAAU1G,EAAG0G,GAChB,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIhH,UAAU,uBAAyBE,OAAO8G,GAAK,iCAE7D,SAASmR,IAAOtP,KAAK5D,YAAc3E,EADnC2X,EAAc3X,EAAG0G,GAEjB1G,EAAEoF,UAAkB,OAANsB,EAAalC,OAAO8B,OAAOI,IAAMmR,EAAGzS,UAAYsB,EAAEtB,UAAW,IAAIyS,KAGnF7C,EAAazM,MAAQA,KAAKyM,WAAc,SAAUC,EAASC,EAAYjO,EAAGkO,GAE1E,OAAO,IAAKlO,IAAMA,EAAIsD,WAAU,SAAU6K,EAASC,GAC/C,SAASC,EAAUjP,GAAS,IAAMkP,EAAKJ,EAAU5L,KAAKlD,IAAW,MAAOlC,GAAKkR,EAAOlR,IACpF,SAASqR,EAASnP,GAAS,IAAMkP,EAAKJ,EAAiB,MAAE9O,IAAW,MAAOlC,GAAKkR,EAAOlR,IACvF,SAASoR,EAAKE,GAJlB,IAAepP,EAIaoP,EAAOjM,KAAO4L,EAAQK,EAAOpP,QAJ1CA,EAIyDoP,EAAOpP,MAJhDA,aAAiBY,EAAIZ,EAAQ,IAAIY,GAAE,SAAUmO,GAAWA,EAAQ/O,OAITmE,KAAK8K,EAAWE,GAClGD,GAAMJ,EAAYA,EAAU/K,MAAM6K,EAASC,GAAc,KAAK3L,YAGlEmM,EAAenN,MAAQA,KAAKmN,aAAgB,SAAUT,EAASU,GAC/D,IAAsGpQ,EAAGpF,EAAGgC,EAAG2E,EAA3G/G,EAAI,CAAE6V,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP1T,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO2T,KAAM,GAAIC,IAAK,IAChG,OAAOjP,EAAI,CAAEyC,KAAMyM,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXtM,SAA0B5C,EAAE4C,OAAOI,UAAY,WAAa,OAAOvB,OAAUzB,EACvJ,SAASkP,EAAK/R,GAAK,OAAO,SAAUY,GAAK,OACzC,SAAcgE,GACV,GAAItD,EAAG,MAAM,IAAI7F,UAAU,mCAC3B,KAAOK,OACH,GAAIwF,EAAI,EAAGpF,IAAMgC,EAAY,EAAR0G,EAAG,GAAS1I,EAAU,OAAI0I,EAAG,GAAK1I,EAAS,SAAOgC,EAAIhC,EAAU,SAAMgC,EAAE4B,KAAK5D,GAAI,GAAKA,EAAEoJ,SAAWpH,EAAIA,EAAE4B,KAAK5D,EAAG0I,EAAG,KAAKW,KAAM,OAAOrH,EAE3J,OADIhC,EAAI,EAAGgC,IAAG0G,EAAK,CAAS,EAARA,EAAG,GAAQ1G,EAAEkE,QACzBwC,EAAG,IACP,KAAK,EAAG,KAAK,EAAG1G,EAAI0G,EAAI,MACxB,KAAK,EAAc,OAAX9I,EAAE6V,QAAgB,CAAEvP,MAAOwC,EAAG,GAAIW,MAAM,GAChD,KAAK,EAAGzJ,EAAE6V,QAASzV,EAAI0I,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAK9I,EAAEgW,IAAItT,MAAO1C,EAAE+V,KAAKrT,MAAO,SACxC,QACI,MAAkBN,GAAZA,EAAIpC,EAAE+V,MAAY1W,OAAS,GAAK+C,EAAEA,EAAE/C,OAAS,KAAkB,IAAVyJ,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE9I,EAAI,EAAG,SACjG,GAAc,IAAV8I,EAAG,MAAc1G,GAAM0G,EAAG,GAAK1G,EAAE,IAAM0G,EAAG,GAAK1G,EAAE,IAAM,CAAEpC,EAAE6V,MAAQ/M,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAY9I,EAAE6V,MAAQzT,EAAE,GAAI,CAAEpC,EAAE6V,MAAQzT,EAAE,GAAIA,EAAI0G,EAAI,MAC7D,GAAI1G,GAAKpC,EAAE6V,MAAQzT,EAAE,GAAI,CAAEpC,EAAE6V,MAAQzT,EAAE,GAAIpC,EAAEgW,IAAI3N,KAAKS,GAAK,MACvD1G,EAAE,IAAIpC,EAAEgW,IAAItT,MAChB1C,EAAE+V,KAAKrT,MAAO,SAEtBoG,EAAK8M,EAAK5R,KAAKkR,EAASlV,GAC1B,MAAOoE,GAAK0E,EAAK,CAAC,EAAG1E,GAAIhE,EAAI,EAAK,QAAUoF,EAAIpD,EAAI,EACtD,GAAY,EAAR0G,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAExC,MAAOwC,EAAG,GAAKA,EAAG,QAAK,EAAQW,MAAM,GArB9B+L,CAAK,CAACtR,EAAGY,OAwBzDoR,EAAmB1N,MAAQA,KAAK0N,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIvB,WAAcuB,EAAM,CAAE,QAAWA,IAExDlD,EAAQ2B,YAAa,EACrB3B,EAAQ8E,sBAAmB,EAC3B,IAAIzB,EAAUJ,EAAgB,EAAQ,QAClC8B,EAAa,EAAQ,OACrBC,EAAkB,EAAQ,OAC1BC,EAAahC,EAAgB,EAAQ,QACzC,SAAS6B,EAAiB/E,EAASkB,EAAOxD,GACtC,OAAOuE,EAAUzM,UAAM,OAAQ,GAAQ,WACnC,OAAOmN,EAAYnN,MAAM,SAAUoL,GAC/BlD,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEC,KAAM,YAEV,IACI1H,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEC,KAAM,UACNC,KAAMnE,EAAMoE,QACZxB,OAAQ5C,EAAM4C,UAGtB,MAAOyB,GAEHC,QAAQC,MAAMF,GACd7H,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEC,KAAM,gBAGd,MAAO,CAAC,SAKpB,SAASM,EAAmB1F,EAASkB,EAAOxD,GACxC,OAAOuE,EAAUzM,UAAM,OAAQ,GAAQ,WACnC,OAAOmN,EAAYnN,MAAM,SAAUoL,GAC/BlD,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEC,KAAM,cAEV,IACI1H,EAAMnD,SAASyK,EAAWzD,YAAYvB,EAAQmF,QAASjE,EAAMiE,UAEjE,MAAOI,GACH7H,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEC,KAAM,kBAGd,MAAO,CAAC,SAfpBnF,EAAQ8E,iBAAmBA,EAmB3B,IAAIY,EAAuC,SAAUC,GAEjD,SAASD,IACL,OAAkB,OAAXC,GAAmBA,EAAOvO,MAAM7B,KAAMpJ,YAAcoJ,KAuL/D,OAzLAqP,EAAUc,EAAuBC,GAIjCD,EAAsBtT,UAAUwT,cAAgB,WAC5C,IAAIC,EAAQtQ,KACRoL,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAASkB,EAAQN,EAAGM,MAAOxD,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAyB5F,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAActC,EAAOxD,MAAOA,EAAO+F,QAASA,IAC9GH,EAAiB,QAAES,cAAc,OAAQ,CAAEkC,SArBlC,SAAU7U,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WAChE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAC/B,OAAQA,EAAGiC,OACP,KAAK,EAED,OADAzR,EAAE+S,iBACK,CAAC,EAAaY,EAAiB/E,EAASkB,EAAOxD,IAC1D,KAAK,EAED,OADAkD,EAAGkC,OACI,CAAC,YAchBQ,EAAiB,QAAES,cAAcmB,EAAoB,QAAG,CAAElB,UAAW,uBAAwB1Q,MAAO4N,EAAMoE,QAASY,SA3BxG,SAAU5S,GACzBoK,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEG,QAAShS,QA0BTgQ,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,0BACjDV,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAU0L,SAAmC,IAAzBjF,EAAMoE,QAAQjZ,OAAc2X,UAAW,wDAA0DP,EAAQ2C,MAChL9C,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,wBAAyBE,QAb9F,SAAU9S,GACrBA,EAAE+S,iBACFzG,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEC,KAAM,UACNE,QAASpE,EAAMmE,UAS2G5B,EAAQ4C,YAE9IV,EAAsBtT,UAAUiU,aAAe,WAC3C,IAAI1F,EAAKpL,KAAKuQ,MAAO7E,EAAQN,EAAGM,MAAOxD,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QACtE,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAActC,EAAOxD,MAAOA,EAAO+F,QAASA,IAC9GH,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,uBAAyB9C,EAAMmE,MAClF/B,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,2BAA6BP,EAAQ8C,UAElGZ,EAAsBtT,UAAUmU,gBAAkB,WAC9C,IAAIV,EAAQtQ,KACRoL,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAASkB,EAAQN,EAAGM,MAAOxD,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAa5F,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAActC,EAAOxD,MAAOA,EAAO+F,QAASA,IAC9GH,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,uBAAyB9C,EAAMmE,MAClF/B,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,wBACjDP,EAAQgD,WACRnD,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,wBAAyBE,QAjBtF,SAAU9S,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WACtE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAC/B,OAAQA,EAAGiC,OACP,KAAK,EAED,OADAzR,EAAE+S,iBACK,CAAC,EAAaY,EAAiB/E,EAASkB,EAAOxD,IAC1D,KAAK,EAED,OADAkD,EAAGkC,OACI,CAAC,YAS0GW,EAAQiD,UAE9If,EAAsBtT,UAAUsU,oBAAsB,WAClD,IAAIb,EAAQtQ,KACRoL,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAASkB,EAAQN,EAAGM,MAAOxD,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAmB5F,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAActC,EAAOxD,MAAOA,EAAO+F,QAASA,IAC9GH,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,uBAAyB9C,EAAMmE,MAClF/B,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,iCACjDP,EAAQmD,uBACRtD,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,mDAAoDE,QAvBhH,SAAU9S,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WACvE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAC/B,OAAQA,EAAGiC,OACP,KAAK,EAED,OADAzR,EAAE+S,iBACK,CAAC,EAAauB,EAAmB1F,EAASkB,EAAOxD,IAC5D,KAAK,EAED,OADAkD,EAAGkC,OACI,CAAC,YAesIW,EAAQe,QAC9JlB,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,wBAAyBE,QAZrF,SAAU9S,GAC1BA,EAAE+S,iBACFzG,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEC,KAAM,eASqH3B,EAAQ4C,WAE/IV,EAAsBtT,UAAUwU,eAAiB,WAC7C,IAAIjG,EAAKpL,KAAKuQ,MAAO7E,EAAQN,EAAGM,MAAOxD,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QACtE,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAActC,EAAOxD,MAAOA,EAAO+F,QAASA,IAC9GH,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,uBAAyB9C,EAAMmE,MAClF/B,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,2BAA6BP,EAAQqD,YAElGnB,EAAsBtT,UAAU0U,kBAAoB,WAChD,IAAIjB,EAAQtQ,KACRoL,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAASkB,EAAQN,EAAGM,MAAOxD,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAsB5F,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAActC,EAAOxD,MAAOA,EAAO+F,QAASA,IAC9GH,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,uBAAyB9C,EAAMmE,MAClF/B,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,wBACjDP,EAAQuD,aACR1D,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,wBAAyBE,QAdrF,SAAU9S,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WACvE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAK/B,OAJAxP,EAAE+S,iBACFzG,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEC,KAAM,aAEH,CAAC,WAQmH3B,EAAQ4C,QACnI/C,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,wBAAyBE,QA3BtF,SAAU9S,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WACtE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAC/B,OAAQA,EAAGiC,OACP,KAAK,EAED,OADAzR,EAAE+S,iBACK,CAAC,EAAauB,EAAmB1F,EAASkB,EAAOxD,IAC5D,KAAK,EAED,OADAkD,EAAGkC,OACI,CAAC,YAmB0GW,EAAQiD,UAE9If,EAAsBtT,UAAU4U,cAAgB,WAC5C,IAEItD,EACAC,EAHAhD,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAASkB,EAAQN,EAAGM,MAAOxD,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAiB5F,OAbqB,OAAjBvC,EAAM4C,QAAmBtO,KAAKuQ,MAAMmB,MAAQ1R,KAAKuQ,MAAMmB,KAAKvC,KAAOzD,EAAM4C,OAAOa,MAChFhB,EAAS,WACLjG,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEC,KAAM,UACNE,QAASpE,EAAMmE,SAGvBzB,EAAW,WACPlG,EAAMnD,SAASyK,EAAW5D,YAAYpB,EAAQmF,QAASjE,EAAMiE,QAAS,CAClEC,KAAM,sBAIV9B,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAActC,EAAOxD,MAAOA,EAAO+F,QAASA,EAASE,OAAQA,EAAQC,SAAUA,IACjJN,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,uBAAyB9C,EAAMmE,QAE1FM,EAAsBtT,UAAU8U,OAAS,WACrC,IAAIC,EACJ,OAAQ5R,KAAKuQ,MAAM7E,MAAMkE,MACrB,IAAK,UACDgC,EAAQ5R,KAAKqQ,gBACb,MACJ,IAAK,SACDuB,EAAQ5R,KAAK8Q,eACb,MACJ,IAAK,aACDc,EAAQ5R,KAAKgR,kBACb,MACJ,IAAK,iBACDY,EAAQ5R,KAAKmR,sBACb,MACJ,IAAK,WACDS,EAAQ5R,KAAKqR,iBACb,MACJ,IAAK,eACDO,EAAQ5R,KAAKuR,oBACb,MACJ,QACIK,EAAQ5R,KAAKyR,gBAGrB,OAAQ3D,EAAiB,QAAES,cAAc,KAAM,CAAE3I,IAAK5F,KAAKuQ,MAAM7E,MAAMiE,QAASnB,UAAW,qCAAuCxO,KAAKuQ,MAAM7E,MAAMkE,KAAM,gBAAiB5P,KAAKuQ,MAAM7E,MAAMiE,SAAWiC,IAEnMzB,EA1L+B,CA2LxCrC,EAAiB,QAAE+D,WACrBpH,EAAA,QAAqB0F,G,mCCnSrB,IACQf,EADJC,EAAarP,MAAQA,KAAKqP,YACtBD,EAAgB,SAAU3X,EAAG0G,GAI7B,OAHAiR,EAAgBnT,OAAO0E,gBAClB,CAAEC,UAAW,cAAgBvF,OAAS,SAAU5D,EAAG0G,GAAK1G,EAAEmJ,UAAYzC,IACvE,SAAU1G,EAAG0G,GAAK,IAAK,IAAIV,KAAKU,EAAOlC,OAAOY,UAAUV,eAAeX,KAAK2C,EAAGV,KAAIhG,EAAEgG,GAAKU,EAAEV,MAC3EhG,EAAG0G,IAErB,SAAU1G,EAAG0G,GAChB,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIhH,UAAU,uBAAyBE,OAAO8G,GAAK,iCAE7D,SAASmR,IAAOtP,KAAK5D,YAAc3E,EADnC2X,EAAc3X,EAAG0G,GAEjB1G,EAAEoF,UAAkB,OAANsB,EAAalC,OAAO8B,OAAOI,IAAMmR,EAAGzS,UAAYsB,EAAEtB,UAAW,IAAIyS,KAGnF7C,EAAazM,MAAQA,KAAKyM,WAAc,SAAUC,EAASC,EAAYjO,EAAGkO,GAE1E,OAAO,IAAKlO,IAAMA,EAAIsD,WAAU,SAAU6K,EAASC,GAC/C,SAASC,EAAUjP,GAAS,IAAMkP,EAAKJ,EAAU5L,KAAKlD,IAAW,MAAOlC,GAAKkR,EAAOlR,IACpF,SAASqR,EAASnP,GAAS,IAAMkP,EAAKJ,EAAiB,MAAE9O,IAAW,MAAOlC,GAAKkR,EAAOlR,IACvF,SAASoR,EAAKE,GAJlB,IAAepP,EAIaoP,EAAOjM,KAAO4L,EAAQK,EAAOpP,QAJ1CA,EAIyDoP,EAAOpP,MAJhDA,aAAiBY,EAAIZ,EAAQ,IAAIY,GAAE,SAAUmO,GAAWA,EAAQ/O,OAITmE,KAAK8K,EAAWE,GAClGD,GAAMJ,EAAYA,EAAU/K,MAAM6K,EAASC,GAAc,KAAK3L,YAGlEmM,EAAenN,MAAQA,KAAKmN,aAAgB,SAAUT,EAASU,GAC/D,IAAsGpQ,EAAGpF,EAAGgC,EAAG2E,EAA3G/G,EAAI,CAAE6V,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP1T,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO2T,KAAM,GAAIC,IAAK,IAChG,OAAOjP,EAAI,CAAEyC,KAAMyM,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXtM,SAA0B5C,EAAE4C,OAAOI,UAAY,WAAa,OAAOvB,OAAUzB,EACvJ,SAASkP,EAAK/R,GAAK,OAAO,SAAUY,GAAK,OACzC,SAAcgE,GACV,GAAItD,EAAG,MAAM,IAAI7F,UAAU,mCAC3B,KAAOK,OACH,GAAIwF,EAAI,EAAGpF,IAAMgC,EAAY,EAAR0G,EAAG,GAAS1I,EAAU,OAAI0I,EAAG,GAAK1I,EAAS,SAAOgC,EAAIhC,EAAU,SAAMgC,EAAE4B,KAAK5D,GAAI,GAAKA,EAAEoJ,SAAWpH,EAAIA,EAAE4B,KAAK5D,EAAG0I,EAAG,KAAKW,KAAM,OAAOrH,EAE3J,OADIhC,EAAI,EAAGgC,IAAG0G,EAAK,CAAS,EAARA,EAAG,GAAQ1G,EAAEkE,QACzBwC,EAAG,IACP,KAAK,EAAG,KAAK,EAAG1G,EAAI0G,EAAI,MACxB,KAAK,EAAc,OAAX9I,EAAE6V,QAAgB,CAAEvP,MAAOwC,EAAG,GAAIW,MAAM,GAChD,KAAK,EAAGzJ,EAAE6V,QAASzV,EAAI0I,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAK9I,EAAEgW,IAAItT,MAAO1C,EAAE+V,KAAKrT,MAAO,SACxC,QACI,MAAkBN,GAAZA,EAAIpC,EAAE+V,MAAY1W,OAAS,GAAK+C,EAAEA,EAAE/C,OAAS,KAAkB,IAAVyJ,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE9I,EAAI,EAAG,SACjG,GAAc,IAAV8I,EAAG,MAAc1G,GAAM0G,EAAG,GAAK1G,EAAE,IAAM0G,EAAG,GAAK1G,EAAE,IAAM,CAAEpC,EAAE6V,MAAQ/M,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAY9I,EAAE6V,MAAQzT,EAAE,GAAI,CAAEpC,EAAE6V,MAAQzT,EAAE,GAAIA,EAAI0G,EAAI,MAC7D,GAAI1G,GAAKpC,EAAE6V,MAAQzT,EAAE,GAAI,CAAEpC,EAAE6V,MAAQzT,EAAE,GAAIpC,EAAEgW,IAAI3N,KAAKS,GAAK,MACvD1G,EAAE,IAAIpC,EAAEgW,IAAItT,MAChB1C,EAAE+V,KAAKrT,MAAO,SAEtBoG,EAAK8M,EAAK5R,KAAKkR,EAASlV,GAC1B,MAAOoE,GAAK0E,EAAK,CAAC,EAAG1E,GAAIhE,EAAI,EAAK,QAAUoF,EAAIpD,EAAI,EACtD,GAAY,EAAR0G,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAExC,MAAOwC,EAAG,GAAKA,EAAG,QAAK,EAAQW,MAAM,GArB9B+L,CAAK,CAACtR,EAAGY,OAwBzDwV,EAAY9R,MAAQA,KAAK8R,UAAa,SAAS7Z,GAC/C,IAAIF,EAAsB,mBAAXoJ,QAAyBA,OAAOI,SAAU5J,EAAII,GAAKE,EAAEF,GAAIwE,EAAI,EAC5E,GAAI5E,EAAG,OAAOA,EAAE6D,KAAKvD,GACrB,GAAIA,GAAyB,iBAAbA,EAAEpB,OAAqB,MAAO,CAC1CmK,KAAM,WAEF,OADI/I,GAAKsE,GAAKtE,EAAEpB,SAAQoB,OAAI,GACrB,CAAE6F,MAAO7F,GAAKA,EAAEsE,KAAM0E,MAAOhJ,KAG5C,MAAM,IAAId,UAAUY,EAAI,0BAA4B,oCAEpD2V,EAAmB1N,MAAQA,KAAK0N,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIvB,WAAcuB,EAAM,CAAE,QAAWA,IAExDlD,EAAQ2B,YAAa,EACrB,IAAI0B,EAAUJ,EAAgB,EAAQ,QAClCqE,EAAcrE,EAAgB,EAAQ,OACtCsE,EAAqBtE,EAAgB,EAAQ,QAC7C8B,EAAa,EAAQ,OACrByC,EAAa,EAAQ,OACrBC,EAAc,EAAQ,MACtBC,EAAiBzE,EAAgB,EAAQ,OACzC+B,EAAkB,EAAQ,OAC1BC,EAAahC,EAAgB,EAAQ,QACzC,SAAS0E,EAAY5H,EAAStC,GAC1B,OAAOuE,EAAUzM,UAAM,OAAQ,GAAQ,WACnC,OAAOmN,EAAYnN,MAAM,SAAUoL,GAC/BlD,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDC,KAAM,YAEV,IACI1H,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDC,KAAM,UACNC,KAAMrF,EAAQsF,QACduC,SAAU7H,EAAQ6H,SAClB/D,OAAQ9D,EAAQ8D,OAChB9X,KAAMgU,EAAQhU,QAGtB,MAAOuZ,GAEHC,QAAQC,MAAMF,GACd7H,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDC,KAAM,gBAGd,MAAO,CAAC,SAIpB,SAAS0C,EAAgB9H,EAAStC,GAC9B,OAAOuE,EAAUzM,UAAM,OAAQ,GAAQ,WACnC,OAAOmN,EAAYnN,MAAM,SAAUoL,GAC/BlD,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDC,KAAM,cAEV,IACI1H,EAAMnD,SAASkN,EAAWlH,cAAcP,EAAQmF,UAEpD,MAAOI,GAEHC,QAAQC,MAAMF,GACd7H,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDC,KAAM,kBAGd,MAAO,CAAC,SAIpB,SAAS2C,EAAiB/H,EAAStC,GAC/BA,EAAMnD,SAASkN,EAAWhH,eAAeT,EAAQmF,UAErD,IAAI6C,EAAkC,SAAUpC,GAE5C,SAASoC,IACL,OAAkB,OAAXpC,GAAmBA,EAAOvO,MAAM7B,KAAMpJ,YAAcoJ,KAsV/D,OAxVAqP,EAAUmD,EAAkBpC,GAI5BoC,EAAiB3V,UAAU4V,cAAgB,SAAUrH,GACjD,IAAIsH,EAAKrH,EACLiF,EAAQtQ,KACsB2S,QAAlB,IAAPvH,EAAgB,GAAKA,GAAYwH,aAAcA,OAAsB,IAAPD,GAAwBA,EAC3FE,EAAK7S,KAAKuQ,MAAO/F,EAAUqI,EAAGrI,QAASsI,EAAYD,EAAGC,UAAW5K,EAAQ2K,EAAG3K,MAAOwJ,EAAOmB,EAAGnB,KAAMzD,EAAU4E,EAAG5E,QACpH,IAAKzD,EAAQ6H,SAET,OAAOvE,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,MAEzE,IA2BIuC,EAAU,GACVC,GAAmB,EACvB,IACI,IAAK,IAAIC,EAAKnB,EAAStH,EAAQuI,QAAQjS,UAAWoS,EAAKD,EAAGjS,QAASkS,EAAGjS,KAAMiS,EAAKD,EAAGjS,OAAQ,CACxF,IAAI0K,EAAQwH,EAAGpV,MACI,WAAf4N,EAAMkE,MAAoC,YAAflE,EAAMkE,OACjCoD,GAAmB,GAElBtH,EAAMyH,SACPJ,EAAQlT,KAAKiO,EAAiB,QAAES,cAAc4D,EAAwB,QAAG,CAAEvM,IAAK8F,EAAMiE,QAASzH,MAAOA,EAAOwJ,KAAMA,EAAMlH,QAASA,EAASkB,MAAOA,EAAOuC,QAASA,MAI9K,MAAOmF,GAASV,EAAM,CAAEzC,MAAOmD,GAC/B,QACI,IACQF,IAAOA,EAAGjS,OAASoK,EAAK4H,EAAW,SAAI5H,EAAG7P,KAAKyX,GAEvD,QAAU,GAAIP,EAAK,MAAMA,EAAIzC,OAGjC,IAAIoD,EAAiBT,GAAgBI,EACjCM,EAAYxF,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,MAQ9E,OAPK6C,IAAmBP,IAAatI,EAAQ+I,WACzCD,EAAaxF,EAAiB,QAAES,cAAc,OAAQ,CAAEkC,SA9C5C,SAAU7U,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WACnE,IAAIzE,EAASH,EACb,OAAOyB,EAAYnN,MAAM,SAAUoL,GAW/B,OAVAxP,EAAE+S,iBACF9C,EAAUqG,EAAYsB,iBACtB9H,EAAQ8D,EAAWiE,gBAAgB5H,EAAS6F,EAAMza,KAAKyc,MAAO,CAC1D7D,KAAMrF,EAAQ+I,SACd3D,KAAM,YAEV1H,EAAMnD,SAASkN,EAAWxG,SAASjB,EAAQmF,QAASjE,IACpDxD,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrD4D,SAAU,MAEP,CAAC,WAkCRzF,EAAiB,QAAES,cAAcmB,EAAoB,QAAG,CAAElB,UAAW,uBAAwBmF,YAAa,sBAAuB7V,MAAO0M,EAAQ+I,SAAU7C,SApD3I,SAAU5S,GAC7BoK,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrD4D,SAAUzV,QAmDVgQ,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,0BACjDV,EAAiB,QAAES,cAAc,SAAU,CAAEoC,SAAsC,IAA5BnG,EAAQ+I,SAAS1c,OAAcoO,KAAM,SAAUuJ,UAAW,4CAA8CP,EAAQ2F,OACvK9F,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUyJ,QAlChD,SAAU9S,GAC/BA,EAAE+S,iBACFzG,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrD4D,SAAU,OA+BoF/E,UAAW,mBAAqBP,EAAQ4C,WAEtI/C,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAc,KAAM,CAAEC,UAAW,oBAAsBuE,GAC1EO,IAERd,EAAiB3V,UAAUgX,eAAiB,WACxC,IAAIvD,EAAQtQ,KACRoL,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAAStC,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAAS6E,EAAY1H,EAAG0H,UAsB9FzE,EAAgB,uBAAyB7D,EAAQmF,QACrD,OAAQ7B,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAES,cAAeA,EAAeL,aAAcxD,EAAStC,MAAOA,EAAO+F,QAASA,IAC9IH,EAAiB,QAAES,cAAc,OAAQ,CAAEkC,SAnBlC,SAAU7U,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WAChE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAC/B,OAAQA,EAAGiC,OACP,KAAK,EAED,OADAzR,EAAE+S,iBACK,CAAC,EAAayD,EAAY5H,EAAStC,IAC9C,KAAK,EAED,OADAkD,EAAGkC,OACI,CAAC,YAYhBQ,EAAiB,QAAES,cAAcmB,EAAoB,QAAG,CAAEoE,YAAahB,EAAWtE,UAAW,iBAAkB1Q,MAAO0M,EAAQsF,QAASY,SAzB5H,SAAU5S,GACzBoK,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDG,QAAShS,MAuBsJ6V,YAAa,yBAA0BI,qBAAsB,CACpN,mBAAoB1F,KAE5BP,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,oBACjDV,EAAiB,QAAES,cAAc,SAAU,CAAEoC,SAAqC,IAA3BnG,EAAQsF,QAAQjZ,OAAcoO,KAAM,SAAUuJ,UAAW,4CAA8CP,EAAQ+F,SACtKlG,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUyJ,QAb1D,SAAU9S,GACrBA,EAAE+S,iBACFzG,EAAMnD,SAASkN,EAAWlH,cAAcP,EAAQmF,WAWwCnB,UAAW,mBAAqBP,EAAQ4C,YAExI2B,EAAiB3V,UAAUwT,cAAgB,WACvC,IAAIC,EAAQtQ,KACRoL,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAAStC,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAAS6E,EAAY1H,EAAG0H,UAyB9FzE,EAAgB,uBAAyB7D,EAAQmF,QACrD,OAAQ7B,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAES,cAAeA,EAAeL,aAAcxD,EAAStC,MAAOA,EAAO+F,QAASA,IAC9IH,EAAiB,QAAES,cAAc,OAAQ,CAAEkC,SAtBlC,SAAU7U,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WAChE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAC/B,OAAQA,EAAGiC,OACP,KAAK,EAED,OADAzR,EAAE+S,iBACK,CAAC,EAAayD,EAAY5H,EAAStC,IAC9C,KAAK,EAED,OADAkD,EAAGkC,OACI,CAAC,YAehBQ,EAAiB,QAAES,cAAcmB,EAAoB,QAAG,CAAEoE,YAAahB,EAAWtE,UAAW,iBAAkB1Q,MAAO0M,EAAQsF,QAASiE,qBAAsB,CACrJ,mBAAoB1F,GACrBqC,SA9BI,SAAU5S,GACzBoK,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDG,QAAShS,QA6BTgQ,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,oBACjDV,EAAiB,QAAES,cAAc,SAAU,CAAEoC,SAAqC,IAA3BnG,EAAQsF,QAAQjZ,OAAcoO,KAAM,SAAUuJ,UAAW,4CAA8CP,EAAQ2C,MACtK9C,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUyJ,QAhB1D,SAAU9S,GACrBA,EAAE+S,iBACFzG,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDC,KAAM,UACNE,QAAStF,EAAQqF,SAYmErB,UAAW,mBAAqBP,EAAQ4C,UAChI7Q,KAAKyS,cAAc,CAAEG,cAAc,MAE3CJ,EAAiB3V,UAAUiU,aAAe,WACtC,IAAI1F,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAAStC,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAC1E,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAAcxD,EAAStC,MAAOA,EAAO+F,QAASA,IAChHH,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,iBAAmBhE,EAAQqF,MAC9E/B,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,qBAAuBP,EAAQ8C,QACpF/Q,KAAKyS,cAAc,CAAEG,cAAc,MAE3CJ,EAAiB3V,UAAUmU,gBAAkB,WACzC,IAAIV,EAAQtQ,KACRoL,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAAStC,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAa1E,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAAcxD,EAAStC,MAAOA,EAAO+F,QAASA,IAChHH,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,iBAAmBhE,EAAQqF,MAC9E7P,KAAKyS,cAAc,CAAEG,cAAc,IACnC9E,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,kBACjDP,EAAQgD,WACRnD,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,kBAAmBE,QAlBhF,SAAU9S,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WACtE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAC/B,OAAQA,EAAGiC,OACP,KAAK,EAED,OADAzR,EAAE+S,iBACK,CAAC,EAAayD,EAAY5H,EAAStC,IAC9C,KAAK,EAED,OADAkD,EAAGkC,OACI,CAAC,YAUoGW,EAAQiD,UAExIsB,EAAiB3V,UAAUsU,oBAAsB,WAC7C,IAAIb,EAAQtQ,KACRoL,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAAStC,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAmB1E,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAAcxD,EAAStC,MAAOA,EAAO+F,QAASA,IAChHH,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,iBAAmBhE,EAAQqF,MAC9E/B,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,2BACjDP,EAAQmD,uBACRtD,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,uCAAwCE,QAvBpG,SAAU9S,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WACvE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAC/B,OAAQA,EAAGiC,OACP,KAAK,EAED,OADAzR,EAAE+S,iBACK,CAAC,EAAa2D,EAAgB9H,EAAStC,IAClD,KAAK,EAED,OADAkD,EAAGkC,OACI,CAAC,YAe0HW,EAAQe,QAClJlB,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,kBAAmBE,QAZ/E,SAAU9S,GAC1BA,EAAE+S,iBACFzG,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDC,KAAM,eAS+G3B,EAAQ4C,SACjI7Q,KAAKyS,cAAc,CAAEG,cAAc,MAE3CJ,EAAiB3V,UAAUwU,eAAiB,WACxC,IAAIjG,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAAStC,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAC1E,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAAcxD,EAAStC,MAAOA,EAAO+F,QAASA,IAChHH,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,iBAAmBhE,EAAQqF,MAC9E/B,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,qBAAuBP,EAAQqD,UACpFtR,KAAKyS,cAAc,CAAEG,cAAc,MAE3CJ,EAAiB3V,UAAU0U,kBAAoB,WAC3C,IAAIjB,EAAQtQ,KACRoL,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAAStC,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAsB1E,OAAQH,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAAcxD,EAAStC,MAAOA,EAAO+F,QAASA,IAChHH,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,iBAAmBhE,EAAQqF,MAC9E7P,KAAKyS,cAAc,CAAEG,cAAc,IACnC9E,EAAiB,QAAES,cAAc,MAAO,CAAEC,UAAW,kBACjDP,EAAQuD,aACR1D,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,kBAAmBE,QAf/E,SAAU9S,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WACvE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAK/B,OAJAxP,EAAE+S,iBACFzG,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDC,KAAM,aAEH,CAAC,WAS6G3B,EAAQ4C,QAC7H/C,EAAiB,QAAES,cAAc,SAAU,CAAEtJ,KAAM,SAAUuJ,UAAW,kBAAmBE,QA5BhF,SAAU9S,GAAK,OAAO6Q,EAAU6D,OAAO,OAAQ,GAAQ,WACtE,OAAOnD,EAAYnN,MAAM,SAAUoL,GAC/B,OAAQA,EAAGiC,OACP,KAAK,EAED,OADAzR,EAAE+S,iBACK,CAAC,EAAa2D,EAAgB9H,EAAStC,IAClD,KAAK,EAED,OADAkD,EAAGkC,OACI,CAAC,YAoBoGW,EAAQiD,UAExIsB,EAAiB3V,UAAU4U,cAAgB,WACvC,IAEItD,EACAC,EAHAhD,EAAKpL,KAAKuQ,MAAO/F,EAAUY,EAAGZ,QAAStC,EAAQkD,EAAGlD,MAAO+F,EAAU7C,EAAG6C,QAiB1E,OAbuB,OAAnBzD,EAAQ8D,QAAmBtO,KAAKuQ,MAAMmB,MAAQ1R,KAAKuQ,MAAMmB,KAAKvC,KAAO3E,EAAQ8D,OAAOa,MACpFhB,EAAS,WACLjG,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDC,KAAM,UACNE,QAAStF,EAAQqF,SAGzBzB,EAAW,WACPlG,EAAMnD,SAASkN,EAAWtH,cAAcH,EAAQmF,QAAS,CACrDC,KAAM,sBAIV9B,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAckB,EAAgB7B,cAAe,CAAEI,aAAcxD,EAAStC,MAAOA,EAAO+F,QAASA,EAASC,UAAWqE,EAAkBpE,OAAQA,EAAQC,SAAUA,IAChLN,EAAiB,QAAES,cAAc,IAAK,CAAEC,UAAW,iBAAmBhE,EAAQqF,MAC9E7P,KAAKyS,kBAEbD,EAAiB3V,UAAU8U,OAAS,WAChC,IACIC,EADAtB,EAAQtQ,KAEZ,OAAQA,KAAKuQ,MAAM/F,QAAQoF,MACvB,IAAK,WACDgC,EAAQ5R,KAAK6T,iBACb,MACJ,IAAK,UACDjC,EAAQ5R,KAAKqQ,gBACb,MACJ,IAAK,SACDuB,EAAQ5R,KAAK8Q,eACb,MACJ,IAAK,aACDc,EAAQ5R,KAAKgR,kBACb,MACJ,IAAK,iBACDY,EAAQ5R,KAAKmR,sBACb,MACJ,IAAK,WACDS,EAAQ5R,KAAKqR,iBACb,MACJ,IAAK,eACDO,EAAQ5R,KAAKuR,oBACb,MACJ,QACIK,EAAQ5R,KAAKyR,gBAGrB,IAMIwC,EAAMjU,KAAKuQ,MAAM2D,OAAOC,mBAAmBnU,KAAKuQ,MAAM/F,QAAQmF,SAC9DyE,EAAQpU,KAAKuQ,MAAMuC,UAAY,GAAK,EACxC,OAAQhF,EAAiB,QAAES,cAAcyD,EAA4B,QAAG,CAAEqC,iBAAkB,CACpFC,eAAe,EACfC,yBAAyB,EACzBC,aAAc,WACVlE,EAAMC,MAAMrI,MAAMnD,SAASkN,EAAW9G,kBAAkB,KAAM,CAAEG,qBAAqB,EAAMC,YAAY,MAE3GkJ,aAAc,8BACfC,OAAQ1U,KAAKuQ,MAAMuC,WAAa9S,KAAKuQ,MAAMhF,YAC9CuC,EAAiB,QAAES,cAAc,KAAM,CAAEoG,UAAW,EAAG,oBAAqB3U,KAAKuQ,MAAMuC,YAAc,CAAC,WAAY,WAAW8B,SAAS5U,KAAKuQ,MAAM/F,QAAQoF,MAAOhK,IAAK5F,KAAKuQ,MAAM/F,QAAQmF,QAASnB,UAAW,yBAA2BxO,KAAKuQ,MAAM/F,QAAQoF,KAAO,KAAO5P,KAAKuQ,MAAMuC,UAAY,mBAAqB,IAAK+B,MAAO,CACxTC,SAAU,WACVb,IAAKA,EAAM,KACXG,MAAOA,EAAQ,KACfW,QAAS/U,KAAKuQ,MAAMyE,UAAY,QAAU,QAC3C,kBAAmBhV,KAAKuQ,MAAM/F,QAAQmF,QAASjB,QArB5C,WACV4B,EAAMC,MAAMrI,MAAMnD,SAASkN,EAAW9G,kBAAkBmF,EAAMC,MAAM/F,QAAQmF,QAAS,CAAErE,qBAAqB,EAAOC,YAAY,MAoBvD0J,cAlBxD,WAChB3E,EAAMC,MAAMrI,MAAMnD,SAASkN,EAAW9G,kBAAkBmF,EAAMC,MAAM/F,QAAQmF,QAAS,CAAErE,qBAAqB,EAAMC,YAAY,OAiBtBqG,KAEhHY,EAAiB3V,UAAUqY,kBAAoB,WAC3C,IAAIC,EAAUpD,EAAqB,QAAEqD,YAAYpV,MAC7CmV,aAAmBE,cACnBrV,KAAKuQ,MAAM2D,OAAOoB,kBAAkBtV,KAAKuQ,MAAM/F,QAAQmF,QAASwF,GAC5DnV,KAAKuQ,MAAMyE,WACXhV,KAAKuQ,MAAM2D,OAAOqB,iBAAiBvV,KAAKuQ,MAAM/F,QAAQmF,QAASwF,EAAQK,gBAInFhD,EAAiB3V,UAAU4Y,qBAAuB,WAC9CzV,KAAKuQ,MAAM2D,OAAOoB,kBAAkBtV,KAAKuQ,MAAM/F,QAAQmF,QAAS,OAEpE6C,EAAiB3V,UAAU6Y,mBAAqB,WAC5C,IAAIP,EAAUpD,EAAqB,QAAEqD,YAAYpV,MAE7CA,KAAKuQ,MAAMyE,WAAaG,aAAmBE,aAC3CrV,KAAKuQ,MAAM2D,OAAOqB,iBAAiBvV,KAAKuQ,MAAM/F,QAAQmF,QAASwF,EAAQK,eAGxEhD,EAzV0B,CA0VnC1E,EAAiB,QAAE+D,WACrBpH,EAAA,QAAqB+H,G,mCCxdrB,IAAI9E,EAAmB1N,MAAQA,KAAK0N,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIvB,WAAcuB,EAAM,CAAE,QAAWA,IAExDlD,EAAQ2B,YAAa,EACrB3B,EAAQkL,wBAA0BlL,EAAQmL,qBAAuBnL,EAAQoL,6BAA+BpL,EAAQqL,+BAA4B,EAC5I,IAAIhI,EAAUJ,EAAgB,EAAQ,QACtC,SAASqI,EAAoB3K,GACzB,IAAI4K,EAAS5K,EAAG4K,OAAQlY,EAAQsN,EAAGtN,MAAOmY,EAAY7K,EAAG6K,UACzD,OAAQnI,EAAiB,QAAES,cAAc,QAAS,CAAEtJ,KAAM,SAAU2J,KAAMoH,EAAS,IAAMC,EAAWnY,MAAiB,OAAVA,EAAiB,GAAKA,EAAOqR,GAAI,MAAQ6G,EAAS,IAAMC,IAEvK,SAASH,EAA0B1K,GAC/B,IAAIM,EAAQN,EAAGM,MAAOwK,EAAa9K,EAAG8K,WAClCC,EADuD/K,EAAG4K,OACpC,IAAME,EAChC,OAAQpI,EAAiB,QAAES,cAAc,WAAY,KACjDT,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,SAAUnY,MAAO4N,EAAMyH,QAAU,EAAI,GAAI6C,OAAQG,IACpHrI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,KAAMnY,MAAO4N,EAAM2G,SAAU2D,OAAQG,IACxGrI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,OAAQnY,MAAO4N,EAAMmE,KAAMmG,OAAQG,KAG9G,SAASN,EAA6BzK,GAClC,IAAI2H,EAAU3H,EAAG2H,QAASiD,EAAS5K,EAAG4K,OAAQI,EAAmBhL,EAAGgL,iBAChED,EAAaH,EAAS,WACtBK,EAAetD,EAAQjX,KAAI,SAAU4P,EAAOwK,GAAc,OAAQpI,EAAiB,QAAES,cAAcuH,EAA2B,CAAElQ,IAAK8F,EAAMiE,QAASuG,WAAYA,EAAYxK,MAAOA,EAAOsK,OAAQG,OACtM,OAAQrI,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,cAAenY,MAAOiV,EAAQlc,OAAQmf,OAAQG,IACjHrI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,gBAAiBnY,MAAOsY,EAAkBJ,OAAQG,IACrHrI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,gBAAiBnY,MAAO,IAAKkY,OAAQG,IACxGrI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,gBAAiBnY,MAAO,GAAIkY,OAAQG,IACvGE,GAGR,SAAST,EAAqBxK,GAC1B,IAAIZ,EAAUY,EAAGZ,QAAS0L,EAAa9K,EAAG8K,WACtCC,EAD2D/K,EAAG4K,OACxC,IAAME,EAChC,OAAQpI,EAAiB,QAAES,cAAc,WAAY,KACjDT,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,SAAUnY,MAAO0M,EAAQ2I,QAAU,EAAI,GAAI6C,OAAQG,IACtHrI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,WAAYnY,MAAO0M,EAAQ8L,SAAW,EAAI,GAAIN,OAAQG,IACzHrI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,KAAMnY,MAAO0M,EAAQ6H,SAAU2D,OAAQG,IAC1GrI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,cAAenY,MAAO0M,EAAQ+L,YAAaP,OAAQG,IACtHrI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,OAAQnY,MAAO0M,EAAQqF,KAAMmG,OAAQG,IACxGrI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,WAAYnY,MAAO0M,EAAQsK,SAAUkB,OAAQG,IAChHrI,EAAiB,QAAES,cAAcsH,EAA8B,CAAE9C,QAAS1X,MAAM0E,KAAKyK,EAAQuI,QAAQjS,UAAWkV,OAAQG,EAAYC,iBAAkB5L,EAAQ4L,oBAvBtK3L,EAAQqL,0BAA4BA,EAYpCrL,EAAQoL,6BAA+BA,EAavCpL,EAAQmL,qBAAuBA,EAY/BnL,EAAQkL,wBAXR,SAAiCvK,GAC7B,IAAIoL,EAAWpL,EAAGoL,SAAUC,EAAqBrL,EAAGqL,mBAChDT,EAAS,WACTK,EAAeG,EAAS1a,KAAI,SAAU0O,EAAS0L,GAAc,OAAQpI,EAAiB,QAAES,cAAcqH,EAAsB,CAAEhQ,IAAK4E,EAAQmF,QAASnF,QAASA,EAAS0L,WAAYA,EAAYF,OAAQA,OAC1M,OAAQlI,EAAiB,QAAES,cAAcT,EAAiB,QAAE0C,SAAU,KAClE1C,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,cAAenY,MAAO0Y,EAAS3f,OAAQmf,OAAQA,IAClHlI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,gBAAiBnY,MAAO2Y,EAAoBT,OAAQA,IACvHlI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,gBAAiBnY,MAAO,IAAKkY,OAAQA,IACxGlI,EAAiB,QAAES,cAAcwH,EAAqB,CAAEE,UAAW,gBAAiBnY,MAAO,GAAIkY,OAAQA,IACvGK,K,mCCrDR,IAAIK,EAAY1W,MAAQA,KAAK0W,UAAa,WAStC,OARAA,EAAWza,OAAO0a,QAAU,SAAS/c,GACjC,IAAK,IAAI7B,EAAGwE,EAAI,EAAGb,EAAI9E,UAAUC,OAAQ0F,EAAIb,EAAGa,IAE5C,IAAK,IAAIkB,KADT1F,EAAInB,UAAU2F,GACON,OAAOY,UAAUV,eAAeX,KAAKzD,EAAG0F,KACzD7D,EAAE6D,GAAK1F,EAAE0F,IAEjB,OAAO7D,IAEKiI,MAAM7B,KAAMpJ,YAE5B8W,EAAmB1N,MAAQA,KAAK0N,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIvB,WAAcuB,EAAM,CAAE,QAAWA,IAExDlD,EAAQ2B,YAAa,EACrB,IAAI0B,EAAUJ,EAAgB,EAAQ,QAClCkJ,EAAW9I,EAAiB,QAAE+I,YAAW,SAAUzL,EAAI0L,GACvD,IAAIhZ,EAAQsN,EAAGtN,MAAO0Q,EAAYpD,EAAGoD,UAAWmF,EAAcvI,EAAGuI,YAAajD,EAAWtF,EAAGsF,SAAUqG,EAAe3L,EAAG2L,aAAc1L,EAAKD,EAAG0I,YAAaA,OAAqB,IAAPzI,GAAwBA,EAAI2L,EAAK5L,EAAG2I,qBAAsBA,OAA8B,IAAPiD,EAAgB,GAAKA,EAO3QC,EAAkBnJ,EAAiB,QAAEoJ,OAAO,MAehD,OAdApJ,EAAiB,QAAEqJ,oBAAoBL,GAAK,WAAc,OAAOG,EAAgBG,WACjFtJ,EAAiB,QAAEuJ,WAAU,WACrBJ,EAAgBG,UAChBH,EAAgBG,QAAQvC,MAAMyC,OAAS,GACvCL,EAAgBG,QAAQvC,MAAMyC,OAC1BL,EAAgBG,QAAQG,aAAe,QAEhD,CAACzZ,EAAOmZ,IAEXnJ,EAAiB,QAAEuJ,WAAU,WACrBN,GAAgBE,EAAgBG,SAChCH,EAAgBG,QAAQI,UAE7B,CAACP,IACInJ,EAAiB,QAAES,cAAc,WAAYmI,EAAS,CAAE,oBAAqB5C,EAAa2D,KAAM,EAAG5C,MAAO,CAAE6C,OAAQ,OAAQC,UAAW,UAAYnJ,UAAWA,EAAWmF,YAAaA,EAAamD,IAAKG,EAAiBvG,SArB7M,SAAU9U,GACtB8U,GACAA,EAAS9U,EAAE4L,OAAO1J,QAmBgOA,MAAOA,GAASiW,OAE9QtJ,EAAA,QAAqBmM,G,mCCzCrB,IAAI9E,EAAY9R,MAAQA,KAAK8R,UAAa,SAAS7Z,GAC/C,IAAIF,EAAsB,mBAAXoJ,QAAyBA,OAAOI,SAAU5J,EAAII,GAAKE,EAAEF,GAAIwE,EAAI,EAC5E,GAAI5E,EAAG,OAAOA,EAAE6D,KAAKvD,GACrB,GAAIA,GAAyB,iBAAbA,EAAEpB,OAAqB,MAAO,CAC1CmK,KAAM,WAEF,OADI/I,GAAKsE,GAAKtE,EAAEpB,SAAQoB,OAAI,GACrB,CAAE6F,MAAO7F,GAAKA,EAAEsE,KAAM0E,MAAOhJ,KAG5C,MAAM,IAAId,UAAUY,EAAI,0BAA4B,oCAEpD2V,EAAmB1N,MAAQA,KAAK0N,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIvB,WAAcuB,EAAM,CAAE,QAAWA,IAExDlD,EAAQ2B,YAAa,EACrB3B,EAAQmN,eAAiBnN,EAAQoN,WAAapN,EAAQqN,oBAAiB,EACvE,IAAIhK,EAAUJ,EAAgB,EAAQ,QAClCqE,EAAcrE,EAAgB,EAAQ,OACtCqK,EAAU,EAAQ,OAClBC,EAAW,EAAQ,OACnBC,EAAS,EAAQ,OACjB/F,EAAc,EAAQ,MACtBgG,EAAU,EAAQ,OAClB1I,EAAa,EAAQ,OACrByC,EAAa,EAAQ,OACrBkG,EAAa,EAAQ,OACrBC,EAAc,EAAQ,MACtBC,EAAY3K,EAAgB,EAAQ,QACpC4K,EAAS,EAAQ,OACjBC,EAAa,EAAQ,OACzB9N,EAAQqN,eAAiB,CACrB9D,QAAS,UACTpD,KAAM,OACNG,OAAQ,YACRF,OAAQ,SACR7B,OAAQ,SACRsC,SAAU,cACVkH,cAAe,gBACfzJ,KAAM,OACN6E,MAAO,QACPnF,QAAS,UACTyC,MAAO,QACPM,aAAc,eACdJ,uBAAwB,gBACxBH,WAAY,aACZpC,aAAc,gBAIlB,IAAI4J,EAAY,SAAUC,EAASvJ,GAC/B,IAAIwJ,EAAaV,EAAOW,aAAaF,EAASrhB,OAAO8X,GAAK,CAAEP,KAAM,GAAIiK,WAAY,KAClF,MAAO,CACH1J,GAAIA,EACJP,KAAM+J,EAAW/J,KACjBK,UAAW0J,EAAWE,aAG9B,SAASC,EAAiB5Q,EAAOgM,EAAQsC,EAAUvI,GAC/C,IAAI5H,EAAQ6B,EAAMzD,WACd2G,EAAK/E,EAAM0S,SAAUC,EAAkB5N,EAAG4N,gBAAiBtH,EAAOtG,EAAGsG,KAAMuH,EAAa7N,EAAG6N,WAC3F5N,EAAKhF,EAAMmQ,SAAU0C,EAAiB7N,EAAG6N,eAAgB3N,EAAaF,EAAGE,WACzE4N,EAAmB3C,EAClBwC,GAAoBtH,IACrByH,EAAmB,IAOvB,IAAIC,GAJJD,EAAmBA,EAAiB9R,QAAO,SAAU+D,GACjD,IAAI+H,EAAU/H,EAAG+H,QAASmD,EAAWlL,EAAGkL,SACxC,QAASnD,GAAWmD,OAEgBxa,KAAI,SAAU0O,GAAW,OAAQsD,EAAiB,QAAES,cAAc8J,EAAmB,QAAG,CAAEzS,IAAK4E,EAAQmF,QAASzH,MAAOA,EAAOgM,OAAQA,EAAQxC,KAAMA,EAAMlH,QAASA,EAASsI,UAAWtI,EAAQmF,UAAYuJ,EAAgB3N,WAAYA,EAAYyJ,UAAWd,EAAOmF,kBAAkBJ,EAAYzO,EAAQmF,SAAU1B,QAASA,OACtW,OAAQH,EAAiB,QAAES,cAAc,KAAM,CAAEC,UAAW,iBAAmB4K,GAGnF,IAAIvB,EAA4B,WAC5B,SAASA,IACL7X,KAAKsZ,MAAQ,CACTC,oCAAqCnB,EAAYmB,oCACjDC,qBAAsBpB,EAAYoB,sBAEtCxZ,KAAKiK,UAAY,CACbwP,eAAgBrB,EAAYqB,eAC5BC,cAAetB,EAAYsB,cAC3BC,cAAevB,EAAYuB,cAC3BC,cAAexB,EAAYwB,cAC3BC,mBAAoBzB,EAAYyB,oBAEpC7Z,KAAK8Z,QAAU7H,EAAW5F,uBAC1BrM,KAAKkI,MAAQ6P,EAAQjU,YAAYoU,EAAQnU,QAAS,CAC9CgV,SAAUR,EAAWwB,gBAEzB/Z,KAAKkU,OAAS,IAAI8D,EAASgC,iBAyI/B,OAtIAnC,EAAWhb,UAAUod,QAAU,SAAUC,EAAQxB,GAC7C1Y,KAAKkI,MAAMnD,SAASoT,EAAW5L,qBAAqB,CAChDmF,KAAM+G,EAAUC,EAASwB,OAGjCrC,EAAWhb,UAAUsd,iBAAmB,SAAUC,EAAYxP,GAC1D5K,KAAKqa,uBAAuBD,EAAYxP,GACxC5K,KAAKkI,MAAMnD,SAASkN,EAAWtH,cAAcC,EAAW,CAAEwP,WAAYA,MAE1EvC,EAAWhb,UAAUwd,uBAAyB,SAAUD,EAAYxP,GAGhE5K,KAAKkU,OAAOoG,qBAAqB1P,EAAWwP,IAEhDvC,EAAWhb,UAAU0d,cAAgB,SAAUC,GAC3Cxa,KAAKkI,MAAMnD,SAASoT,EAAW5L,qBAAqB,CAAE0M,WAAYuB,MAEtE3C,EAAWhb,UAAU4d,YAAc,SAAUL,EAAY7D,EAAazB,QACjD,IAAbA,IAAuBA,EAAW,IACtC,IAAIlK,EAAYsH,EAAYwI,mBAQ5B,OAPA1a,KAAKqa,uBAAuBD,EAAYxP,GAExC5K,KAAKkI,MAAMnD,SAASkN,EAAW1H,WAAWiF,EAAWmL,WAAWpE,EAAazB,EAAUlK,EAAWwP,EAAYpa,KAAKkI,MAAMzD,WAAWsU,SAASrH,KAAMza,KAAKyc,MAAO,CAC3J9D,KAAM,eAGV5P,KAAKkI,MAAMnD,SAASkN,EAAW9G,kBAAkBP,EAAW,CAAEU,qBAAqB,EAAMC,YAAY,KAC9FX,GAEXiN,EAAWhb,UAAU+d,WAAa,SAAUC,GACxC7a,KAAKkI,MAAMnD,SAASoT,EAAW5L,qBAAqB,CAChDyM,gBAAiB6B,MAGzBhD,EAAWhb,UAAUoP,sBAAwB,SAAUC,GAEnDlM,KAAKkI,MAAMnD,SAASkN,EAAWhG,sBAAsBC,KAEzD2L,EAAWhb,UAAUie,UAAY,SAAU3F,EAAS4F,EAAeb,EAAQc,EAE3EtC,EAASuC,GACL,IAAIvI,EAAKtH,EAAI8P,EAAK7P,EACdiF,EAAQtQ,KACRmb,EAAgB,KACpBnb,KAAKia,QAAQC,EAAQxB,GACrB,IAAIzK,EAAUgN,GAAsBxQ,EAAQqN,eAKxCsD,EAA0B,KAC1BC,EAFY,IAAIC,gBAAgBC,OAAOC,SAASC,QAEtB1e,IAAI,WAC9Bse,IACAD,EAA0BM,SAASL,EAAe,KAEtD,IAAI1J,EAAS,WACT,IAAItL,EAAQiK,EAAMpI,MAAMzD,WACpBkX,EAActgB,MAAM0E,KAAKsG,EAAMmQ,SAASA,SAAS1V,UACrDiR,EAAqB,QAAEJ,OAAO7D,EAAiB,QAAES,cAAc+J,EAAO3C,wBAAyB,CAAEa,SAAUmF,EAAYtU,QAAO,SAAUmD,GAAW,MAAwB,aAAjBA,EAAQoF,QAAyB6G,mBAAoBpQ,EAAMmQ,SAASC,qBAAuBsE,GAEjP1U,EAAMmQ,SAAS2E,gBAAkBA,IAGjC7K,EAAM4D,OAAO0H,iBAAiBvV,EAAMmQ,SAAS2E,eAC7CA,EAAgB9U,EAAMmQ,SAAS2E,eAEnCpJ,EAAqB,QAAEJ,OAAOmH,EAAiBxI,EAAMpI,MAAOoI,EAAM4D,OAAQyH,EAAa1N,GAAUkH,GAAS,WAGtG7E,EAAM4D,OAAO2H,wBAAwBxV,EAAM0S,SAASE,YAChD3I,EAAM4D,OAAO4H,iBACb/J,EAAqB,QAAEJ,OAAOmH,EAAiBxI,EAAMpI,MAAOoI,EAAM4D,OAAQyH,EAAa1N,GAAUkH,OAI7G,IAEI,IAAK,IAAI4G,EAAoBjK,EAASkJ,GAAkBgB,EAAsBD,EAAkB/a,QAASgb,EAAoB/a,KAAM+a,EAAsBD,EAAkB/a,OAAQ,CAC/K,IAAIwJ,EAAUwR,EAAoBle,MAC9B8M,EAAYsH,EAAYwI,mBAE5B1a,KAAKkI,MAAMnD,SAASkN,EAAW1H,WAAWiF,EAAWmL,WAAWnQ,EAAQ+L,YAAa/L,EAAQsK,SAAUlK,EAAW,KAAM6N,EAAUC,EAASlO,EAAQkH,MAAOza,KAAKglB,MAAMzR,EAAQ0R,YAAa,CACtL7J,SAAU7H,EAAQ2R,GAClBtM,KAAMrF,EAAQqF,KACdsD,QAAS3I,EAAQ2I,QACjBmD,SAAU9L,EAAQ8L,aAEtB,IAEI,IAAK,IAAIU,GAAMkE,OAAM,EAAQpJ,EAAStH,EAAQuI,UAAWJ,EAAKqE,EAAGhW,QAAS2R,EAAG1R,KAAM0R,EAAKqE,EAAGhW,OAAQ,CAC/F,IAAI0K,EAAQiH,EAAG7U,MACfkC,KAAKkI,MAAMnD,SAASkN,EAAWxG,SAASb,EAAW4E,EAAWiE,gBAAgBvB,EAAYsB,iBAAkBiF,EAAUC,EAAShN,EAAMgG,MAAOza,KAAKglB,MAAMvQ,EAAMwQ,YAAa,CACtK7J,SAAU3G,EAAMyQ,GAChBtM,KAAMnE,EAAMmE,KACZsD,QAASzH,EAAMyH,aAI3B,MAAOiJ,GAASlB,EAAM,CAAEjL,MAAOmM,GAC/B,QACI,IACQzJ,IAAOA,EAAG1R,OAASoK,EAAK2L,EAAW,SAAI3L,EAAG7P,KAAKwb,GAEvD,QAAU,GAAIkE,EAAK,MAAMA,EAAIjL,OAI7BmL,GAA2B5Q,EAAQ2R,KAAOf,GAC1Cpb,KAAKkI,MAAMnD,SAASkN,EAAW9G,kBAAkBP,EAAW,CAAEU,qBAAqB,EAAMC,YAAY,MAIjH,MAAO6H,GAASV,EAAM,CAAEzC,MAAOmD,GAC/B,QACI,IACQ4I,IAAwBA,EAAoB/a,OAASmK,EAAK2Q,EAA0B,SAAI3Q,EAAG5P,KAAKugB,GAExG,QAAU,GAAIrJ,EAAK,MAAMA,EAAIzC,OAEjC0B,IACA3R,KAAKkI,MAAMxD,UAAUiN,GAErB0K,SAASjP,KAAKkP,iBAAiB,aAAa,SAAU1gB,GAC9CA,EAAE4L,kBAAkB6N,cAEfzZ,EAAE4L,OAAO+U,QAAQ,qDAElBC,YAAW,WACPlM,EAAMpI,MAAMnD,SAASkN,EAAW9G,kBAAkB,KAAM,CAAEG,qBAAqB,EAAMC,YAAY,OAClG,UAKZsM,EA1JoB,GA4J/BpN,EAAQoN,WAAaA,EAIrBpN,EAAQmN,eAHR,WACI,OAAO,IAAIC,I,kCCxOf,IAAI4E,EAAUzc,MAAQA,KAAKyc,QAAW,SAAUxkB,EAAGyD,GAC/C,IAAI/D,EAAsB,mBAAXwJ,QAAyBlJ,EAAEkJ,OAAOI,UACjD,IAAK5J,EAAG,OAAOM,EACf,IAAmB0D,EAAYC,EAA3BW,EAAI5E,EAAE6D,KAAKvD,GAAOykB,EAAK,GAC3B,IACI,WAAc,IAANhhB,GAAgBA,KAAM,MAAQC,EAAIY,EAAEyE,QAAQC,MAAMyb,EAAG7c,KAAKlE,EAAEmC,OAExE,MAAOmS,GAASrU,EAAI,CAAEqU,MAAOA,GAC7B,QACI,IACQtU,IAAMA,EAAEsF,OAAStJ,EAAI4E,EAAU,SAAI5E,EAAE6D,KAAKe,GAElD,QAAU,GAAIX,EAAG,MAAMA,EAAEqU,OAE7B,OAAOyM,GAEPC,EAAiB3c,MAAQA,KAAK2c,eAAkB,SAAUC,EAAI7c,GAC9D,IAAK,IAAIxD,EAAI,EAAGsgB,EAAK9c,EAAKlJ,OAAQyH,EAAIse,EAAG/lB,OAAQ0F,EAAIsgB,EAAItgB,IAAK+B,IAC1Dse,EAAGte,GAAKyB,EAAKxD,GACjB,OAAOqgB,GAEXnS,EAAQ2B,YAAa,EACrB3B,EAAQoP,mBAAqBpP,EAAQmP,cAAgBnP,EAAQiP,cAAgBjP,EAAQ+O,qBAAuB/O,EAAQ8O,oCAAsC9O,EAAQqS,yBAA2BrS,EAAQkP,cAAgBlP,EAAQgP,oBAAiB,EAC9O,IAAIsD,EAAa,EAAQ,OAEzBtS,EAAQgP,eADa,SAAUpT,GAAS,OAAOA,EAAMmQ,SAASA,UAG9D/L,EAAQkP,cADY,SAAUtT,GAAS,OAAOA,EAAMmQ,SAAS0C,gBAG7DzO,EAAQqS,yBADuB,SAAUzW,GAAS,OAAOA,EAAMmQ,SAASC,oBASxEhM,EAAQ8O,oCAPR,SAA6ChD,GACzC,OAAOwG,EAAWhT,eAAeU,EAAQgP,gBAAgB,SAAUjD,GAC/D,OAAOmG,EAAc,GAAIF,EAAOjG,EAAS1V,WAAWuG,QAAO,SAAUmD,GACjE,OAAOA,EAAQ+L,cAAgBA,KAAiB/L,EAAQ2I,SAAW3I,EAAQ8L,iBAcvF7L,EAAQ+O,qBATR,SAA8B7J,GAC1B,OAAOoN,EAAWhT,eAAeU,EAAQgP,gBAAgB,SAAUjD,GAC/D,IAAIhM,EAAUgM,EAASzZ,IAAI4S,GAC3B,QAAgB3Y,IAAZwT,IAA0BA,EAAQ2I,UAAW3I,EAAQ8L,SAGzD,OAAO9L,MAKfC,EAAQiP,cADY,SAAUrT,GAAS,OAAOA,EAAM0S,SAASC,iBAE7DvO,EAAQmP,cAAgBmD,EAAWhT,eAAeU,EAAQgP,eAAgBhP,EAAQqS,0BAA0B,SAAUtG,EAAUC,GAC5H,OAAIA,IAAuBD,EAAS3V,MAG7BxF,MAAM0E,KAAKyW,EAAS1V,UAAUkc,MAAK,SAAUxS,GAChD,SAAIA,EAAQ2I,UACR3I,EAAQ8L,UACR9L,EAAQuI,QAAQlS,OAAS2J,EAAQ4L,kBACjC5L,EAAQyS,eAAiBzS,EAAQqF,OAG9BxU,MAAM0E,KAAKyK,EAAQuI,QAAQjS,UAAUkc,MAAK,SAAUtR,GAAS,OAAOA,EAAMyH,SAAWzH,EAAMuR,eAAiBvR,EAAMmE,cAIjIpF,EAAQoP,mBADiB,SAAUxT,GAAS,OAAQsW,EAAc,GAAIF,EAAOpW,EAAMmQ,SAASA,SAAS1V,WAAWuG,QAAO,SAAUmD,GAAW,OAAQA,EAAQ2I,UAAY3I,EAAQ8L,YAAmB,S,mCChEnM,IAAI4G,EAAmBld,MAAQA,KAAKkd,kBAAqBjhB,OAAO8B,OAAS,SAAU9F,EAAGN,EAAGmH,EAAGqe,QAC7EnmB,IAAPmmB,IAAkBA,EAAKre,GAC3B7C,OAAOgE,eAAehI,EAAGklB,EAAI,CAAEtf,YAAY,EAAMd,IAAK,WAAa,OAAOpF,EAAEmH,OAC3E,SAAU7G,EAAGN,EAAGmH,EAAGqe,QACTnmB,IAAPmmB,IAAkBA,EAAKre,GAC3B7G,EAAEklB,GAAMxlB,EAAEmH,KAEVse,EAAsBpd,MAAQA,KAAKod,qBAAwBnhB,OAAO8B,OAAS,SAAU9F,EAAGqE,GACxFL,OAAOgE,eAAehI,EAAG,UAAW,CAAE4F,YAAY,EAAMC,MAAOxB,KAC9D,SAASrE,EAAGqE,GACbrE,EAAW,QAAIqE,IAEf+gB,EAAgBrd,MAAQA,KAAKqd,cAAiB,SAAU1P,GACxD,GAAIA,GAAOA,EAAIvB,WAAY,OAAOuB,EAClC,IAAIT,EAAS,GACb,GAAW,MAAPS,EAAa,IAAK,IAAI7O,KAAK6O,EAAe,YAAN7O,GAAmB7C,OAAOY,UAAUV,eAAeX,KAAKmS,EAAK7O,IAAIoe,EAAgBhQ,EAAQS,EAAK7O,GAEtI,OADAse,EAAmBlQ,EAAQS,GACpBT,GAEP4E,EAAY9R,MAAQA,KAAK8R,UAAa,SAAS7Z,GAC/C,IAAIF,EAAsB,mBAAXoJ,QAAyBA,OAAOI,SAAU5J,EAAII,GAAKE,EAAEF,GAAIwE,EAAI,EAC5E,GAAI5E,EAAG,OAAOA,EAAE6D,KAAKvD,GACrB,GAAIA,GAAyB,iBAAbA,EAAEpB,OAAqB,MAAO,CAC1CmK,KAAM,WAEF,OADI/I,GAAKsE,GAAKtE,EAAEpB,SAAQoB,OAAI,GACrB,CAAE6F,MAAO7F,GAAKA,EAAEsE,KAAM0E,MAAOhJ,KAG5C,MAAM,IAAId,UAAUY,EAAI,0BAA4B,oCAExD0S,EAAQ2B,YAAa,EACrB3B,EAAQ1G,QAAU0G,EAAQsP,cAAgBtP,EAAQkQ,WAAalQ,EAAQgJ,qBAAkB,EACzF,IAAIqG,EAAUuD,EAAa,EAAQ,QAC/BC,EAAU,EAAQ,OAClBC,EAAUF,EAAa,EAAQ,QACnCE,EAAQC,YACRD,EAAQE,eAeRhT,EAAQgJ,gBAdR,SAAyB9D,EAASrB,EAAQ9X,EAAM4U,GAC5C,IAAIC,EAAKD,EAAGiH,SAAUA,OAAkB,IAAPhH,EAAgB,KAAOA,EAAI2L,EAAK5L,EAAGwE,KAAMA,OAAc,IAAPoH,EAAgB,UAAYA,EAAIrE,EAAKvH,EAAGyE,KAAMA,OAAc,IAAP8C,EAAgB,GAAKA,EAAIE,EAAKzH,EAAG+H,QACvK,MAAO,CACHxD,QAASA,EACT0C,SAAUA,EACVzC,KAAMA,EACNtB,OAAQA,EACR9X,KAAMA,EACNqZ,KAAMA,EACNoN,aAAcpN,EACdC,QAAS,GACTqD,aAV6L,IAAPN,GAAwBA,IAmCtNpI,EAAQkQ,WArBR,SAAoBpE,EAAazB,EAAUnF,EAASyK,EAAY9L,EAAQ9X,EAAM4U,GAC1E,IAAIC,EAAKD,EAAGiH,SAAUA,OAAkB,IAAPhH,EAAgB,KAAOA,EAAI2L,EAAK5L,EAAGwE,KAAMA,OAAc,IAAPoH,EAAgB,UAAYA,EAAIrE,EAAKvH,EAAGyE,KAAMA,OAAc,IAAP8C,EAAgB,GAAKA,EAAIE,EAAKzH,EAAGkL,SAAUA,OAAkB,IAAPzD,GAAwBA,EAAII,EAAK7H,EAAG+H,QAASA,OAAiB,IAAPF,GAAwBA,EAAIC,EAAK9H,EAAG2H,QAASA,OAAiB,IAAPG,EAAgB,IAAI5V,IAAQ4V,EACtU,MAAO,CACHqD,YAAaA,EACbzB,SAAUA,EACVnF,QAASA,EACTyK,WAAYA,EACZ/H,SAAUA,EACVzC,KAAMA,EACNtB,OAAQA,EACR9X,KAAMA,EACNqZ,KAAMA,EACNoN,aAAcpN,EACdkD,QAASA,EACTQ,SAAU,GACVzD,QAAS,GACTqD,QAASA,EACTmD,SAAUA,EACVF,iBAAkB/a,MAAM0E,KAAKgT,EAAQjS,UAAUiH,QAAO,SAAUrM,EAAGgQ,GAAS,OAA2B,OAAnBA,EAAM2G,SAAoB3W,EAAI,EAAIA,IAAO,KAIrI+O,EAAQsP,cAAgB,CACpBvD,SAAU,IAAIlZ,IACdiO,YAAY,EACZ2N,eAAgB,KAChBiC,cAAe,KACf1E,mBAAoB,GAExBhM,EAAQ1G,QAAUwZ,EAAiB,SAAE,SAAUG,EAAO1Y,GAClD,IAAI0N,EAAKtH,EAmBLH,EAAiB,SAAUT,GACtBA,EAAQ6H,SAKT7H,EAAQ8L,UAAW,EAHnBoH,EAAMlH,SAAiB,OAAEhM,EAAQmF,SAMjC+N,EAAMxE,iBAAmB1O,EAAQmF,UACjC+N,EAAMxE,eAAiB,MAEvBwE,EAAMvC,gBAAkB3Q,EAAQmF,UAChC+N,EAAMvC,cAAgB,OAG9B,OAAQnW,EAAOC,MACX,KAAK6U,EAAQpP,YACTgT,EAAMlH,SAASvZ,IAAI+H,EAAOwF,QAAQmF,QAAS3K,EAAOwF,SAC9CxF,EAAOwF,QAAQ6H,WACfqL,EAAMjH,oBAAsB,GAEhC,MAEJ,KAAKqD,EAAQhP,eAET,GADIN,EAAUkT,EAAMlH,SAASzZ,IAAIiI,EAAO4F,WAC3B,CACT,GAAI5F,EAAO6F,OAAOiF,SAA4C,IAAjC9K,EAAO6F,OAAOiF,QAAQjZ,OAC/C,MAEJymB,EAAQzS,OAAOL,EAASxF,EAAO6F,QAEnC,MAEJ,KAAKiP,EAAQ9O,eAET,KADIR,EAAUkT,EAAMlH,SAASzZ,IAAIiI,EAAO4F,YAEpC,OAtDQ,SAAUJ,GACrBA,EAAQ6H,SAKT7H,EAAQ2I,SAAU,EAHlBuK,EAAMlH,SAAiB,OAAEhM,EAAQmF,SAMjC+N,EAAMxE,iBAAmB1O,EAAQmF,UACjC+N,EAAMxE,eAAiB,KACvBwE,EAAMnS,YAAa,GAEnBmS,EAAMvC,gBAAkB3Q,EAAQmF,UAChC+N,EAAMvC,cAAgB,MA0CtBpQ,CAAcP,GACd,MAEJ,KAAKsP,EAAQ5O,gBAET,KADIV,EAAUkT,EAAMlH,SAASzZ,IAAIiI,EAAO4F,YAEpC,MAEJK,EAAeT,GACf,MAEJ,KAAKsP,EAAQtO,qBACiB,OAArBxG,EAAO4F,WAAwB8S,EAAMlH,SAAS5Z,IAAIoI,EAAO4F,cAC1D8S,EAAMxE,eAAiBlU,EAAO4F,UAC1B5F,EAAOsG,sBACPoS,EAAMvC,cAAgBnW,EAAO4F,WAEjC8S,EAAMnS,WAAavG,EAAOuG,YAE9B,MAEJ,KAAKuO,EAAQnO,UAET,KADInB,EAAUkT,EAAMlH,SAASzZ,IAAIiI,EAAO4F,aACO,IAA7B5F,EAAO0G,MAAMmE,KAAKhZ,OAChC,MAEAmO,EAAO0G,MAAM2G,WACb7H,EAAQ4L,kBAAoB,GAEhC5L,EAAQuI,QAAQ9V,IAAI+H,EAAO0G,MAAMiE,QAAS3K,EAAO0G,OACjD,MAEJ,KAAKoO,EAAQhO,aAET,KADItB,EAAUkT,EAAMlH,SAASzZ,IAAIiI,EAAO4F,YAEpC,MAGJ,KADIc,EAAQlB,EAAQuI,QAAQhW,IAAIiI,EAAO6G,UAEnC,MAEJ,GAAI7G,EAAO6F,OAAOiF,SAA4C,IAAjC9K,EAAO6F,OAAOiF,QAAQjZ,OAC/C,MAEJymB,EAAQzS,OAAOa,EAAO1G,EAAO6F,QAC7B,MAEJ,KAAKiP,EAAQ9N,aACT,IAIIN,EAHJ,KADIlB,EAAUkT,EAAMlH,SAASzZ,IAAIiI,EAAO4F,YAEpC,MAGJ,KADIc,EAAQlB,EAAQuI,QAAQhW,IAAIiI,EAAO6G,UAEnC,MAECH,EAAM2G,SAKP3G,EAAMyH,SAAU,EAHhB3I,EAAQuI,QAAgB,OAAErH,EAAMiE,SAKpC,MAEJ,KAAKmK,EAAQ3N,wBAET,IAAIqK,EAAWkH,EAAMlH,SACrB,IACI,IAAK,IAAInL,EAAKyG,EAAS0E,EAAS1V,UAAWkW,EAAK3L,EAAGrK,QAASgW,EAAG/V,KAAM+V,EAAK3L,EAAGrK,OAAQ,CACjF,IAAIwJ,KAAUwM,EAAGlZ,OACLyY,YAAYoH,WAAW3Y,EAAOkH,cACtCjB,EAAeT,IAI3B,MAAO4I,GAASV,EAAM,CAAEzC,MAAOmD,GAC/B,QACI,IACQ4D,IAAOA,EAAG/V,OAASmK,EAAKC,EAAW,SAAID,EAAG5P,KAAK6P,GAEvD,QAAU,GAAIqH,EAAK,MAAMA,EAAIzC,WAO1CxF,EAAQsP,gB,mCCpOXtP,EAAQ2B,YAAa,EACrB3B,EAAQ1G,aAAU,EAClB,IAAIgU,EAAU,EAAQ,OAClBvI,EAAa,EAAQ,OACrB2I,EAAa,EAAQ,OACzB1N,EAAQ1G,QAAUgU,EAAQjS,gBAAgB,CACtC0Q,SAAUhH,EAAWzL,QACrBgV,SAAUZ,EAAWpU,W,mCCPzB,IAAImZ,EAAmBld,MAAQA,KAAKkd,kBAAqBjhB,OAAO8B,OAAS,SAAU9F,EAAGN,EAAGmH,EAAGqe,QAC7EnmB,IAAPmmB,IAAkBA,EAAKre,GAC3B7C,OAAOgE,eAAehI,EAAGklB,EAAI,CAAEtf,YAAY,EAAMd,IAAK,WAAa,OAAOpF,EAAEmH,OAC3E,SAAU7G,EAAGN,EAAGmH,EAAGqe,QACTnmB,IAAPmmB,IAAkBA,EAAKre,GAC3B7G,EAAEklB,GAAMxlB,EAAEmH,KAEVse,EAAsBpd,MAAQA,KAAKod,qBAAwBnhB,OAAO8B,OAAS,SAAU9F,EAAGqE,GACxFL,OAAOgE,eAAehI,EAAG,UAAW,CAAE4F,YAAY,EAAMC,MAAOxB,KAC9D,SAASrE,EAAGqE,GACbrE,EAAW,QAAIqE,IAEf+gB,EAAgBrd,MAAQA,KAAKqd,cAAiB,SAAU1P,GACxD,GAAIA,GAAOA,EAAIvB,WAAY,OAAOuB,EAClC,IAAIT,EAAS,GACb,GAAW,MAAPS,EAAa,IAAK,IAAI7O,KAAK6O,EAAe,YAAN7O,GAAmB7C,OAAOY,UAAUV,eAAeX,KAAKmS,EAAK7O,IAAIoe,EAAgBhQ,EAAQS,EAAK7O,GAEtI,OADAse,EAAmBlQ,EAAQS,GACpBT,GAEPQ,EAAmB1N,MAAQA,KAAK0N,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIvB,WAAcuB,EAAM,CAAE,QAAWA,IAExDlD,EAAQ2B,YAAa,EACrB3B,EAAQ1G,QAAU0G,EAAQsP,mBAAgB,EAC1C,IAAID,EAAUuD,EAAa,EAAQ,QAC/BC,EAAU,EAAQ,OAClBC,EAAU7P,EAAgB,EAAQ,QAEtCjD,EAAQsP,cAAgB,CACpBrI,KAAM,KACNsH,iBAAiB,EACjB4E,sBAAsB,EACtB3E,WAAY,MAEhBxO,EAAQ1G,QAAUwZ,EAAiB,SAAE,SAAUG,EAAO1Y,GAClD,OAAQA,EAAOC,MACX,KAAK6U,EAAQtN,uBACT8Q,EAAQzS,OAAO6S,EAAO1Y,EAAO6F,WAKtCJ,EAAQsP,gB,iCC1CXtP,EAAQ2B,YAAa,EACrB3B,EAAQI,YAAS,EAIjBJ,EAAQI,OAHR,SAAgBgT,EAAMC,GAClB,OAAO7hB,OAAO0a,OAAOkH,EAAMC,K,mCCH/B,IAAIrB,EAAUzc,MAAQA,KAAKyc,QAAW,SAAUxkB,EAAGyD,GAC/C,IAAI/D,EAAsB,mBAAXwJ,QAAyBlJ,EAAEkJ,OAAOI,UACjD,IAAK5J,EAAG,OAAOM,EACf,IAAmB0D,EAAYC,EAA3BW,EAAI5E,EAAE6D,KAAKvD,GAAOykB,EAAK,GAC3B,IACI,WAAc,IAANhhB,GAAgBA,KAAM,MAAQC,EAAIY,EAAEyE,QAAQC,MAAMyb,EAAG7c,KAAKlE,EAAEmC,OAExE,MAAOmS,GAASrU,EAAI,CAAEqU,MAAOA,GAC7B,QACI,IACQtU,IAAMA,EAAEsF,OAAStJ,EAAI4E,EAAU,SAAI5E,EAAE6D,KAAKe,GAElD,QAAU,GAAIX,EAAG,MAAMA,EAAEqU,OAE7B,OAAOyM,GAEP5K,EAAY9R,MAAQA,KAAK8R,UAAa,SAAS7Z,GAC/C,IAAIF,EAAsB,mBAAXoJ,QAAyBA,OAAOI,SAAU5J,EAAII,GAAKE,EAAEF,GAAIwE,EAAI,EAC5E,GAAI5E,EAAG,OAAOA,EAAE6D,KAAKvD,GACrB,GAAIA,GAAyB,iBAAbA,EAAEpB,OAAqB,MAAO,CAC1CmK,KAAM,WAEF,OADI/I,GAAKsE,GAAKtE,EAAEpB,SAAQoB,OAAI,GACrB,CAAE6F,MAAO7F,GAAKA,EAAEsE,KAAM0E,MAAOhJ,KAG5C,MAAM,IAAId,UAAUY,EAAI,0BAA4B,oCAEpD4kB,EAAiB3c,MAAQA,KAAK2c,eAAkB,SAAUC,EAAI7c,GAC9D,IAAK,IAAIxD,EAAI,EAAGsgB,EAAK9c,EAAKlJ,OAAQyH,EAAIse,EAAG/lB,OAAQ0F,EAAIsgB,EAAItgB,IAAK+B,IAC1Dse,EAAGte,GAAKyB,EAAKxD,GACjB,OAAOqgB,GAEXnS,EAAQ2B,YAAa,EACrB3B,EAAQuP,sBAAmB,EAC3B,IAAI/B,EAAS,EAAQ,OAIjB+B,EAAkC,WAClC,SAASA,IACLha,KAAK+d,gBAAkB,IAAIzgB,IAC3B0C,KAAKge,mBAAqB,IAAI1gB,IAC9B0C,KAAKie,YAAc,IAAI3gB,IACvB0C,KAAKke,wBAA0B,IAAI5gB,IACnC0C,KAAKme,eAAiB,IAAI7gB,IAC1B0C,KAAKmb,cAAgB,KACrBnb,KAAKoe,2BAA6B,IAAI9gB,IACtC0C,KAAKqe,SAAU,EAqKnB,OAnKArE,EAAiBnd,UAAUyY,kBAAoB,SAAU1K,EAAWuK,GAChD,OAAZA,EACAnV,KAAK+d,gBAAgB9gB,IAAI2N,EAAWuK,GAGpCnV,KAAK+d,gBAAwB,OAAEnT,GAEnC5K,KAAKqe,SAAU,GAEnBrE,EAAiBnd,UAAUyd,qBAAuB,SAAU1P,EAAWwP,GACnEpa,KAAKge,mBAAmB/gB,IAAI2N,EAAWwP,GACvCpa,KAAKie,YAAYhhB,IAAI2N,EAAWwP,EAAWkE,UAAY,MACvDte,KAAKue,sBAAsB3T,GAC3B5K,KAAKqe,SAAU,GAEnBrE,EAAiBnd,UAAU0Y,iBAAmB,SAAU3K,EAAW0M,GAC3DtX,KAAKme,eAAephB,IAAI6N,KAAe0M,IACvCtX,KAAKme,eAAelhB,IAAI2N,EAAW0M,GACnCtX,KAAKqe,SAAU,IAGvBrE,EAAiBnd,UAAU+e,iBAAmB,SAAUhR,GACpD5K,KAAKmb,cAAgBvQ,EACrB5K,KAAKqe,SAAU,GAEnBrE,EAAiBnd,UAAU0hB,sBAAwB,SAAU3T,GACzD,IAAIwP,EAAapa,KAAKge,mBAAmBjhB,IAAI6N,GACxCwP,GAGLpa,KAAKke,wBAAwBjhB,IAAI2N,EAAWwP,EAAWoE,mBAAmB5T,IAAc5K,KAAKmb,gBA1CxF,KA4CTnB,EAAiBnd,UAAUgf,wBAA0B,SAAUrB,GAC3D,IAAIlK,EAAQtQ,UACA,IAARwa,IAAkBA,EAAM,MAE5B,IAAIiE,EAAsB,IAAInhB,IAAI0C,KAAKke,yBACvCle,KAAKge,mBAAmBthB,SAAQ,SAAUlF,EAAGoT,GACrC0F,EAAM+I,kBAAkBmB,EAAK5P,IAC7B0F,EAAMiO,sBAAsB3T,MAQhC5K,KAAKke,0BAA4BO,IACjCze,KAAKqe,SAAU,IAGvBrE,EAAiBnd,UAAUif,cAAgB,WACvC,IAAIxL,EAAQtQ,KAEZ,IAAKA,KAAKqe,QACN,OAAO,EAGX,IAAIK,EAAYrjB,MAAM0E,KAAKC,KAAK+d,gBAAgBvhB,QAAQV,KAAI,SAAU8O,GAAa,MAAO,CACtF4P,IAAKvC,EAAOW,aAAatI,EAAM2N,YAAarT,EAAW,MACvDkK,SAAUmD,EAAOW,aAAatI,EAAM4N,wBAAyBtT,EAAW,GACxE0M,OAAQW,EAAOW,aAAatI,EAAM6N,eAAgBvT,EAAW,GAC7D4L,SAAU,CAAC5L,GACX+T,sBAA+C,OAAxBrO,EAAM6K,eAA0BvQ,IAAc0F,EAAM6K,cAC3EyD,sBAAuB,MAGvBC,EAAc,IAAIvhB,IACtBohB,EAAUhiB,SAAQ,SAAUoiB,GACxB,IAAIC,EAASF,EAAY9hB,IAAI+hB,EAAMtE,MAAQ,GAC3CuE,EAAOlf,KAAKif,GACZD,EAAY5hB,IAAI6hB,EAAMtE,IAAKuE,MAG/B,IAAIH,EAAwB5e,KAAKmb,cAC7Bnb,KAAKke,wBAAwBnhB,IAAIiD,KAAKmb,oBAAiBnkB,EACvDgoB,EAAmBhf,KAAKmb,cACxBnb,KAAKie,YAAYlhB,IAAIiD,KAAKmb,oBAAiBnkB,EA0E/C,OAxEAqE,MAAM0E,KAAK8e,EAAY1e,WAAWzD,SAAQ,SAAU0O,GAChD,IAAIsH,EAAKrH,EAAI2L,EACTrE,EAAK8J,EAAOrR,EAAI,GAAIoP,EAAM7H,EAAG,GAAIoM,EAASpM,EAAG,GAC7CsM,EAAyB3O,EAAM6K,eAAiB6D,IAAqBxE,EAEzEuE,EAAOG,MAAK,SAAUJ,EAAOK,GAAmB,OAAOL,EAAMhK,SAAWqK,EAAgBrK,YAIxF,IAFA,IAAIsK,EAAgBL,EAChBM,GAAW,EACRA,GAAU,CACbA,GAAW,EACX,IAAIC,EAAY,GACZC,EAAgB,KACpB,IACI,IAAK,IAAIC,GAAmB9M,OAAM,EAAQZ,EAASsN,IAAiBK,EAAoBD,EAAgBxe,QAASye,EAAkBxe,KAAMwe,EAAoBD,EAAgBxe,OAAQ,CACjL,IAAI8d,EAAQW,EAAkB3hB,MAC1ByhB,GACIA,EAAczK,SAAWyK,EAAcjI,OA9G7D,GA+GsBwH,EAAMhK,UACNuK,GAAW,GAEVrI,EAAKuI,EAAc/I,UAAU3W,KAAKgC,MAAMmV,EAAI2F,EAAc,GAAIF,EAAOqC,EAAMtI,YACxEsI,EAAMH,wBACNY,EAAcZ,uBAAwB,EACtCY,EAAcX,sBACVE,EAAMF,sBAAwBW,EAAcjI,QAEpDiI,EAAcjI,QAAUwH,EAAMxH,QAGzB2H,GACDM,EAAczK,SAAW4K,KACzBH,EAAczK,SA5HjC,IA6HoCyK,EAAcjI,SA5HtD,IAgIuBsH,GACAW,EAAcZ,wBACdY,EAAczK,SACV8J,EACIW,EAAcX,yBAKlCU,EAAUzf,KAAKif,GACfS,EAAgBT,IAGxB,MAAO1L,GAASV,EAAM,CAAEzC,MAAOmD,GAC/B,QACI,IACQqM,IAAsBA,EAAkBxe,OAASoK,EAAKmU,EAAwB,SAAInU,EAAG7P,KAAKgkB,GAElG,QAAU,GAAI9M,EAAK,MAAMA,EAAIzC,OAEjCmP,EAAgBE,EAGpBF,EAAc1iB,SAAQ,SAAUoiB,GAC5B,IAAIa,EAAkBb,EAAMhK,SAC5BgK,EAAMtI,SAAS9Z,SAAQ,SAAUkO,GAC7B0F,EAAM8N,2BAA2BnhB,IAAI2N,EAAW+U,GAChD,IAAIrI,EAAShH,EAAM6N,eAAephB,IAAI6N,GAClC0M,IACAqI,GAAmBrI,EA/JjC,aAoKFtX,KAAKqe,SAAU,GACR,GAEXrE,EAAiBnd,UAAUwc,kBAAoB,SAAUmB,EAAK5P,GAE1D,OADiBqN,EAAOW,aAAa5Y,KAAKie,YAAarT,EAAW,QAC5C4P,GAE1BR,EAAiBnd,UAAUsX,mBAAqB,SAAUvJ,GACtD,OAAI5K,KAAKoe,2BAA2BxhB,IAAIgO,GAC7B5K,KAAKoe,2BAA2BrhB,IAAI6N,GAExC5K,KAAKke,wBAAwBnhB,IAAI6N,IAErCoP,EA9K0B,GAgLrCvP,EAAQuP,iBAAmBA,G,iCCtN3BvP,EAAQ2B,YAAa,EACrB3B,EAAQmO,kBAAe,EAQvBnO,EAAQmO,aAPR,SAAsB9c,EAAK8J,EAAKga,GAC5B,IAAI9hB,EAAQhC,EAAIiB,IAAI6I,GACpB,YAAqB,IAAV9H,EACA8hB,EAEJ9hB,I,gCCPX2M,EAAQ2B,YAAa,EACrB3B,EAAQ+I,eAAiB/I,EAAQiQ,sBAAmB,EACpD,IAAImF,EAAgB,EAChBC,EAAc,EAIlBrV,EAAQiQ,iBAHR,WACI,OAAOmF,KAMXpV,EAAQ+I,eAHR,WACI,OAAOsM,M,mCCRX,IAAIC,EAAS,EAAQ,OACjBC,EAAkB,EAAQ,OAK9BzE,OAAO/E,SAAW,WACd,IAAIyJ,EAAaF,EAAOnI,iBAKxB,SAASsI,EAAkBtkB,GACvB,OAAQA,EAAEukB,SAAWvkB,EAAEwkB,UAAYxkB,EAAEykB,QAX7B,KAWuCzkB,EAAE0kB,QAErD,SAASC,EAAeC,GAEpB,GAAIA,EAAUjE,QAAQ,6BAClB,MAAO,GAIX,IAFA,IAAIpH,EAAUqL,EAAUjE,QAAQ,sBAC5BkE,EAAe,GACA,OAAZtL,GACHsL,EAAa5gB,KAAKsV,EAAQuL,QAAQnK,aAClCpB,EAAUA,EAAQwL,cAAcpE,QAAQ,sBAG5C,OADAkE,EAAaG,UACNH,EAAa1kB,KAAK,KAQ7B,IAAI8kB,EAA2C,WAM3C,SAASA,EAA0BL,EAAWM,GAC1C9gB,KAAK8gB,KAAOA,EACZ9gB,KAAKwgB,UAAYA,EACjBxgB,KAAK0F,YAAc,KAoFvB,OA7EAmb,EAA0BhkB,UAAUkkB,mBAAqB,SAAUpR,GAC/D,IAAIW,EAAQtQ,KACRoL,EAAK6U,EAAWhW,UAAW0P,EAAgBvO,EAAGuO,cAAeD,EAAgBtO,EAAGsO,cAChFsH,EAAgBf,EAAW3G,MAAME,qBAAqB7J,GACtDzH,EAAQ+X,EAAW/X,MACnB+Y,EAAe/Y,EAAMzD,WACrByc,EAAUvH,EAAcsH,KAAkBtR,EAC1CwR,EAAQzH,EAAcuH,GACtBC,GACAlhB,KAAKohB,UAELD,GACAnhB,KAAKqhB,OAETrhB,KAAK0F,YAAcwC,EAAMxD,WAAU,WAC/B,IAAI2B,EAAQ6B,EAAMzD,WACJuc,EAAc3a,IAExBiK,EAAMlC,WAEV,IAAIkT,EAAc3H,EAActT,KAAWsJ,EACvC2R,IAAeJ,IACXA,EACA5Q,EAAMiR,YAGNjR,EAAM8Q,UAEVF,EAAUI,GAEVH,IAAUzH,EAAcrT,KACpB8a,EACA7Q,EAAMkR,OAGNlR,EAAM+Q,OAEVF,EAAQzH,EAAcrT,OAG9BrG,KAAKyhB,kBAAkB9R,IAE3BkR,EAA0BhkB,UAAUuR,SAAW,WAC3CpO,KAAK8gB,KAAKY,SACN1hB,KAAK0F,aACL1F,KAAK0F,eAGbmb,EAA0BhkB,UAAUukB,QAAU,WAC1CphB,KAAK8gB,KAAKa,UAAUD,OAAO,oBAC3B1hB,KAAK8gB,KAAKc,UAAY5B,EAAgB6B,QAAQC,iBAElDjB,EAA0BhkB,UAAU0kB,UAAY,WAC5CvhB,KAAK8gB,KAAKa,UAAUxkB,IAAI,oBACxB6C,KAAK8gB,KAAKc,UAAY5B,EAAgB6B,QAAQE,eAIlDlB,EAA0BhkB,UAAUwkB,KAAO,WACvCrhB,KAAK8gB,KAAKa,UAAUD,OAAO,aAE/Bb,EAA0BhkB,UAAU2kB,KAAO,WACvCxhB,KAAK8gB,KAAKa,UAAUxkB,IAAI,aAE5B0jB,EAA0BhkB,UAAU4kB,kBAAoB,SAAU9R,GAC9D3P,KAAK8gB,KAAKxE,iBAAiB,SAAS,WAChC2D,EAAW/X,MAAMnD,SAASkb,EAAWnG,QAAQ3O,kBAAkBwE,EAAS,CAAErE,qBAAqB,EAAMC,YAAY,SAGzHsV,EAA0BhkB,UAAUyhB,OAAS,WACzC,IAAIlT,EACJ,OAA8D,QAAtDA,EAAKpL,KAAKwgB,UAAUjE,QAAQ,4BAAyC,IAAPnR,OAAgB,EAASA,EAAG4W,aAAa,aAEnHnB,EAA0BhkB,UAAU2hB,mBAAqB,WACrD,OAAQxe,KAAKwgB,UAAUyB,wBAAwBhO,IAC3CoI,SAAS6F,gBAAgBC,WAE1BtB,EA7FmC,GA+F1CuB,EAAyC,WACzC,SAASA,EAAwBhX,GAC7B,IAAIoV,EAAYpV,EAAGoV,UAAW6B,EAAsBjX,EAAGiX,oBAAqBC,EAAyBlX,EAAGkX,uBACxGtiB,KAAKwgB,UAAYA,EACjBxgB,KAAKuW,YAAcgK,EAAeC,GAClCxgB,KAAKqiB,oBAAsBA,EAC3BriB,KAAKsiB,uBAAyBA,EAC9BtiB,KAAKmhB,OAAQ,EAgFjB,OA9EAiB,EAAwBvlB,UAAU0lB,SAAW,WACzC,IAAIjS,EAAQtQ,KACR0Z,EAAgBuG,EAAWhW,UAAUyP,cACrCuH,EAAehB,EAAW/X,MAAMzD,WAChC+d,EAAmB9I,EAAcuH,GACjCwB,EAA+BxC,EAAW3G,MAAMC,oCAAoCvZ,KAAKuW,aACzFmM,EAAkBD,EAA6BxB,GACnDjhB,KAAK2iB,iBAA4C,IAA3BD,EAAgB7rB,QAAgB2rB,GACtD,IAAII,EAAoB3C,EAAW/X,MAAMxD,WAAU,WAC/C,IAAI2B,EAAQ4Z,EAAW/X,MAAMzD,WACzBoe,EAAcJ,EAA6Bpc,GAC3Cyc,EAAapJ,EAAcrT,GAC3B0c,EAAmBL,IAAoBG,EACvCG,EAAkBR,IAAqBM,EACvCC,IAEAL,EAAkBG,GACFxb,QAAO,SAAUmD,GAAW,OAA8B,OAAvBA,EAAQ4P,cAAwB1d,SAAQ,SAAU8N,GACjG,IAAI4P,EAAa9J,EAAM2S,wBAAwBzY,GAC/CyV,EAAW9F,iBAAiBC,EAAY5P,EAAQmF,SAChDyK,EAAW2G,mBAAmBvW,EAAQmF,aAG1CqT,GAAkBD,KAGlBP,EAAmBM,EACnBxS,EAAMqS,iBAA4C,IAA3BD,EAAgB7rB,QAAgB2rB,OAG/DvB,EAAazK,SAASA,SAAS9Z,SAAQ,SAAU8N,GAE7C,GAAIA,EAAQ+L,cAAgBjG,EAAMiG,YAAa,CAC3C,IAAI6D,EAAa9J,EAAM2S,wBAAwBzY,GAC/CyV,EAAW9F,iBAAiBC,EAAY5P,EAAQmF,SAChDyK,EAAW2G,mBAAmBvW,EAAQmF,aAG9C,IAAIpF,EAAa,WACb,IAAI6P,EAAa9J,EAAM2S,0BACnBtT,EAAUsQ,EAAWxF,YAAYL,EAAY9J,EAAMiG,aACvD6D,EAAW2G,mBAAmBpR,IAgBlC,OAdA3P,KAAKqiB,oBAAoB/F,iBAAiB,SAAS,WAE/C/R,OAEJvK,KAAKwgB,UAAUlE,iBAAiB,SAAS,SAAU1gB,GAC3C4mB,GAAoBtC,EAAkBtkB,KACP,IAA3B8mB,EAAgB7rB,OAChB0T,IAGA0V,EAAW/X,MAAMnD,SAASkb,EAAWnG,QAAQ3O,kBAAkBuX,EAAgB,GAAG/S,QAAS,CAAErE,qBAAqB,EAAMC,YAAY,SAIzIqX,GAEXR,EAAwBvlB,UAAU8lB,iBAAmB,SAAUO,GACvDA,IAAaljB,KAAKmhB,QAGtBnhB,KAAKmhB,MAAQ+B,EACRljB,KAAKmhB,MAINnhB,KAAKqiB,oBAAoBV,UAAUD,OAAO,YAH1C1hB,KAAKqiB,oBAAoBV,UAAUxkB,IAAI,cAM/CilB,EAAwBvlB,UAAUomB,wBAA0B,WACxD,IAAIE,EAAiBnjB,KAAKsiB,uBAAuBc,WAAU,GAI3D,OAHAD,EAAehU,GAAK,GACpBgU,EAAexB,UAAUD,OAAO,YAChC1hB,KAAKqiB,oBAAoBgB,sBAAsB,WAAYF,GACpD,IAAItC,EAA0B7gB,KAAKwgB,UAAW2C,EAAgBlD,IAElEmC,EAvFiC,GAyF5C,SAASkB,EAAqBC,GAC1B,IAAIC,EAAS,IAAIpB,EAAwB,CACrC5B,UAAW+C,EAAchH,QAAQ,sBACjC8F,oBAAqBkB,EACrBjB,uBAAwBjG,SAASoH,cAAc,mBAE/CD,EAAOjN,aACPiN,EAAOjB,WA0Df,MAAO,CACHtC,WAAYA,EACZM,eAAgBA,EAChBL,kBAAmBA,EACnBoD,qBAAsBA,EACtBI,sBA5DJ,SAA+BC,GAC3B,IAAIC,EAAkBvH,SAASwH,eAAe,YAC1CC,EAAwBzH,SAASwH,eAAe,mBAChDE,EAAc1H,SAASwH,eAAe,iBAC1C,IAAKD,IAAoBE,IAA0BC,EAC/C,MAAM,IAAIloB,MAAM,2DAEpB,IAAImoB,EAAOvjB,KAAKwb,MAAM8H,EAAYE,aAClChE,EAAWnF,UAAU8I,EAAiBE,EAAuBE,EAAKtS,KAAMsS,EAAKxN,SAAU,IAAIlZ,IAAIrB,OAAOkE,QAAQ6jB,EAAKtL,UAAWsH,EAAgB6B,SAC9I8B,EAAYO,iBAAiB,yCAAyCxnB,QAAQ4mB,GAE9E,IAAIa,EAAgBR,EAAYF,cAAc,kBAC1CU,IACAlE,EAAW1F,cAAc4J,EAAczD,QAAQzH,YAC/CkL,EAAc7H,iBAAiB,UAAU,SAAU1gB,GAC/CqkB,EAAW1F,cAAc3e,EAAEwoB,OAAO5J,SAI1C,IAAI6J,EAAgBV,EAAYF,cAAc,yCAC1Ca,EAA6BX,EAAYF,cAAc,iCACvDc,EAAoBZ,EAAYF,cAAc,gBAC9Ce,EAA0B,SAAU3J,GAEpCoF,EAAWrF,WAAWC,GAGlBA,GACAza,EAAEkkB,GAA4BjD,OAC9BkD,EAAkB5C,UAAUxkB,IAAI,mCAGhCiD,EAAEkkB,GAA4B9C,OAC9B+C,EAAkB5C,UAAUD,OAAO,mCAG3C2C,EAAc/H,iBAAiB,UAAU,SAAU1gB,GAC/C4oB,EAAwB5oB,EAAE4L,OAAOid,YAErCD,EAAwBH,EAAcI,SAEtC,IAAIC,EAAiBf,EAAYF,cAAc,2BAC3CkB,EAAqB,WACrB,IAAIC,EAAe3E,EAAWhW,UAAU4P,mBAAmBoG,EAAW/X,MAAMzD,YAExEigB,EAAeG,UADfD,EAAe,EACYA,EAAarpB,WAIb,IAGnC0kB,EAAW/X,MAAMxD,UAAUigB,GAC3BA,MApRU,KCPdG,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,GAAGF,EAAyBE,GAC3B,OAAOF,EAAyBE,GAAUva,QAG3C,IAAIwa,EAASH,EAAyBE,GAAY,CACjD7V,GAAI6V,EACJE,QAAQ,EACRza,QAAS,IAUV,OANA0a,EAAoBH,GAAUxpB,KAAKypB,EAAOxa,QAASwa,EAAQA,EAAOxa,QAASsa,GAG3EE,EAAOC,QAAS,EAGTD,EAAOxa,QAIfsa,EAAoBptB,EAAIwtB,EAIxBJ,EAAoBpmB,EAAI,aC9BxBomB,EAAoBrpB,EAAI,SAASupB,GAChC,IAAIG,EAASH,GAAUA,EAAO7Y,WAC7B,WAAa,OAAO6Y,EAAgB,SACpC,WAAa,OAAOA,GAErB,OADAF,EAAoBttB,EAAE2tB,EAAQ,CAAEtoB,EAAGsoB,IAC5BA,GCLRL,EAAoBttB,EAAI,SAASgT,EAAS4a,GACzC,IAAI,IAAIzf,KAAOyf,EACXN,EAAoB9sB,EAAEotB,EAAYzf,KAASmf,EAAoB9sB,EAAEwS,EAAS7E,IAC5E3J,OAAOgE,eAAewK,EAAS7E,EAAK,CAAE/H,YAAY,EAAMd,IAAKsoB,EAAWzf,MCJ3Emf,EAAoBxmB,EAAI,WACvB,GAA0B,iBAAf+mB,WAAyB,OAAOA,WAC3C,IACC,OAAOtlB,MAAQ,IAAI3D,SAAS,cAAb,GACd,MAAOT,GACR,GAAsB,iBAAX2f,OAAqB,OAAOA,QALjB,GCAxBwJ,EAAoBQ,IAAM,SAASN,GASlC,OARAA,EAAShpB,OAAO8B,OAAOknB,IACXO,WAAUP,EAAOO,SAAW,IACxCvpB,OAAOgE,eAAeglB,EAAQ,UAAW,CACxCpnB,YAAY,EACZZ,IAAK,WACJ,MAAM,IAAIpB,MAAM,0FAA4FopB,EAAO9V,OAG9G8V,GCTRF,EAAoB9sB,EAAI,SAAS2L,EAAK6hB,GAAQ,OAAOxpB,OAAOY,UAAUV,eAAeX,KAAKoI,EAAK6hB,ICC/FV,EAAoBppB,EAAI,SAAS8O,GACX,oBAAXtJ,QAA0BA,OAAOukB,aAC1CzpB,OAAOgE,eAAewK,EAAStJ,OAAOukB,YAAa,CAAE5nB,MAAO,WAE7D7B,OAAOgE,eAAewK,EAAS,aAAc,CAAE3M,OAAO,KCLvDinB,EAAoBzmB,EAAI,I,WCKxB,IAAIqnB,EAAkB,CACrBC,IAAK,GAGFC,EAAkB,CACrB,CAAC,MAAM,KACP,CAAC,MAAM,MAYJC,EAAuB,aAGvBC,EAAuB,SAASC,EAA4BhC,GAQ/D,IAPA,IAMIgB,EAAUiB,EANVC,EAAWlC,EAAK,GAChBmC,EAAcnC,EAAK,GACnBoC,EAAUpC,EAAK,GACfqC,EAAiBrC,EAAK,GAGHznB,EAAI,EAAG+pB,EAAW,GACpC/pB,EAAI2pB,EAASrvB,OAAQ0F,IACzB0pB,EAAUC,EAAS3pB,GAChBwoB,EAAoB9sB,EAAE0tB,EAAiBM,IAAYN,EAAgBM,IACrEK,EAASzmB,KAAK8lB,EAAgBM,GAAS,IAExCN,EAAgBM,GAAW,EAE5B,IAAIjB,KAAYmB,EACZpB,EAAoB9sB,EAAEkuB,EAAanB,KACrCD,EAAoBptB,EAAEqtB,GAAYmB,EAAYnB,IAKhD,IAFGoB,GAASA,EAAQrB,GACjBiB,GAA4BA,EAA2BhC,GACpDsC,EAASzvB,QACdyvB,EAASC,OAATD,GAOD,OAHGD,GAAgBR,EAAgBhmB,KAAKgC,MAAMgkB,EAAiBQ,GAGxDP,KAGJU,EAAqBC,KAA0B,oBAAIA,KAA0B,qBAAK,GAItF,SAASC,IAER,IADA,IAAIxZ,EACI3Q,EAAI,EAAGA,EAAIspB,EAAgBhvB,OAAQ0F,IAAK,CAG/C,IAFA,IAAIoqB,EAAiBd,EAAgBtpB,GACjCwQ,GAAY,EACRzO,EAAI,EAAGA,EAAIqoB,EAAe9vB,OAAQyH,IAAK,CAC9C,IAAIsoB,EAAQD,EAAeroB,GACG,IAA3BqnB,EAAgBiB,KAAc7Z,GAAY,GAE3CA,IACF8Y,EAAgBtlB,OAAOhE,IAAK,GAC5B2Q,EAAS6X,EAAoBA,EAAoBhtB,EAAI4uB,EAAe,KAOtE,OAJ8B,IAA3Bd,EAAgBhvB,SAClBkuB,EAAoBpmB,IACpBomB,EAAoBpmB,EAAI,cAElBuO,EArBRsZ,EAAmB9pB,QAAQqpB,EAAqBljB,KAAK,KAAM,IAC3D2jB,EAAmB3mB,KAAOkmB,EAAqBljB,KAAK,KAAM2jB,EAAmB3mB,KAAKgD,KAAK2jB,IAsBvF,IAAIK,EAAU9B,EAAoBpmB,EAClComB,EAAoBpmB,EAAI,WAGvB,OADAomB,EAAoBpmB,EAAIkoB,GAAW,cAC3Bf,EAAuBY,M,GCtFzB3B,EAAoBpmB,I","file":"wagtail\\admin\\static\\wagtailadmin\\js\\comments.js","sourcesContent":["/*\r\n * Date Format 1.2.3\r\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\r\n * MIT license\r\n *\r\n * Includes enhancements by Scott Trenda <scott.trenda.net>\r\n * and Kris Kowal <cixar.com/~kris.kowal/>\r\n *\r\n * Accepts a date, a mask, or a date and a mask.\r\n * Returns a formatted version of the given date.\r\n * The date defaults to the current date/time.\r\n * The mask defaults to dateFormat.masks.default.\r\n */\r\n\r\n(function(global) {\r\n  'use strict';\r\n\r\n  var dateFormat = (function() {\r\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|'[^']*'|'[^']*'/g;\r\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\r\n      var timezoneClip = /[^-+\\dA-Z]/g;\r\n  \r\n      // Regexes and supporting functions are cached through closure\r\n      return function (date, mask, utc, gmt) {\r\n  \r\n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\r\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\r\n          mask = date;\r\n          date = undefined;\r\n        }\r\n  \r\n        date = date || new Date;\r\n  \r\n        if(!(date instanceof Date)) {\r\n          date = new Date(date);\r\n        }\r\n  \r\n        if (isNaN(date)) {\r\n          throw TypeError('Invalid date');\r\n        }\r\n  \r\n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\r\n  \r\n        // Allow setting the utc/gmt argument via the mask\r\n        var maskSlice = mask.slice(0, 4);\r\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\r\n          mask = mask.slice(4);\r\n          utc = true;\r\n          if (maskSlice === 'GMT:') {\r\n            gmt = true;\r\n          }\r\n        }\r\n  \r\n        var _ = utc ? 'getUTC' : 'get';\r\n        var d = date[_ + 'Date']();\r\n        var D = date[_ + 'Day']();\r\n        var m = date[_ + 'Month']();\r\n        var y = date[_ + 'FullYear']();\r\n        var H = date[_ + 'Hours']();\r\n        var M = date[_ + 'Minutes']();\r\n        var s = date[_ + 'Seconds']();\r\n        var L = date[_ + 'Milliseconds']();\r\n        var o = utc ? 0 : date.getTimezoneOffset();\r\n        var W = getWeek(date);\r\n        var N = getDayOfWeek(date);\r\n        var flags = {\r\n          d:    d,\r\n          dd:   pad(d),\r\n          ddd:  dateFormat.i18n.dayNames[D],\r\n          dddd: dateFormat.i18n.dayNames[D + 7],\r\n          m:    m + 1,\r\n          mm:   pad(m + 1),\r\n          mmm:  dateFormat.i18n.monthNames[m],\r\n          mmmm: dateFormat.i18n.monthNames[m + 12],\r\n          yy:   String(y).slice(2),\r\n          yyyy: y,\r\n          h:    H % 12 || 12,\r\n          hh:   pad(H % 12 || 12),\r\n          H:    H,\r\n          HH:   pad(H),\r\n          M:    M,\r\n          MM:   pad(M),\r\n          s:    s,\r\n          ss:   pad(s),\r\n          l:    pad(L, 3),\r\n          L:    pad(Math.round(L / 10)),\r\n          t:    H < 12 ? 'a'  : 'p',\r\n          tt:   H < 12 ? 'am' : 'pm',\r\n          T:    H < 12 ? 'A'  : 'P',\r\n          TT:   H < 12 ? 'AM' : 'PM',\r\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\r\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\r\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\r\n          W:    W,\r\n          N:    N\r\n        };\r\n  \r\n        return mask.replace(token, function (match) {\r\n          if (match in flags) {\r\n            return flags[match];\r\n          }\r\n          return match.slice(1, match.length - 1);\r\n        });\r\n      };\r\n    })();\r\n\r\n  dateFormat.masks = {\r\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\r\n    'shortDate':             'm/d/yy',\r\n    'mediumDate':            'mmm d, yyyy',\r\n    'longDate':              'mmmm d, yyyy',\r\n    'fullDate':              'dddd, mmmm d, yyyy',\r\n    'shortTime':             'h:MM TT',\r\n    'mediumTime':            'h:MM:ss TT',\r\n    'longTime':              'h:MM:ss TT Z',\r\n    'isoDate':               'yyyy-mm-dd',\r\n    'isoTime':               'HH:MM:ss',\r\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\r\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\r\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\r\n  };\r\n\r\n  // Internationalization strings\r\n  dateFormat.i18n = {\r\n    dayNames: [\r\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\r\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\r\n    ],\r\n    monthNames: [\r\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\r\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\r\n    ]\r\n  };\r\n\r\nfunction pad(val, len) {\r\n  val = String(val);\r\n  len = len || 2;\r\n  while (val.length < len) {\r\n    val = '0' + val;\r\n  }\r\n  return val;\r\n}\r\n\r\n/**\r\n * Get the ISO 8601 week number\r\n * Based on comments from\r\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\r\n *\r\n * @param  {Object} `date`\r\n * @return {Number}\r\n */\r\nfunction getWeek(date) {\r\n  // Remove time components of date\r\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n\r\n  // Change date to Thursday same week\r\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\r\n\r\n  // Take January 4th as it is always in week 1 (see ISO 8601)\r\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\r\n\r\n  // Change date to Thursday same week\r\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\r\n\r\n  // Check if daylight-saving-time-switch occurred and correct for it\r\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\r\n  targetThursday.setHours(targetThursday.getHours() - ds);\r\n\r\n  // Number of weeks between target Thursday and first Thursday\r\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\r\n  return 1 + Math.floor(weekDiff);\r\n}\r\n\r\n/**\r\n * Get ISO-8601 numeric representation of the day of the week\r\n * 1 (for Monday) through 7 (for Sunday)\r\n * \r\n * @param  {Object} `date`\r\n * @return {Number}\r\n */\r\nfunction getDayOfWeek(date) {\r\n  var dow = date.getDay();\r\n  if(dow === 0) {\r\n    dow = 7;\r\n  }\r\n  return dow;\r\n}\r\n\r\n/**\r\n * kind-of shortcut\r\n * @param  {*} val\r\n * @return {String}\r\n */\r\nfunction kindOf(val) {\r\n  if (val === null) {\r\n    return 'null';\r\n  }\r\n\r\n  if (val === undefined) {\r\n    return 'undefined';\r\n  }\r\n\r\n  if (typeof val !== 'object') {\r\n    return typeof val;\r\n  }\r\n\r\n  if (Array.isArray(val)) {\r\n    return 'array';\r\n  }\r\n\r\n  return {}.toString.call(val)\r\n    .slice(8, -1).toLowerCase();\r\n};\r\n\r\n\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(function () {\r\n      return dateFormat;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    module.exports = dateFormat;\r\n  } else {\r\n    global.dateFormat = dateFormat;\r\n  }\r\n})(this);\r\n","function n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!n.constructor[L]||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?(n.delete(r),n.add(t)):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function g(n){O(n),n.p.forEach(S),n.p=null}function O(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.g=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.O||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(g(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q],r,e.u,e.s)):r=M(e,i,[]),g(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(r,i){return A(n,e,o,r,i,t)})),x(n,o,!1),t&&n.u&&b(\"Patches\").R(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),r(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!r(v))return;e.m=!1}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),n.h.F&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,r,t){var e=s(r)?b(\"MapSet\").N(r,t):v(r)?b(\"MapSet\").T(r,t):n.O?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function D(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(r,c),u.I=!1}else e=F(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function F(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return\"production\"!==process.env.NODE_ENV&&f(r),en.get(r,n)},set:function(r){var t=this[Q];\"production\"!==process.env.NODE_ENV&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);return!(!t||t.get)}function f(r){r.g&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.D,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},R:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r}),e.push({op:\"replace\",path:[],value:n.t})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=R(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.g&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,g:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.D.set(n,!0),t.o.set(n,r),t.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.D.set(n,!1),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(r){n.D.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=R(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,g:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{N:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=R(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.D[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&\"number\"!=typeof t||(n.o[r]=t,n.D[r]=!0,!0)},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.D[r]=!1,E(n),k(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),en.deleteProperty.call(this,r[0],t)},on.set=function(r,t,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.O=B,this.F=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=R(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?g(c):O(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw g(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if((f=i(r))===H)return;return void 0===f&&(f=r),e.F&&d(f,!0),f}n(21,r)},this.produceWithPatches=function(n,r){return\"function\"==typeof n?function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))}:[e.produce(n,r,(function(n,r){t=n,i=r})),t,i];var t,i},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,O(i),o},i.finishDraft=function(r,t){var e=r&&r[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(r){r&&!B&&n(20),this.O=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t.slice(e+1))}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,D as current,J as enableAllPlugins,N as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,r as isDraft,t as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nexport var createSelector = createSelectorCreator(defaultMemoize);\n\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","\"use strict\";\r\nexports.__esModule = true;\r\nexports.commentActionFunctions = exports.invalidateContentPath = exports.deleteReply = exports.updateReply = exports.addReply = exports.setFocusedComment = exports.resolveComment = exports.deleteComment = exports.updateComment = exports.addComment = exports.INVALIDATE_CONTENT_PATH = exports.DELETE_REPLY = exports.UPDATE_REPLY = exports.ADD_REPLY = exports.SET_PINNED_COMMENT = exports.SET_FOCUSED_COMMENT = exports.RESOLVE_COMMENT = exports.DELETE_COMMENT = exports.UPDATE_COMMENT = exports.ADD_COMMENT = void 0;\r\nexports.ADD_COMMENT = 'add-comment';\r\nexports.UPDATE_COMMENT = 'update-comment';\r\nexports.DELETE_COMMENT = 'delete-comment';\r\nexports.RESOLVE_COMMENT = 'resolve-comment';\r\nexports.SET_FOCUSED_COMMENT = 'set-focused-comment';\r\nexports.SET_PINNED_COMMENT = 'set-pinned-comment';\r\nexports.ADD_REPLY = 'add-reply';\r\nexports.UPDATE_REPLY = 'update-reply';\r\nexports.DELETE_REPLY = 'delete-reply';\r\nexports.INVALIDATE_CONTENT_PATH = 'invalidate-content-path';\r\nfunction addComment(comment) {\r\n    return {\r\n        type: exports.ADD_COMMENT,\r\n        comment: comment,\r\n    };\r\n}\r\nexports.addComment = addComment;\r\nfunction updateComment(commentId, update) {\r\n    return {\r\n        type: exports.UPDATE_COMMENT,\r\n        commentId: commentId,\r\n        update: update,\r\n    };\r\n}\r\nexports.updateComment = updateComment;\r\nfunction deleteComment(commentId) {\r\n    return {\r\n        type: exports.DELETE_COMMENT,\r\n        commentId: commentId,\r\n    };\r\n}\r\nexports.deleteComment = deleteComment;\r\nfunction resolveComment(commentId) {\r\n    return {\r\n        type: exports.RESOLVE_COMMENT,\r\n        commentId: commentId,\r\n    };\r\n}\r\nexports.resolveComment = resolveComment;\r\nfunction setFocusedComment(commentId, _a) {\r\n    var _b = _a === void 0 ? { updatePinnedComment: false, forceFocus: false } : _a, updatePinnedComment = _b.updatePinnedComment, forceFocus = _b.forceFocus;\r\n    return {\r\n        type: exports.SET_FOCUSED_COMMENT,\r\n        commentId: commentId,\r\n        updatePinnedComment: updatePinnedComment,\r\n        forceFocus: forceFocus\r\n    };\r\n}\r\nexports.setFocusedComment = setFocusedComment;\r\nfunction addReply(commentId, reply) {\r\n    return {\r\n        type: exports.ADD_REPLY,\r\n        commentId: commentId,\r\n        reply: reply,\r\n    };\r\n}\r\nexports.addReply = addReply;\r\nfunction updateReply(commentId, replyId, update) {\r\n    return {\r\n        type: exports.UPDATE_REPLY,\r\n        commentId: commentId,\r\n        replyId: replyId,\r\n        update: update,\r\n    };\r\n}\r\nexports.updateReply = updateReply;\r\nfunction deleteReply(commentId, replyId) {\r\n    return {\r\n        type: exports.DELETE_REPLY,\r\n        commentId: commentId,\r\n        replyId: replyId,\r\n    };\r\n}\r\nexports.deleteReply = deleteReply;\r\nfunction invalidateContentPath(contentPath) {\r\n    return {\r\n        type: exports.INVALIDATE_CONTENT_PATH,\r\n        contentPath: contentPath,\r\n    };\r\n}\r\nexports.invalidateContentPath = invalidateContentPath;\r\nexports.commentActionFunctions = {\r\n    addComment: addComment,\r\n    updateComment: updateComment,\r\n    deleteComment: deleteComment,\r\n    resolveComment: resolveComment,\r\n    setFocusedComment: setFocusedComment,\r\n    addReply: addReply,\r\n    updateReply: updateReply,\r\n    deleteReply: deleteReply,\r\n    invalidateContentPath: invalidateContentPath,\r\n};\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.updateGlobalSettings = exports.UPDATE_GLOBAL_SETTINGS = void 0;\r\nexports.UPDATE_GLOBAL_SETTINGS = 'update-global-settings';\r\nfunction updateGlobalSettings(update) {\r\n    return {\r\n        type: exports.UPDATE_GLOBAL_SETTINGS,\r\n        update: update,\r\n    };\r\n}\r\nexports.updateGlobalSettings = updateGlobalSettings;\r\n","\"use strict\";\r\n/* eslint-disable react/prop-types */\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nexports.CommentHeader = void 0;\r\nvar dateformat_1 = __importDefault(require(\"dateformat\"));\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar Icon_1 = __importDefault(require(\"../../../Icon/Icon\"));\r\nvar CommentHeader = function (_a) {\r\n    var commentReply = _a.commentReply, store = _a.store, strings = _a.strings, onResolve = _a.onResolve, onEdit = _a.onEdit, onDelete = _a.onDelete, descriptionId = _a.descriptionId;\r\n    var author = commentReply.author, date = commentReply.date;\r\n    var onClickResolve = function (e) {\r\n        e.preventDefault();\r\n        if (onResolve) {\r\n            onResolve(commentReply, store);\r\n        }\r\n    };\r\n    var onClickEdit = function (e) { return __awaiter(void 0, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            e.preventDefault();\r\n            if (onEdit) {\r\n                onEdit(commentReply, store);\r\n            }\r\n            return [2 /*return*/];\r\n        });\r\n    }); };\r\n    var onClickDelete = function (e) { return __awaiter(void 0, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            e.preventDefault();\r\n            if (onDelete) {\r\n                onDelete(commentReply, store);\r\n            }\r\n            return [2 /*return*/];\r\n        });\r\n    }); };\r\n    return (react_1[\"default\"].createElement(\"div\", { className: \"comment-header\" },\r\n        react_1[\"default\"].createElement(\"div\", { className: \"comment-header__actions\" },\r\n            onResolve &&\r\n                react_1[\"default\"].createElement(\"div\", { className: \"comment-header__action comment-header__action--resolve\" },\r\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", \"aria-label\": strings.RESOLVE, onClick: onClickResolve },\r\n                        react_1[\"default\"].createElement(Icon_1[\"default\"], { name: \"check\" }))),\r\n            (onEdit || onDelete) &&\r\n                react_1[\"default\"].createElement(\"div\", { className: \"comment-header__action comment-header__action--more\" },\r\n                    react_1[\"default\"].createElement(\"details\", null,\r\n                        react_1[\"default\"].createElement(\"summary\", { \"aria-label\": strings.MORE_ACTIONS, \"aria-haspopup\": \"menu\", role: \"button\" },\r\n                            react_1[\"default\"].createElement(Icon_1[\"default\"], { name: \"ellipsis-v\" })),\r\n                        react_1[\"default\"].createElement(\"div\", { className: \"comment-header__more-actions\", role: \"menu\" },\r\n                            onEdit && react_1[\"default\"].createElement(\"button\", { type: \"button\", role: \"menuitem\", onClick: onClickEdit }, strings.EDIT),\r\n                            onDelete && react_1[\"default\"].createElement(\"button\", { type: \"button\", role: \"menuitem\", onClick: onClickDelete }, strings.DELETE))))),\r\n        author && author.avatarUrl &&\r\n            react_1[\"default\"].createElement(\"img\", { className: \"comment-header__avatar\", src: author.avatarUrl, role: \"presentation\" }),\r\n        react_1[\"default\"].createElement(\"span\", { id: descriptionId },\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-header__author\" }, author ? author.name : ''),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-header__date\" }, dateformat_1[\"default\"](date, 'h:MM mmmm d')))));\r\n};\r\nexports.CommentHeader = CommentHeader;\r\n","\"use strict\";\r\n/* eslint-disable react/prop-types */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nexports.saveCommentReply = void 0;\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar comments_1 = require(\"../../actions/comments\");\r\nvar CommentHeader_1 = require(\"../CommentHeader\");\r\nvar TextArea_1 = __importDefault(require(\"../TextArea\"));\r\nfunction saveCommentReply(comment, reply, store) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                mode: 'saving',\r\n            }));\r\n            try {\r\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                    mode: 'default',\r\n                    text: reply.newText,\r\n                    author: reply.author,\r\n                }));\r\n            }\r\n            catch (err) {\r\n                /* eslint-disable-next-line no-console */\r\n                console.error(err);\r\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                    mode: 'save_error',\r\n                }));\r\n            }\r\n            return [2 /*return*/];\r\n        });\r\n    });\r\n}\r\nexports.saveCommentReply = saveCommentReply;\r\nfunction deleteCommentReply(comment, reply, store) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                mode: 'deleting',\r\n            }));\r\n            try {\r\n                store.dispatch(comments_1.deleteReply(comment.localId, reply.localId));\r\n            }\r\n            catch (err) {\r\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                    mode: 'delete_error',\r\n                }));\r\n            }\r\n            return [2 /*return*/];\r\n        });\r\n    });\r\n}\r\nvar CommentReplyComponent = /** @class */ (function (_super) {\r\n    __extends(CommentReplyComponent, _super);\r\n    function CommentReplyComponent() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    CommentReplyComponent.prototype.renderEditing = function () {\r\n        var _this = this;\r\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, strings = _a.strings;\r\n        var onChangeText = function (value) {\r\n            store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                newText: value,\r\n            }));\r\n        };\r\n        var onSave = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        e.preventDefault();\r\n                        return [4 /*yield*/, saveCommentReply(comment, reply, store)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        var onCancel = function (e) {\r\n            e.preventDefault();\r\n            store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                mode: 'default',\r\n                newText: reply.text,\r\n            }));\r\n        };\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"form\", { onSubmit: onSave },\r\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { className: \"comment-reply__input\", value: reply.newText, onChange: onChangeText }),\r\n                react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__actions\" },\r\n                    react_1[\"default\"].createElement(\"button\", { type: \"submit\", disabled: reply.newText.length === 0, className: \"comment-reply__button comment-reply__button--primary\" }, strings.SAVE),\r\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onCancel }, strings.CANCEL)))));\r\n    };\r\n    CommentReplyComponent.prototype.renderSaving = function () {\r\n        var _a = this.props, reply = _a.reply, store = _a.store, strings = _a.strings;\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\r\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__progress\" }, strings.SAVING)));\r\n    };\r\n    CommentReplyComponent.prototype.renderSaveError = function () {\r\n        var _this = this;\r\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, strings = _a.strings;\r\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        e.preventDefault();\r\n                        return [4 /*yield*/, saveCommentReply(comment, reply, store)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\r\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__error\" },\r\n                strings.SAVE_ERROR,\r\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickRetry }, strings.RETRY))));\r\n    };\r\n    CommentReplyComponent.prototype.renderDeleteConfirm = function () {\r\n        var _this = this;\r\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, strings = _a.strings;\r\n        var onClickDelete = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        e.preventDefault();\r\n                        return [4 /*yield*/, deleteCommentReply(comment, reply, store)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        var onClickCancel = function (e) {\r\n            e.preventDefault();\r\n            store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                mode: 'default',\r\n            }));\r\n        };\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\r\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__confirm-delete\" },\r\n                strings.CONFIRM_DELETE_COMMENT,\r\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button comment-reply__button--red\", onClick: onClickDelete }, strings.DELETE),\r\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickCancel }, strings.CANCEL))));\r\n    };\r\n    CommentReplyComponent.prototype.renderDeleting = function () {\r\n        var _a = this.props, reply = _a.reply, store = _a.store, strings = _a.strings;\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\r\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__progress\" }, strings.DELETING)));\r\n    };\r\n    CommentReplyComponent.prototype.renderDeleteError = function () {\r\n        var _this = this;\r\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, strings = _a.strings;\r\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        e.preventDefault();\r\n                        return [4 /*yield*/, deleteCommentReply(comment, reply, store)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        var onClickCancel = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                e.preventDefault();\r\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                    mode: 'default',\r\n                }));\r\n                return [2 /*return*/];\r\n            });\r\n        }); };\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\r\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__error\" },\r\n                strings.DELETE_ERROR,\r\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickCancel }, strings.CANCEL),\r\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickRetry }, strings.RETRY))));\r\n    };\r\n    CommentReplyComponent.prototype.renderDefault = function () {\r\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, strings = _a.strings;\r\n        // Show edit/delete buttons if this reply was authored by the current user\r\n        var onEdit;\r\n        var onDelete;\r\n        if (reply.author === null || this.props.user && this.props.user.id === reply.author.id) {\r\n            onEdit = function () {\r\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                    mode: 'editing',\r\n                    newText: reply.text,\r\n                }));\r\n            };\r\n            onDelete = function () {\r\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\r\n                    mode: 'delete_confirm',\r\n                }));\r\n            };\r\n        }\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings, onEdit: onEdit, onDelete: onDelete }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text)));\r\n    };\r\n    CommentReplyComponent.prototype.render = function () {\r\n        var inner;\r\n        switch (this.props.reply.mode) {\r\n            case 'editing':\r\n                inner = this.renderEditing();\r\n                break;\r\n            case 'saving':\r\n                inner = this.renderSaving();\r\n                break;\r\n            case 'save_error':\r\n                inner = this.renderSaveError();\r\n                break;\r\n            case 'delete_confirm':\r\n                inner = this.renderDeleteConfirm();\r\n                break;\r\n            case 'deleting':\r\n                inner = this.renderDeleting();\r\n                break;\r\n            case 'delete_error':\r\n                inner = this.renderDeleteError();\r\n                break;\r\n            default:\r\n                inner = this.renderDefault();\r\n                break;\r\n        }\r\n        return (react_1[\"default\"].createElement(\"li\", { key: this.props.reply.localId, className: \"comment-reply comment-reply--mode-\" + this.props.reply.mode, \"data-reply-id\": this.props.reply.localId }, inner));\r\n    };\r\n    return CommentReplyComponent;\r\n}(react_1[\"default\"].Component));\r\nexports[\"default\"] = CommentReplyComponent;\r\n","\"use strict\";\r\n/* eslint-disable react/prop-types */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar react_dom_1 = __importDefault(require(\"react-dom\"));\r\nvar focus_trap_react_1 = __importDefault(require(\"focus-trap-react\"));\r\nvar comments_1 = require(\"../../state/comments\");\r\nvar comments_2 = require(\"../../actions/comments\");\r\nvar sequences_1 = require(\"../../utils/sequences\");\r\nvar CommentReply_1 = __importDefault(require(\"../CommentReply\"));\r\nvar CommentHeader_1 = require(\"../CommentHeader\");\r\nvar TextArea_1 = __importDefault(require(\"../TextArea\"));\r\nfunction saveComment(comment, store) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            store.dispatch(comments_2.updateComment(comment.localId, {\r\n                mode: 'saving',\r\n            }));\r\n            try {\r\n                store.dispatch(comments_2.updateComment(comment.localId, {\r\n                    mode: 'default',\r\n                    text: comment.newText,\r\n                    remoteId: comment.remoteId,\r\n                    author: comment.author,\r\n                    date: comment.date,\r\n                }));\r\n            }\r\n            catch (err) {\r\n                /* eslint-disable-next-line no-console */\r\n                console.error(err);\r\n                store.dispatch(comments_2.updateComment(comment.localId, {\r\n                    mode: 'save_error',\r\n                }));\r\n            }\r\n            return [2 /*return*/];\r\n        });\r\n    });\r\n}\r\nfunction doDeleteComment(comment, store) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            store.dispatch(comments_2.updateComment(comment.localId, {\r\n                mode: 'deleting',\r\n            }));\r\n            try {\r\n                store.dispatch(comments_2.deleteComment(comment.localId));\r\n            }\r\n            catch (err) {\r\n                /* eslint-disable-next-line no-console */\r\n                console.error(err);\r\n                store.dispatch(comments_2.updateComment(comment.localId, {\r\n                    mode: 'delete_error',\r\n                }));\r\n            }\r\n            return [2 /*return*/];\r\n        });\r\n    });\r\n}\r\nfunction doResolveComment(comment, store) {\r\n    store.dispatch(comments_2.resolveComment(comment.localId));\r\n}\r\nvar CommentComponent = /** @class */ (function (_super) {\r\n    __extends(CommentComponent, _super);\r\n    function CommentComponent() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    CommentComponent.prototype.renderReplies = function (_a) {\r\n        var e_1, _b;\r\n        var _this = this;\r\n        var _c = _a === void 0 ? {} : _a, _d = _c.hideNewReply, hideNewReply = _d === void 0 ? false : _d;\r\n        var _e = this.props, comment = _e.comment, isFocused = _e.isFocused, store = _e.store, user = _e.user, strings = _e.strings;\r\n        if (!comment.remoteId) {\r\n            // Hide replies UI if the comment itself isn't saved yet\r\n            return react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null);\r\n        }\r\n        var onChangeNewReply = function (value) {\r\n            store.dispatch(comments_2.updateComment(comment.localId, {\r\n                newReply: value,\r\n            }));\r\n        };\r\n        var sendReply = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            var replyId, reply;\r\n            return __generator(this, function (_a) {\r\n                e.preventDefault();\r\n                replyId = sequences_1.getNextReplyId();\r\n                reply = comments_1.newCommentReply(replyId, user, Date.now(), {\r\n                    text: comment.newReply,\r\n                    mode: 'default',\r\n                });\r\n                store.dispatch(comments_2.addReply(comment.localId, reply));\r\n                store.dispatch(comments_2.updateComment(comment.localId, {\r\n                    newReply: '',\r\n                }));\r\n                return [2 /*return*/];\r\n            });\r\n        }); };\r\n        var onClickCancelReply = function (e) {\r\n            e.preventDefault();\r\n            store.dispatch(comments_2.updateComment(comment.localId, {\r\n                newReply: '',\r\n            }));\r\n        };\r\n        var replies = [];\r\n        var replyBeingEdited = false;\r\n        try {\r\n            for (var _f = __values(comment.replies.values()), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                var reply = _g.value;\r\n                if (reply.mode === 'saving' || reply.mode === 'editing') {\r\n                    replyBeingEdited = true;\r\n                }\r\n                if (!reply.deleted) {\r\n                    replies.push(react_1[\"default\"].createElement(CommentReply_1[\"default\"], { key: reply.localId, store: store, user: user, comment: comment, reply: reply, strings: strings }));\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_g && !_g.done && (_b = _f[\"return\"])) _b.call(_f);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        // Hide new reply if a reply is being edited as well\r\n        var newReplyHidden = hideNewReply || replyBeingEdited;\r\n        var replyForm = react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null);\r\n        if (!newReplyHidden && (isFocused || comment.newReply)) {\r\n            replyForm = (react_1[\"default\"].createElement(\"form\", { onSubmit: sendReply },\r\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { className: \"comment__reply-input\", placeholder: \"Enter your reply...\", value: comment.newReply, onChange: onChangeNewReply }),\r\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__reply-actions\" },\r\n                    react_1[\"default\"].createElement(\"button\", { disabled: comment.newReply.length === 0, type: \"submit\", className: \"comment__button comment__button--primary\" }, strings.REPLY),\r\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", onClick: onClickCancelReply, className: \"comment__button\" }, strings.CANCEL))));\r\n        }\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(\"ul\", { className: \"comment__replies\" }, replies),\r\n            replyForm));\r\n    };\r\n    CommentComponent.prototype.renderCreating = function () {\r\n        var _this = this;\r\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\r\n        var onChangeText = function (value) {\r\n            store.dispatch(comments_2.updateComment(comment.localId, {\r\n                newText: value,\r\n            }));\r\n        };\r\n        var onSave = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        e.preventDefault();\r\n                        return [4 /*yield*/, saveComment(comment, store)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        var onCancel = function (e) {\r\n            e.preventDefault();\r\n            store.dispatch(comments_2.deleteComment(comment.localId));\r\n        };\r\n        var descriptionId = \"comment-description-\" + comment.localId;\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { descriptionId: descriptionId, commentReply: comment, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"form\", { onSubmit: onSave },\r\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { focusTarget: isFocused, className: \"comment__input\", value: comment.newText, onChange: onChangeText, placeholder: \"Enter your comments...\", additionalAttributes: {\r\n                        'aria-describedby': descriptionId\r\n                    } }),\r\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__actions\" },\r\n                    react_1[\"default\"].createElement(\"button\", { disabled: comment.newText.length === 0, type: \"submit\", className: \"comment__button comment__button--primary\" }, strings.COMMENT),\r\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", onClick: onCancel, className: \"comment__button\" }, strings.CANCEL)))));\r\n    };\r\n    CommentComponent.prototype.renderEditing = function () {\r\n        var _this = this;\r\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\r\n        var onChangeText = function (value) {\r\n            store.dispatch(comments_2.updateComment(comment.localId, {\r\n                newText: value,\r\n            }));\r\n        };\r\n        var onSave = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        e.preventDefault();\r\n                        return [4 /*yield*/, saveComment(comment, store)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        var onCancel = function (e) {\r\n            e.preventDefault();\r\n            store.dispatch(comments_2.updateComment(comment.localId, {\r\n                mode: 'default',\r\n                newText: comment.text,\r\n            }));\r\n        };\r\n        var descriptionId = \"comment-description-\" + comment.localId;\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { descriptionId: descriptionId, commentReply: comment, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"form\", { onSubmit: onSave },\r\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { focusTarget: isFocused, className: \"comment__input\", value: comment.newText, additionalAttributes: {\r\n                        'aria-describedby': descriptionId\r\n                    }, onChange: onChangeText }),\r\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__actions\" },\r\n                    react_1[\"default\"].createElement(\"button\", { disabled: comment.newText.length === 0, type: \"submit\", className: \"comment__button comment__button--primary\" }, strings.SAVE),\r\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", onClick: onCancel, className: \"comment__button\" }, strings.CANCEL))),\r\n            this.renderReplies({ hideNewReply: true })));\r\n    };\r\n    CommentComponent.prototype.renderSaving = function () {\r\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings;\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\r\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__progress\" }, strings.SAVING),\r\n            this.renderReplies({ hideNewReply: true })));\r\n    };\r\n    CommentComponent.prototype.renderSaveError = function () {\r\n        var _this = this;\r\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings;\r\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        e.preventDefault();\r\n                        return [4 /*yield*/, saveComment(comment, store)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\r\n            this.renderReplies({ hideNewReply: true }),\r\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__error\" },\r\n                strings.SAVE_ERROR,\r\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickRetry }, strings.RETRY))));\r\n    };\r\n    CommentComponent.prototype.renderDeleteConfirm = function () {\r\n        var _this = this;\r\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings;\r\n        var onClickDelete = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        e.preventDefault();\r\n                        return [4 /*yield*/, doDeleteComment(comment, store)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        var onClickCancel = function (e) {\r\n            e.preventDefault();\r\n            store.dispatch(comments_2.updateComment(comment.localId, {\r\n                mode: 'default',\r\n            }));\r\n        };\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\r\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__confirm-delete\" },\r\n                strings.CONFIRM_DELETE_COMMENT,\r\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button comment__button--red\", onClick: onClickDelete }, strings.DELETE),\r\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickCancel }, strings.CANCEL)),\r\n            this.renderReplies({ hideNewReply: true })));\r\n    };\r\n    CommentComponent.prototype.renderDeleting = function () {\r\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings;\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\r\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__progress\" }, strings.DELETING),\r\n            this.renderReplies({ hideNewReply: true })));\r\n    };\r\n    CommentComponent.prototype.renderDeleteError = function () {\r\n        var _this = this;\r\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings;\r\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        e.preventDefault();\r\n                        return [4 /*yield*/, doDeleteComment(comment, store)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        var onClickCancel = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                e.preventDefault();\r\n                store.dispatch(comments_2.updateComment(comment.localId, {\r\n                    mode: 'default',\r\n                }));\r\n                return [2 /*return*/];\r\n            });\r\n        }); };\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\r\n            this.renderReplies({ hideNewReply: true }),\r\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__error\" },\r\n                strings.DELETE_ERROR,\r\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickCancel }, strings.CANCEL),\r\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickRetry }, strings.RETRY))));\r\n    };\r\n    CommentComponent.prototype.renderDefault = function () {\r\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings;\r\n        // Show edit/delete buttons if this comment was authored by the current user\r\n        var onEdit;\r\n        var onDelete;\r\n        if (comment.author === null || this.props.user && this.props.user.id === comment.author.id) {\r\n            onEdit = function () {\r\n                store.dispatch(comments_2.updateComment(comment.localId, {\r\n                    mode: 'editing',\r\n                    newText: comment.text,\r\n                }));\r\n            };\r\n            onDelete = function () {\r\n                store.dispatch(comments_2.updateComment(comment.localId, {\r\n                    mode: 'delete_confirm',\r\n                }));\r\n            };\r\n        }\r\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings, onResolve: doResolveComment, onEdit: onEdit, onDelete: onDelete }),\r\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\r\n            this.renderReplies()));\r\n    };\r\n    CommentComponent.prototype.render = function () {\r\n        var _this = this;\r\n        var inner;\r\n        switch (this.props.comment.mode) {\r\n            case 'creating':\r\n                inner = this.renderCreating();\r\n                break;\r\n            case 'editing':\r\n                inner = this.renderEditing();\r\n                break;\r\n            case 'saving':\r\n                inner = this.renderSaving();\r\n                break;\r\n            case 'save_error':\r\n                inner = this.renderSaveError();\r\n                break;\r\n            case 'delete_confirm':\r\n                inner = this.renderDeleteConfirm();\r\n                break;\r\n            case 'deleting':\r\n                inner = this.renderDeleting();\r\n                break;\r\n            case 'delete_error':\r\n                inner = this.renderDeleteError();\r\n                break;\r\n            default:\r\n                inner = this.renderDefault();\r\n                break;\r\n        }\r\n        var onClick = function () {\r\n            _this.props.store.dispatch(comments_2.setFocusedComment(_this.props.comment.localId, { updatePinnedComment: false, forceFocus: true }));\r\n        };\r\n        var onDoubleClick = function () {\r\n            _this.props.store.dispatch(comments_2.setFocusedComment(_this.props.comment.localId, { updatePinnedComment: true, forceFocus: true }));\r\n        };\r\n        var top = this.props.layout.getCommentPosition(this.props.comment.localId);\r\n        var right = this.props.isFocused ? 50 : 0;\r\n        return (react_1[\"default\"].createElement(focus_trap_react_1[\"default\"], { focusTrapOptions: {\r\n                preventScroll: true,\r\n                clickOutsideDeactivates: true,\r\n                onDeactivate: function () {\r\n                    _this.props.store.dispatch(comments_2.setFocusedComment(null, { updatePinnedComment: true, forceFocus: false }));\r\n                },\r\n                initialFocus: '[data-focus-target=\"true\"]',\r\n            }, active: this.props.isFocused && this.props.forceFocus },\r\n            react_1[\"default\"].createElement(\"li\", { tabIndex: -1, \"data-focus-target\": this.props.isFocused && !['creating', 'editing'].includes(this.props.comment.mode), key: this.props.comment.localId, className: \"comment comment--mode-\" + this.props.comment.mode + \" \" + (this.props.isFocused ? 'comment--focused' : ''), style: {\r\n                    position: 'absolute',\r\n                    top: top + \"px\",\r\n                    right: right + \"px\",\r\n                    display: this.props.isVisible ? 'block' : 'none',\r\n                }, \"data-comment-id\": this.props.comment.localId, onClick: onClick, onDoubleClick: onDoubleClick }, inner)));\r\n    };\r\n    CommentComponent.prototype.componentDidMount = function () {\r\n        var element = react_dom_1[\"default\"].findDOMNode(this);\r\n        if (element instanceof HTMLElement) {\r\n            this.props.layout.setCommentElement(this.props.comment.localId, element);\r\n            if (this.props.isVisible) {\r\n                this.props.layout.setCommentHeight(this.props.comment.localId, element.offsetHeight);\r\n            }\r\n        }\r\n    };\r\n    CommentComponent.prototype.componentWillUnmount = function () {\r\n        this.props.layout.setCommentElement(this.props.comment.localId, null);\r\n    };\r\n    CommentComponent.prototype.componentDidUpdate = function () {\r\n        var element = react_dom_1[\"default\"].findDOMNode(this);\r\n        // Keep height up to date so that other comments will be moved out of the way\r\n        if (this.props.isVisible && element instanceof HTMLElement) {\r\n            this.props.layout.setCommentHeight(this.props.comment.localId, element.offsetHeight);\r\n        }\r\n    };\r\n    return CommentComponent;\r\n}(react_1[\"default\"].Component));\r\nexports[\"default\"] = CommentComponent;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nexports.CommentFormSetComponent = exports.CommentFormComponent = exports.CommentReplyFormSetComponent = exports.CommentReplyFormComponent = void 0;\r\nvar react_1 = __importDefault(require(\"react\"));\r\nfunction PrefixedHiddenInput(_a) {\r\n    var prefix = _a.prefix, value = _a.value, fieldName = _a.fieldName;\r\n    return (react_1[\"default\"].createElement(\"input\", { type: \"hidden\", name: prefix + \"-\" + fieldName, value: value === null ? '' : value, id: \"id_\" + prefix + \"-\" + fieldName }));\r\n}\r\nfunction CommentReplyFormComponent(_a) {\r\n    var reply = _a.reply, formNumber = _a.formNumber, prefix = _a.prefix;\r\n    var fullPrefix = prefix + \"-\" + formNumber;\r\n    return (react_1[\"default\"].createElement(\"fieldset\", null,\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"DELETE\", value: reply.deleted ? 1 : '', prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"id\", value: reply.remoteId, prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"text\", value: reply.text, prefix: fullPrefix })));\r\n}\r\nexports.CommentReplyFormComponent = CommentReplyFormComponent;\r\nfunction CommentReplyFormSetComponent(_a) {\r\n    var replies = _a.replies, prefix = _a.prefix, remoteReplyCount = _a.remoteReplyCount;\r\n    var fullPrefix = prefix + \"-replies\";\r\n    var commentForms = replies.map(function (reply, formNumber) { return (react_1[\"default\"].createElement(CommentReplyFormComponent, { key: reply.localId, formNumber: formNumber, reply: reply, prefix: fullPrefix })); });\r\n    return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"TOTAL_FORMS\", value: replies.length, prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"INITIAL_FORMS\", value: remoteReplyCount, prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MIN_NUM_FORMS\", value: \"0\", prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MAX_NUM_FORMS\", value: \"\", prefix: fullPrefix }),\r\n        commentForms));\r\n}\r\nexports.CommentReplyFormSetComponent = CommentReplyFormSetComponent;\r\nfunction CommentFormComponent(_a) {\r\n    var comment = _a.comment, formNumber = _a.formNumber, prefix = _a.prefix;\r\n    var fullPrefix = prefix + \"-\" + formNumber;\r\n    return (react_1[\"default\"].createElement(\"fieldset\", null,\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"DELETE\", value: comment.deleted ? 1 : '', prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"resolved\", value: comment.resolved ? 1 : '', prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"id\", value: comment.remoteId, prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"contentpath\", value: comment.contentpath, prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"text\", value: comment.text, prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"position\", value: comment.position, prefix: fullPrefix }),\r\n        react_1[\"default\"].createElement(CommentReplyFormSetComponent, { replies: Array.from(comment.replies.values()), prefix: fullPrefix, remoteReplyCount: comment.remoteReplyCount })));\r\n}\r\nexports.CommentFormComponent = CommentFormComponent;\r\nfunction CommentFormSetComponent(_a) {\r\n    var comments = _a.comments, remoteCommentCount = _a.remoteCommentCount;\r\n    var prefix = 'comments';\r\n    var commentForms = comments.map(function (comment, formNumber) { return (react_1[\"default\"].createElement(CommentFormComponent, { key: comment.localId, comment: comment, formNumber: formNumber, prefix: prefix })); });\r\n    return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"TOTAL_FORMS\", value: comments.length, prefix: prefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"INITIAL_FORMS\", value: remoteCommentCount, prefix: prefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MIN_NUM_FORMS\", value: \"0\", prefix: prefix }),\r\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MAX_NUM_FORMS\", value: \"\", prefix: prefix }),\r\n        commentForms));\r\n}\r\nexports.CommentFormSetComponent = CommentFormSetComponent;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar TextArea = react_1[\"default\"].forwardRef(function (_a, ref) {\r\n    var value = _a.value, className = _a.className, placeholder = _a.placeholder, onChange = _a.onChange, focusOnMount = _a.focusOnMount, _b = _a.focusTarget, focusTarget = _b === void 0 ? false : _b, _c = _a.additionalAttributes, additionalAttributes = _c === void 0 ? {} : _c;\r\n    var onChangeValue = function (e) {\r\n        if (onChange) {\r\n            onChange(e.target.value);\r\n        }\r\n    };\r\n    // Resize the textarea whenever the value is changed\r\n    var textAreaElement = react_1[\"default\"].useRef(null);\r\n    react_1[\"default\"].useImperativeHandle(ref, function () { return textAreaElement.current; });\r\n    react_1[\"default\"].useEffect(function () {\r\n        if (textAreaElement.current) {\r\n            textAreaElement.current.style.height = '';\r\n            textAreaElement.current.style.height =\r\n                textAreaElement.current.scrollHeight + 'px';\r\n        }\r\n    }, [value, textAreaElement]);\r\n    // Focus the textarea when it is mounted\r\n    react_1[\"default\"].useEffect(function () {\r\n        if (focusOnMount && textAreaElement.current) {\r\n            textAreaElement.current.focus();\r\n        }\r\n    }, [textAreaElement]);\r\n    return (react_1[\"default\"].createElement(\"textarea\", __assign({ \"data-focus-target\": focusTarget, rows: 1, style: { resize: 'none', overflowY: 'hidden' }, className: className, placeholder: placeholder, ref: textAreaElement, onChange: onChangeValue, value: value }, additionalAttributes)));\r\n});\r\nexports[\"default\"] = TextArea;\r\n","\"use strict\";\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nexports.initCommentApp = exports.CommentApp = exports.defaultStrings = void 0;\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar react_dom_1 = __importDefault(require(\"react-dom\"));\r\nvar redux_1 = require(\"redux\");\r\nvar layout_1 = require(\"./utils/layout\");\r\nvar maps_1 = require(\"./utils/maps\");\r\nvar sequences_1 = require(\"./utils/sequences\");\r\nvar state_1 = require(\"./state\");\r\nvar comments_1 = require(\"./state/comments\");\r\nvar comments_2 = require(\"./actions/comments\");\r\nvar settings_1 = require(\"./actions/settings\");\r\nvar selectors_1 = require(\"./selectors\");\r\nvar Comment_1 = __importDefault(require(\"./components/Comment\"));\r\nvar Form_1 = require(\"./components/Form\");\r\nvar settings_2 = require(\"./state/settings\");\r\nexports.defaultStrings = {\r\n    COMMENT: 'Comment',\r\n    SAVE: 'Save',\r\n    SAVING: 'Saving...',\r\n    CANCEL: 'Cancel',\r\n    DELETE: 'Delete',\r\n    DELETING: 'Deleting...',\r\n    SHOW_COMMENTS: 'Show comments',\r\n    EDIT: 'Edit',\r\n    REPLY: 'Reply',\r\n    RESOLVE: 'Resolve',\r\n    RETRY: 'Retry',\r\n    DELETE_ERROR: 'Delete error',\r\n    CONFIRM_DELETE_COMMENT: 'Are you sure?',\r\n    SAVE_ERROR: 'Save error',\r\n    MORE_ACTIONS: 'More actions',\r\n};\r\n/* eslint-enable */\r\n// eslint-disable-next-line camelcase\r\nvar getAuthor = function (authors, id) {\r\n    var authorData = maps_1.getOrDefault(authors, String(id), { name: '', avatar_url: '' });\r\n    return {\r\n        id: id,\r\n        name: authorData.name,\r\n        avatarUrl: authorData.avatar_url,\r\n    };\r\n};\r\nfunction renderCommentsUi(store, layout, comments, strings) {\r\n    var state = store.getState();\r\n    var _a = state.settings, commentsEnabled = _a.commentsEnabled, user = _a.user, currentTab = _a.currentTab;\r\n    var _b = state.comments, focusedComment = _b.focusedComment, forceFocus = _b.forceFocus;\r\n    var commentsToRender = comments;\r\n    if (!commentsEnabled || !user) {\r\n        commentsToRender = [];\r\n    }\r\n    // Hide all resolved/deleted comments\r\n    commentsToRender = commentsToRender.filter(function (_a) {\r\n        var deleted = _a.deleted, resolved = _a.resolved;\r\n        return !(deleted || resolved);\r\n    });\r\n    var commentsRendered = commentsToRender.map(function (comment) { return (react_1[\"default\"].createElement(Comment_1[\"default\"], { key: comment.localId, store: store, layout: layout, user: user, comment: comment, isFocused: comment.localId === focusedComment, forceFocus: forceFocus, isVisible: layout.getCommentVisible(currentTab, comment.localId), strings: strings })); });\r\n    return (react_1[\"default\"].createElement(\"ol\", { className: \"comments-list\" }, commentsRendered));\r\n    /* eslint-enable react/no-danger */\r\n}\r\nvar CommentApp = /** @class */ (function () {\r\n    function CommentApp() {\r\n        this.utils = {\r\n            selectCommentsForContentPathFactory: selectors_1.selectCommentsForContentPathFactory,\r\n            selectCommentFactory: selectors_1.selectCommentFactory\r\n        };\r\n        this.selectors = {\r\n            selectComments: selectors_1.selectComments,\r\n            selectEnabled: selectors_1.selectEnabled,\r\n            selectFocused: selectors_1.selectFocused,\r\n            selectIsDirty: selectors_1.selectIsDirty,\r\n            selectCommentCount: selectors_1.selectCommentCount\r\n        };\r\n        this.actions = comments_2.commentActionFunctions;\r\n        this.store = redux_1.createStore(state_1.reducer, {\r\n            settings: settings_2.INITIAL_STATE\r\n        });\r\n        this.layout = new layout_1.LayoutController();\r\n    }\r\n    // eslint-disable-next-line camelcase\r\n    CommentApp.prototype.setUser = function (userId, authors) {\r\n        this.store.dispatch(settings_1.updateGlobalSettings({\r\n            user: getAuthor(authors, userId)\r\n        }));\r\n    };\r\n    CommentApp.prototype.updateAnnotation = function (annotation, commentId) {\r\n        this.attachAnnotationLayout(annotation, commentId);\r\n        this.store.dispatch(comments_2.updateComment(commentId, { annotation: annotation }));\r\n    };\r\n    CommentApp.prototype.attachAnnotationLayout = function (annotation, commentId) {\r\n        // Attach an annotation to an existing comment in the layout\r\n        // const layout engine know the annotation so it would position the comment correctly\r\n        this.layout.setCommentAnnotation(commentId, annotation);\r\n    };\r\n    CommentApp.prototype.setCurrentTab = function (tab) {\r\n        this.store.dispatch(settings_1.updateGlobalSettings({ currentTab: tab }));\r\n    };\r\n    CommentApp.prototype.makeComment = function (annotation, contentpath, position) {\r\n        if (position === void 0) { position = ''; }\r\n        var commentId = sequences_1.getNextCommentId();\r\n        this.attachAnnotationLayout(annotation, commentId);\r\n        // Create the comment\r\n        this.store.dispatch(comments_2.addComment(comments_1.newComment(contentpath, position, commentId, annotation, this.store.getState().settings.user, Date.now(), {\r\n            mode: 'creating',\r\n        })));\r\n        // Focus and pin the comment\r\n        this.store.dispatch(comments_2.setFocusedComment(commentId, { updatePinnedComment: true, forceFocus: true }));\r\n        return commentId;\r\n    };\r\n    CommentApp.prototype.setVisible = function (visible) {\r\n        this.store.dispatch(settings_1.updateGlobalSettings({\r\n            commentsEnabled: visible,\r\n        }));\r\n    };\r\n    CommentApp.prototype.invalidateContentPath = function (contentPath) {\r\n        // Called when a given content path on the form is no longer valid (eg, a block has been deleted)\r\n        this.store.dispatch(comments_2.invalidateContentPath(contentPath));\r\n    };\r\n    CommentApp.prototype.renderApp = function (element, outputElement, userId, initialComments, \r\n    // eslint-disable-next-line camelcase\r\n    authors, translationStrings) {\r\n        var e_1, _a, e_2, _b;\r\n        var _this = this;\r\n        var pinnedComment = null;\r\n        this.setUser(userId, authors);\r\n        var strings = translationStrings || exports.defaultStrings;\r\n        // Check if there is \"comment\" query parameter.\r\n        // If this is set, the user has clicked on a \"View on frontend\" link of an\r\n        // individual comment. We should focus this comment and scroll to it\r\n        var urlParams = new URLSearchParams(window.location.search);\r\n        var initialFocusedCommentId = null;\r\n        var commentParams = urlParams.get('comment');\r\n        if (commentParams) {\r\n            initialFocusedCommentId = parseInt(commentParams, 10);\r\n        }\r\n        var render = function () {\r\n            var state = _this.store.getState();\r\n            var commentList = Array.from(state.comments.comments.values());\r\n            react_dom_1[\"default\"].render(react_1[\"default\"].createElement(Form_1.CommentFormSetComponent, { comments: commentList.filter(function (comment) { return comment.mode !== 'creating'; }), remoteCommentCount: state.comments.remoteCommentCount }), outputElement);\r\n            // Check if the pinned comment has changed\r\n            if (state.comments.pinnedComment !== pinnedComment) {\r\n                // Tell layout controller about the pinned comment\r\n                // so it is moved alongside its annotation\r\n                _this.layout.setPinnedComment(state.comments.pinnedComment);\r\n                pinnedComment = state.comments.pinnedComment;\r\n            }\r\n            react_dom_1[\"default\"].render(renderCommentsUi(_this.store, _this.layout, commentList, strings), element, function () {\r\n                // Render again if layout has changed (eg, a comment was added, deleted or resized)\r\n                // This will just update the \"top\" style attributes in the comments to get them to move\r\n                _this.layout.refreshDesiredPositions(state.settings.currentTab);\r\n                if (_this.layout.refreshLayout()) {\r\n                    react_dom_1[\"default\"].render(renderCommentsUi(_this.store, _this.layout, commentList, strings), element);\r\n                }\r\n            });\r\n        };\r\n        try {\r\n            // Fetch existing comments\r\n            for (var initialComments_1 = __values(initialComments), initialComments_1_1 = initialComments_1.next(); !initialComments_1_1.done; initialComments_1_1 = initialComments_1.next()) {\r\n                var comment = initialComments_1_1.value;\r\n                var commentId = sequences_1.getNextCommentId();\r\n                // Create comment\r\n                this.store.dispatch(comments_2.addComment(comments_1.newComment(comment.contentpath, comment.position, commentId, null, getAuthor(authors, comment.user), Date.parse(comment.created_at), {\r\n                    remoteId: comment.pk,\r\n                    text: comment.text,\r\n                    deleted: comment.deleted,\r\n                    resolved: comment.resolved\r\n                })));\r\n                try {\r\n                    // Create replies\r\n                    for (var _c = (e_2 = void 0, __values(comment.replies)), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var reply = _d.value;\r\n                        this.store.dispatch(comments_2.addReply(commentId, comments_1.newCommentReply(sequences_1.getNextReplyId(), getAuthor(authors, reply.user), Date.parse(reply.created_at), {\r\n                            remoteId: reply.pk,\r\n                            text: reply.text,\r\n                            deleted: reply.deleted\r\n                        })));\r\n                    }\r\n                }\r\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c[\"return\"])) _b.call(_c);\r\n                    }\r\n                    finally { if (e_2) throw e_2.error; }\r\n                }\r\n                // If this is the initial focused comment. Focus and pin it\r\n                // TODO: Scroll to this comment\r\n                if (initialFocusedCommentId && comment.pk === initialFocusedCommentId) {\r\n                    this.store.dispatch(comments_2.setFocusedComment(commentId, { updatePinnedComment: true, forceFocus: true }));\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (initialComments_1_1 && !initialComments_1_1.done && (_a = initialComments_1[\"return\"])) _a.call(initialComments_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        render();\r\n        this.store.subscribe(render);\r\n        // Unfocus when document body is clicked\r\n        document.body.addEventListener('mousedown', function (e) {\r\n            if (e.target instanceof HTMLElement) {\r\n                // ignore if click target is a comment or an annotation\r\n                if (!e.target.closest('#comments, [data-annotation], [data-comment-add]')) {\r\n                    // Running store.dispatch directly here seems to prevent the event from being handled anywhere else\r\n                    setTimeout(function () {\r\n                        _this.store.dispatch(comments_2.setFocusedComment(null, { updatePinnedComment: true, forceFocus: false }));\r\n                    }, 200);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    return CommentApp;\r\n}());\r\nexports.CommentApp = CommentApp;\r\nfunction initCommentApp() {\r\n    return new CommentApp();\r\n}\r\nexports.initCommentApp = initCommentApp;\r\n","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nexports.__esModule = true;\r\nexports.selectCommentCount = exports.selectIsDirty = exports.selectEnabled = exports.selectCommentFactory = exports.selectCommentsForContentPathFactory = exports.selectRemoteCommentCount = exports.selectFocused = exports.selectComments = void 0;\r\nvar reselect_1 = require(\"reselect\");\r\nvar selectComments = function (state) { return state.comments.comments; };\r\nexports.selectComments = selectComments;\r\nvar selectFocused = function (state) { return state.comments.focusedComment; };\r\nexports.selectFocused = selectFocused;\r\nvar selectRemoteCommentCount = function (state) { return state.comments.remoteCommentCount; };\r\nexports.selectRemoteCommentCount = selectRemoteCommentCount;\r\nfunction selectCommentsForContentPathFactory(contentpath) {\r\n    return reselect_1.createSelector(exports.selectComments, function (comments) {\r\n        return __spreadArray([], __read(comments.values())).filter(function (comment) {\r\n            return comment.contentpath === contentpath && !(comment.deleted || comment.resolved);\r\n        });\r\n    });\r\n}\r\nexports.selectCommentsForContentPathFactory = selectCommentsForContentPathFactory;\r\nfunction selectCommentFactory(localId) {\r\n    return reselect_1.createSelector(exports.selectComments, function (comments) {\r\n        var comment = comments.get(localId);\r\n        if (comment !== undefined && (comment.deleted || comment.resolved)) {\r\n            return undefined;\r\n        }\r\n        return comment;\r\n    });\r\n}\r\nexports.selectCommentFactory = selectCommentFactory;\r\nvar selectEnabled = function (state) { return state.settings.commentsEnabled; };\r\nexports.selectEnabled = selectEnabled;\r\nexports.selectIsDirty = reselect_1.createSelector(exports.selectComments, exports.selectRemoteCommentCount, function (comments, remoteCommentCount) {\r\n    if (remoteCommentCount !== comments.size) {\r\n        return true;\r\n    }\r\n    return Array.from(comments.values()).some(function (comment) {\r\n        if (comment.deleted ||\r\n            comment.resolved ||\r\n            comment.replies.size !== comment.remoteReplyCount ||\r\n            comment.originalText !== comment.text) {\r\n            return true;\r\n        }\r\n        return Array.from(comment.replies.values()).some(function (reply) { return reply.deleted || reply.originalText !== reply.text; });\r\n    });\r\n});\r\nvar selectCommentCount = function (state) { return (__spreadArray([], __read(state.comments.comments.values())).filter(function (comment) { return !comment.deleted && !comment.resolved; }).length); };\r\nexports.selectCommentCount = selectCommentCount;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nexports.__esModule = true;\r\nexports.reducer = exports.INITIAL_STATE = exports.newComment = exports.newCommentReply = void 0;\r\nvar actions = __importStar(require(\"../actions/comments\"));\r\nvar utils_1 = require(\"./utils\");\r\nvar immer_1 = __importStar(require(\"immer\"));\r\nimmer_1.enableES5();\r\nimmer_1.enableMapSet();\r\nfunction newCommentReply(localId, author, date, _a) {\r\n    var _b = _a.remoteId, remoteId = _b === void 0 ? null : _b, _c = _a.mode, mode = _c === void 0 ? 'default' : _c, _d = _a.text, text = _d === void 0 ? '' : _d, _e = _a.deleted, deleted = _e === void 0 ? false : _e;\r\n    return {\r\n        localId: localId,\r\n        remoteId: remoteId,\r\n        mode: mode,\r\n        author: author,\r\n        date: date,\r\n        text: text,\r\n        originalText: text,\r\n        newText: '',\r\n        deleted: deleted,\r\n    };\r\n}\r\nexports.newCommentReply = newCommentReply;\r\nfunction newComment(contentpath, position, localId, annotation, author, date, _a) {\r\n    var _b = _a.remoteId, remoteId = _b === void 0 ? null : _b, _c = _a.mode, mode = _c === void 0 ? 'default' : _c, _d = _a.text, text = _d === void 0 ? '' : _d, _e = _a.resolved, resolved = _e === void 0 ? false : _e, _f = _a.deleted, deleted = _f === void 0 ? false : _f, _g = _a.replies, replies = _g === void 0 ? new Map() : _g;\r\n    return {\r\n        contentpath: contentpath,\r\n        position: position,\r\n        localId: localId,\r\n        annotation: annotation,\r\n        remoteId: remoteId,\r\n        mode: mode,\r\n        author: author,\r\n        date: date,\r\n        text: text,\r\n        originalText: text,\r\n        replies: replies,\r\n        newReply: '',\r\n        newText: '',\r\n        deleted: deleted,\r\n        resolved: resolved,\r\n        remoteReplyCount: Array.from(replies.values()).reduce(function (n, reply) { return (reply.remoteId !== null ? n + 1 : n); }, 0),\r\n    };\r\n}\r\nexports.newComment = newComment;\r\nexports.INITIAL_STATE = {\r\n    comments: new Map(),\r\n    forceFocus: false,\r\n    focusedComment: null,\r\n    pinnedComment: null,\r\n    remoteCommentCount: 0,\r\n};\r\nexports.reducer = immer_1[\"default\"](function (draft, action) {\r\n    var e_1, _a;\r\n    /* eslint-disable no-param-reassign */\r\n    var deleteComment = function (comment) {\r\n        if (!comment.remoteId) {\r\n            // If the comment doesn't exist in the database, there's no need to keep it around locally\r\n            draft.comments[\"delete\"](comment.localId);\r\n        }\r\n        else {\r\n            comment.deleted = true;\r\n        }\r\n        // Unset focusedComment if the focused comment is the one being deleted\r\n        if (draft.focusedComment === comment.localId) {\r\n            draft.focusedComment = null;\r\n            draft.forceFocus = false;\r\n        }\r\n        if (draft.pinnedComment === comment.localId) {\r\n            draft.pinnedComment = null;\r\n        }\r\n    };\r\n    var resolveComment = function (comment) {\r\n        if (!comment.remoteId) {\r\n            // If the comment doesn't exist in the database, there's no need to keep it around locally\r\n            draft.comments[\"delete\"](comment.localId);\r\n        }\r\n        else {\r\n            comment.resolved = true;\r\n        }\r\n        // Unset focusedComment if the focused comment is the one being resolved\r\n        if (draft.focusedComment === comment.localId) {\r\n            draft.focusedComment = null;\r\n        }\r\n        if (draft.pinnedComment === comment.localId) {\r\n            draft.pinnedComment = null;\r\n        }\r\n    };\r\n    switch (action.type) {\r\n        case actions.ADD_COMMENT: {\r\n            draft.comments.set(action.comment.localId, action.comment);\r\n            if (action.comment.remoteId) {\r\n                draft.remoteCommentCount += 1;\r\n            }\r\n            break;\r\n        }\r\n        case actions.UPDATE_COMMENT: {\r\n            var comment = draft.comments.get(action.commentId);\r\n            if (comment) {\r\n                if (action.update.newText && action.update.newText.length === 0) {\r\n                    break;\r\n                }\r\n                utils_1.update(comment, action.update);\r\n            }\r\n            break;\r\n        }\r\n        case actions.DELETE_COMMENT: {\r\n            var comment = draft.comments.get(action.commentId);\r\n            if (!comment) {\r\n                break;\r\n            }\r\n            deleteComment(comment);\r\n            break;\r\n        }\r\n        case actions.RESOLVE_COMMENT: {\r\n            var comment = draft.comments.get(action.commentId);\r\n            if (!comment) {\r\n                break;\r\n            }\r\n            resolveComment(comment);\r\n            break;\r\n        }\r\n        case actions.SET_FOCUSED_COMMENT: {\r\n            if ((action.commentId === null) || (draft.comments.has(action.commentId))) {\r\n                draft.focusedComment = action.commentId;\r\n                if (action.updatePinnedComment) {\r\n                    draft.pinnedComment = action.commentId;\r\n                }\r\n                draft.forceFocus = action.forceFocus;\r\n            }\r\n            break;\r\n        }\r\n        case actions.ADD_REPLY: {\r\n            var comment = draft.comments.get(action.commentId);\r\n            if ((!comment) || action.reply.text.length === 0) {\r\n                break;\r\n            }\r\n            if (action.reply.remoteId) {\r\n                comment.remoteReplyCount += 1;\r\n            }\r\n            comment.replies.set(action.reply.localId, action.reply);\r\n            break;\r\n        }\r\n        case actions.UPDATE_REPLY: {\r\n            var comment = draft.comments.get(action.commentId);\r\n            if (!comment) {\r\n                break;\r\n            }\r\n            var reply = comment.replies.get(action.replyId);\r\n            if (!reply) {\r\n                break;\r\n            }\r\n            if (action.update.newText && action.update.newText.length === 0) {\r\n                break;\r\n            }\r\n            utils_1.update(reply, action.update);\r\n            break;\r\n        }\r\n        case actions.DELETE_REPLY: {\r\n            var comment = draft.comments.get(action.commentId);\r\n            if (!comment) {\r\n                break;\r\n            }\r\n            var reply = comment.replies.get(action.replyId);\r\n            if (!reply) {\r\n                break;\r\n            }\r\n            if (!reply.remoteId) {\r\n                // The reply doesn't exist in the database, so we don't need to store it locally\r\n                comment.replies[\"delete\"](reply.localId);\r\n            }\r\n            else {\r\n                reply.deleted = true;\r\n            }\r\n            break;\r\n        }\r\n        case actions.INVALIDATE_CONTENT_PATH: {\r\n            // Delete any comments that exist in the contentpath\r\n            var comments = draft.comments;\r\n            try {\r\n                for (var _b = __values(comments.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var comment = _c.value;\r\n                    if (comment.contentpath.startsWith(action.contentPath)) {\r\n                        resolveComment(comment);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n            break;\r\n        }\r\n        default:\r\n            break;\r\n    }\r\n}, exports.INITIAL_STATE);\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.reducer = void 0;\r\nvar redux_1 = require(\"redux\");\r\nvar comments_1 = require(\"./comments\");\r\nvar settings_1 = require(\"./settings\");\r\nexports.reducer = redux_1.combineReducers({\r\n    comments: comments_1.reducer,\r\n    settings: settings_1.reducer,\r\n});\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nexports.reducer = exports.INITIAL_STATE = void 0;\r\nvar actions = __importStar(require(\"../actions/settings\"));\r\nvar utils_1 = require(\"./utils\");\r\nvar immer_1 = __importDefault(require(\"immer\"));\r\n// Reducer with initial state\r\nexports.INITIAL_STATE = {\r\n    user: null,\r\n    commentsEnabled: true,\r\n    showResolvedComments: false,\r\n    currentTab: null,\r\n};\r\nexports.reducer = immer_1[\"default\"](function (draft, action) {\r\n    switch (action.type) {\r\n        case actions.UPDATE_GLOBAL_SETTINGS:\r\n            utils_1.update(draft, action.update);\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}, exports.INITIAL_STATE);\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.update = void 0;\r\nfunction update(base, updatePartial) {\r\n    return Object.assign(base, updatePartial);\r\n}\r\nexports.update = update;\r\n","\"use strict\";\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nexports.__esModule = true;\r\nexports.LayoutController = void 0;\r\nvar maps_1 = require(\"./maps\");\r\nvar GAP = 20.0; // Gap between comments in pixels\r\nvar TOP_MARGIN = 100.0; // Spacing from the top to the first comment in pixels\r\nvar OFFSET = -50; // How many pixels from the annotation position should the comments be placed?\r\nvar LayoutController = /** @class */ (function () {\r\n    function LayoutController() {\r\n        this.commentElements = new Map();\r\n        this.commentAnnotations = new Map();\r\n        this.commentTabs = new Map();\r\n        this.commentDesiredPositions = new Map();\r\n        this.commentHeights = new Map();\r\n        this.pinnedComment = null;\r\n        this.commentCalculatedPositions = new Map();\r\n        this.isDirty = false;\r\n    }\r\n    LayoutController.prototype.setCommentElement = function (commentId, element) {\r\n        if (element !== null) {\r\n            this.commentElements.set(commentId, element);\r\n        }\r\n        else {\r\n            this.commentElements[\"delete\"](commentId);\r\n        }\r\n        this.isDirty = true;\r\n    };\r\n    LayoutController.prototype.setCommentAnnotation = function (commentId, annotation) {\r\n        this.commentAnnotations.set(commentId, annotation);\r\n        this.commentTabs.set(commentId, annotation.getTab() || null);\r\n        this.updateDesiredPosition(commentId);\r\n        this.isDirty = true;\r\n    };\r\n    LayoutController.prototype.setCommentHeight = function (commentId, height) {\r\n        if (this.commentHeights.get(commentId) !== height) {\r\n            this.commentHeights.set(commentId, height);\r\n            this.isDirty = true;\r\n        }\r\n    };\r\n    LayoutController.prototype.setPinnedComment = function (commentId) {\r\n        this.pinnedComment = commentId;\r\n        this.isDirty = true;\r\n    };\r\n    LayoutController.prototype.updateDesiredPosition = function (commentId) {\r\n        var annotation = this.commentAnnotations.get(commentId);\r\n        if (!annotation) {\r\n            return;\r\n        }\r\n        this.commentDesiredPositions.set(commentId, annotation.getDesiredPosition(commentId === this.pinnedComment) + OFFSET);\r\n    };\r\n    LayoutController.prototype.refreshDesiredPositions = function (tab) {\r\n        var _this = this;\r\n        if (tab === void 0) { tab = null; }\r\n        /* Finds the current annotation positions of all the comments on the specified tab */\r\n        var oldDesiredPositions = new Map(this.commentDesiredPositions);\r\n        this.commentAnnotations.forEach(function (_, commentId) {\r\n            if (_this.getCommentVisible(tab, commentId)) {\r\n                _this.updateDesiredPosition(commentId);\r\n            }\r\n        });\r\n        // It's not great to be recalculating all positions so regularly, but Wagtail's FE widgets\r\n        // aren't very constrained so could change layout in any number of ways. If we have a stable FE\r\n        // widget framework in the future, this could be used to trigger the position refresh more\r\n        // intelligently, or alternatively once comments is incorporated into the page form, a\r\n        // MutationObserver could potentially track most types of changes.\r\n        if (this.commentDesiredPositions !== oldDesiredPositions) {\r\n            this.isDirty = true;\r\n        }\r\n    };\r\n    LayoutController.prototype.refreshLayout = function () {\r\n        var _this = this;\r\n        /* Updates positions of all comments based on their annotation locations, and resolves any overlapping comments */\r\n        if (!this.isDirty) {\r\n            return false;\r\n        }\r\n        // Build list of blocks (starting with one for each comment)\r\n        var allBlocks = Array.from(this.commentElements.keys()).map(function (commentId) { return ({\r\n            tab: maps_1.getOrDefault(_this.commentTabs, commentId, null),\r\n            position: maps_1.getOrDefault(_this.commentDesiredPositions, commentId, 0),\r\n            height: maps_1.getOrDefault(_this.commentHeights, commentId, 0),\r\n            comments: [commentId],\r\n            containsPinnedComment: _this.pinnedComment !== null && commentId === _this.pinnedComment,\r\n            pinnedCommentPosition: 0,\r\n        }); });\r\n        // Group blocks by tabs\r\n        var blocksByTab = new Map();\r\n        allBlocks.forEach(function (block) {\r\n            var blocks = blocksByTab.get(block.tab) || [];\r\n            blocks.push(block);\r\n            blocksByTab.set(block.tab, blocks);\r\n        });\r\n        // Get location of pinned comment\r\n        var pinnedCommentPosition = this.pinnedComment ?\r\n            this.commentDesiredPositions.get(this.pinnedComment) : undefined;\r\n        var pinnedCommentTab = this.pinnedComment ?\r\n            this.commentTabs.get(this.pinnedComment) : undefined;\r\n        // For each tab, resolve positions of all the comments\r\n        Array.from(blocksByTab.entries()).forEach(function (_a) {\r\n            var e_1, _b, _c;\r\n            var _d = __read(_a, 2), tab = _d[0], blocks = _d[1];\r\n            var pinnedCommentOnThisTab = _this.pinnedComment && pinnedCommentTab === tab;\r\n            // Sort blocks\r\n            blocks.sort(function (block, comparisonBlock) { return block.position - comparisonBlock.position; });\r\n            // Resolve overlapping blocks\r\n            var currentBlocks = blocks;\r\n            var overlaps = true;\r\n            while (overlaps) {\r\n                overlaps = false;\r\n                var newBlocks = [];\r\n                var previousBlock = null;\r\n                try {\r\n                    for (var currentBlocks_1 = (e_1 = void 0, __values(currentBlocks)), currentBlocks_1_1 = currentBlocks_1.next(); !currentBlocks_1_1.done; currentBlocks_1_1 = currentBlocks_1.next()) {\r\n                        var block = currentBlocks_1_1.value;\r\n                        if (previousBlock) {\r\n                            if (previousBlock.position + previousBlock.height + GAP >\r\n                                block.position) {\r\n                                overlaps = true;\r\n                                // Merge the blocks\r\n                                (_c = previousBlock.comments).push.apply(_c, __spreadArray([], __read(block.comments)));\r\n                                if (block.containsPinnedComment) {\r\n                                    previousBlock.containsPinnedComment = true;\r\n                                    previousBlock.pinnedCommentPosition =\r\n                                        block.pinnedCommentPosition + previousBlock.height;\r\n                                }\r\n                                previousBlock.height += block.height;\r\n                                // Make sure comments don't disappear off the top of the page\r\n                                // But only if a comment isn't focused\r\n                                if (!pinnedCommentOnThisTab &&\r\n                                    previousBlock.position < TOP_MARGIN + OFFSET) {\r\n                                    previousBlock.position =\r\n                                        TOP_MARGIN + previousBlock.height - OFFSET;\r\n                                }\r\n                                // If this block contains the focused comment, position it so\r\n                                // the focused comment is in it's desired position\r\n                                if (pinnedCommentPosition &&\r\n                                    previousBlock.containsPinnedComment) {\r\n                                    previousBlock.position =\r\n                                        pinnedCommentPosition -\r\n                                            previousBlock.pinnedCommentPosition;\r\n                                }\r\n                                continue;\r\n                            }\r\n                        }\r\n                        newBlocks.push(block);\r\n                        previousBlock = block;\r\n                    }\r\n                }\r\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (currentBlocks_1_1 && !currentBlocks_1_1.done && (_b = currentBlocks_1[\"return\"])) _b.call(currentBlocks_1);\r\n                    }\r\n                    finally { if (e_1) throw e_1.error; }\r\n                }\r\n                currentBlocks = newBlocks;\r\n            }\r\n            // Write positions\r\n            currentBlocks.forEach(function (block) {\r\n                var currentPosition = block.position;\r\n                block.comments.forEach(function (commentId) {\r\n                    _this.commentCalculatedPositions.set(commentId, currentPosition);\r\n                    var height = _this.commentHeights.get(commentId);\r\n                    if (height) {\r\n                        currentPosition += height + GAP;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        this.isDirty = false;\r\n        return true;\r\n    };\r\n    LayoutController.prototype.getCommentVisible = function (tab, commentId) {\r\n        var commentTab = maps_1.getOrDefault(this.commentTabs, commentId, null);\r\n        return commentTab === tab;\r\n    };\r\n    LayoutController.prototype.getCommentPosition = function (commentId) {\r\n        if (this.commentCalculatedPositions.has(commentId)) {\r\n            return this.commentCalculatedPositions.get(commentId);\r\n        }\r\n        return this.commentDesiredPositions.get(commentId);\r\n    };\r\n    return LayoutController;\r\n}());\r\nexports.LayoutController = LayoutController;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.getOrDefault = void 0;\r\nfunction getOrDefault(map, key, defaultValue) {\r\n    var value = map.get(key);\r\n    if (typeof value === 'undefined') {\r\n        return defaultValue;\r\n    }\r\n    return value;\r\n}\r\nexports.getOrDefault = getOrDefault;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.getNextReplyId = exports.getNextCommentId = void 0;\r\nvar nextCommentId = 1;\r\nvar nextReplyId = 1;\r\nfunction getNextCommentId() {\r\n    return nextCommentId++;\r\n}\r\nexports.getNextCommentId = getNextCommentId;\r\nfunction getNextReplyId() {\r\n    return nextReplyId++;\r\n}\r\nexports.getNextReplyId = getNextReplyId;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nvar main_1 = require(\"../../components/CommentApp/main\");\r\nvar wagtailConfig_1 = require(\"../../config/wagtailConfig\");\r\nvar KEYCODE_M = 77;\r\n/**\r\n * Entry point loaded when the comments system is in use.\r\n */\r\nwindow.comments = (function () {\r\n    var commentApp = main_1.initCommentApp();\r\n    /**\r\n    * Returns true if the provided keyboard event is using the 'add/focus comment' keyboard\r\n    * shortcut\r\n    */\r\n    function isCommentShortcut(e) {\r\n        return (e.ctrlKey || e.metaKey) && e.altKey && e.keyCode === KEYCODE_M;\r\n    }\r\n    function getContentPath(fieldNode) {\r\n        // Return the total contentpath for an element as a string, in the form field.streamfield_uid.block...\r\n        if (fieldNode.closest('data-contentpath-disabled')) {\r\n            return '';\r\n        }\r\n        var element = fieldNode.closest('[data-contentpath]');\r\n        var contentpaths = [];\r\n        while (element !== null) {\r\n            contentpaths.push(element.dataset.contentpath);\r\n            element = element.parentElement.closest('[data-contentpath]');\r\n        }\r\n        contentpaths.reverse();\r\n        return contentpaths.join('.');\r\n    }\r\n    /**\r\n     * Controls the positioning of a field level comment, and the display of the button\r\n     * used to focus and pin the attached comment\r\n     * `getDesiredPosition` is called by the comments app to determine the height\r\n     * at which to float the comment.\r\n     */\r\n    var BasicFieldLevelAnnotation = /** @class */ (function () {\r\n        /**\r\n        * Create a field-level annotation\r\n        * @param {Element} fieldNode - an element to provide the comment position\r\n        * @param {Element} node - the button to focus/pin the comment\r\n        */\r\n        function BasicFieldLevelAnnotation(fieldNode, node) {\r\n            this.node = node;\r\n            this.fieldNode = fieldNode;\r\n            this.unsubscribe = null;\r\n        }\r\n        /**\r\n        * Subscribes the annotation to update when the state of a particular comment changes,\r\n        * and to focus that comment when clicked\r\n        * @param {number} localId - the localId of the comment to subscribe to\r\n        */\r\n        BasicFieldLevelAnnotation.prototype.subscribeToUpdates = function (localId) {\r\n            var _this = this;\r\n            var _a = commentApp.selectors, selectFocused = _a.selectFocused, selectEnabled = _a.selectEnabled;\r\n            var selectComment = commentApp.utils.selectCommentFactory(localId);\r\n            var store = commentApp.store;\r\n            var initialState = store.getState();\r\n            var focused = selectFocused(initialState) === localId;\r\n            var shown = selectEnabled(initialState);\r\n            if (focused) {\r\n                this.onFocus();\r\n            }\r\n            if (shown) {\r\n                this.show();\r\n            }\r\n            this.unsubscribe = store.subscribe(function () {\r\n                var state = store.getState();\r\n                var comment = selectComment(state);\r\n                if (!comment) {\r\n                    _this.onDelete();\r\n                }\r\n                var nowFocused = (selectFocused(state) === localId);\r\n                if (nowFocused !== focused) {\r\n                    if (focused) {\r\n                        _this.onUnfocus();\r\n                    }\r\n                    else {\r\n                        _this.onFocus();\r\n                    }\r\n                    focused = nowFocused;\r\n                }\r\n                if (shown !== selectEnabled(state)) {\r\n                    if (shown) {\r\n                        _this.hide();\r\n                    }\r\n                    else {\r\n                        _this.show();\r\n                    }\r\n                    shown = selectEnabled(state);\r\n                }\r\n            });\r\n            this.setOnClickHandler(localId);\r\n        };\r\n        BasicFieldLevelAnnotation.prototype.onDelete = function () {\r\n            this.node.remove();\r\n            if (this.unsubscribe) {\r\n                this.unsubscribe();\r\n            }\r\n        };\r\n        BasicFieldLevelAnnotation.prototype.onFocus = function () {\r\n            this.node.classList.remove('button-secondary');\r\n            this.node.ariaLabel = wagtailConfig_1.STRINGS.UNFOCUS_COMMENT;\r\n        };\r\n        BasicFieldLevelAnnotation.prototype.onUnfocus = function () {\r\n            this.node.classList.add('button-secondary');\r\n            this.node.ariaLabel = wagtailConfig_1.STRINGS.FOCUS_COMMENT;\r\n            // TODO: ensure comment is focused accessibly when this is clicked,\r\n            // and that screenreader users can return to the annotation point when desired\r\n        };\r\n        BasicFieldLevelAnnotation.prototype.show = function () {\r\n            this.node.classList.remove('u-hidden');\r\n        };\r\n        BasicFieldLevelAnnotation.prototype.hide = function () {\r\n            this.node.classList.add('u-hidden');\r\n        };\r\n        BasicFieldLevelAnnotation.prototype.setOnClickHandler = function (localId) {\r\n            this.node.addEventListener('click', function () {\r\n                commentApp.store.dispatch(commentApp.actions.setFocusedComment(localId, { updatePinnedComment: true, forceFocus: true }));\r\n            });\r\n        };\r\n        BasicFieldLevelAnnotation.prototype.getTab = function () {\r\n            var _a;\r\n            return (_a = this.fieldNode.closest('section[data-tab]')) === null || _a === void 0 ? void 0 : _a.getAttribute('data-tab');\r\n        };\r\n        BasicFieldLevelAnnotation.prototype.getDesiredPosition = function () {\r\n            return (this.fieldNode.getBoundingClientRect().top +\r\n                document.documentElement.scrollTop);\r\n        };\r\n        return BasicFieldLevelAnnotation;\r\n    }());\r\n    var FieldLevelCommentWidget = /** @class */ (function () {\r\n        function FieldLevelCommentWidget(_a) {\r\n            var fieldNode = _a.fieldNode, commentAdditionNode = _a.commentAdditionNode, annotationTemplateNode = _a.annotationTemplateNode;\r\n            this.fieldNode = fieldNode;\r\n            this.contentpath = getContentPath(fieldNode);\r\n            this.commentAdditionNode = commentAdditionNode;\r\n            this.annotationTemplateNode = annotationTemplateNode;\r\n            this.shown = false;\r\n        }\r\n        FieldLevelCommentWidget.prototype.register = function () {\r\n            var _this = this;\r\n            var selectEnabled = commentApp.selectors.selectEnabled;\r\n            var initialState = commentApp.store.getState();\r\n            var currentlyEnabled = selectEnabled(initialState);\r\n            var selectCommentsForContentPath = commentApp.utils.selectCommentsForContentPathFactory(this.contentpath);\r\n            var currentComments = selectCommentsForContentPath(initialState);\r\n            this.updateVisibility(currentComments.length === 0 && currentlyEnabled);\r\n            var unsubscribeWidget = commentApp.store.subscribe(function () {\r\n                var state = commentApp.store.getState();\r\n                var newComments = selectCommentsForContentPath(state);\r\n                var newEnabled = selectEnabled(state);\r\n                var commentsChanged = (currentComments !== newComments);\r\n                var enabledChanged = (currentlyEnabled !== newEnabled);\r\n                if (commentsChanged) {\r\n                    // Add annotations for any new comments\r\n                    currentComments = newComments;\r\n                    currentComments.filter(function (comment) { return comment.annotation === null; }).forEach(function (comment) {\r\n                        var annotation = _this.getAnnotationForComment(comment);\r\n                        commentApp.updateAnnotation(annotation, comment.localId);\r\n                        annotation.subscribeToUpdates(comment.localId);\r\n                    });\r\n                }\r\n                if (enabledChanged || commentsChanged) {\r\n                    // If comments have been enabled or disabled, or the comments have changed\r\n                    // check whether to show the widget (if comments are enabled and there are no existing comments)\r\n                    currentlyEnabled = newEnabled;\r\n                    _this.updateVisibility(currentComments.length === 0 && currentlyEnabled);\r\n                }\r\n            });\r\n            initialState.comments.comments.forEach(function (comment) {\r\n                // Add annotations for any comments already in the store\r\n                if (comment.contentpath === _this.contentpath) {\r\n                    var annotation = _this.getAnnotationForComment(comment);\r\n                    commentApp.updateAnnotation(annotation, comment.localId);\r\n                    annotation.subscribeToUpdates(comment.localId);\r\n                }\r\n            });\r\n            var addComment = function () {\r\n                var annotation = _this.getAnnotationForComment();\r\n                var localId = commentApp.makeComment(annotation, _this.contentpath);\r\n                annotation.subscribeToUpdates(localId);\r\n            };\r\n            this.commentAdditionNode.addEventListener('click', function () {\r\n                // Make the widget button clickable to add a comment\r\n                addComment();\r\n            });\r\n            this.fieldNode.addEventListener('keyup', function (e) {\r\n                if (currentlyEnabled && isCommentShortcut(e)) {\r\n                    if (currentComments.length === 0) {\r\n                        addComment();\r\n                    }\r\n                    else {\r\n                        commentApp.store.dispatch(commentApp.actions.setFocusedComment(currentComments[0].localId, { updatePinnedComment: true, forceFocus: true }));\r\n                    }\r\n                }\r\n            });\r\n            return unsubscribeWidget; // TODO: listen for widget deletion and use this\r\n        };\r\n        FieldLevelCommentWidget.prototype.updateVisibility = function (newShown) {\r\n            if (newShown === this.shown) {\r\n                return;\r\n            }\r\n            this.shown = newShown;\r\n            if (!this.shown) {\r\n                this.commentAdditionNode.classList.add('u-hidden');\r\n            }\r\n            else {\r\n                this.commentAdditionNode.classList.remove('u-hidden');\r\n            }\r\n        };\r\n        FieldLevelCommentWidget.prototype.getAnnotationForComment = function () {\r\n            var annotationNode = this.annotationTemplateNode.cloneNode(true);\r\n            annotationNode.id = '';\r\n            annotationNode.classList.remove('u-hidden');\r\n            this.commentAdditionNode.insertAdjacentElement('afterend', annotationNode);\r\n            return new BasicFieldLevelAnnotation(this.fieldNode, annotationNode, commentApp);\r\n        };\r\n        return FieldLevelCommentWidget;\r\n    }());\r\n    function initAddCommentButton(buttonElement) {\r\n        var widget = new FieldLevelCommentWidget({\r\n            fieldNode: buttonElement.closest('[data-contentpath]'),\r\n            commentAdditionNode: buttonElement,\r\n            annotationTemplateNode: document.querySelector('#comment-icon'),\r\n        });\r\n        if (widget.contentpath) {\r\n            widget.register();\r\n        }\r\n    }\r\n    function initCommentsInterface(formElement) {\r\n        var commentsElement = document.getElementById('comments');\r\n        var commentsOutputElement = document.getElementById('comments-output');\r\n        var dataElement = document.getElementById('comments-data');\r\n        if (!commentsElement || !commentsOutputElement || !dataElement) {\r\n            throw new Error('Comments app failed to initialise. Missing HTML element');\r\n        }\r\n        var data = JSON.parse(dataElement.textContent);\r\n        commentApp.renderApp(commentsElement, commentsOutputElement, data.user, data.comments, new Map(Object.entries(data.authors)), wagtailConfig_1.STRINGS);\r\n        formElement.querySelectorAll('[data-component=\"add-comment-button\"]').forEach(initAddCommentButton);\r\n        // Attach the commenting app to the tab navigation, if it exists\r\n        var tabNavElement = formElement.querySelector('[data-tab-nav]');\r\n        if (tabNavElement) {\r\n            commentApp.setCurrentTab(tabNavElement.dataset.currentTab);\r\n            tabNavElement.addEventListener('switch', function (e) {\r\n                commentApp.setCurrentTab(e.detail.tab);\r\n            });\r\n        }\r\n        // Comments toggle\r\n        var commentToggle = formElement.querySelector('.comments-toggle input[type=checkbox]');\r\n        var commentNotificationsToggle = formElement.querySelector('.comment-notifications-toggle');\r\n        var tabContentElement = formElement.querySelector('.tab-content');\r\n        var updateCommentVisibility = function (visible) {\r\n            // Show/hide comments\r\n            commentApp.setVisible(visible);\r\n            // Show/hide comment notifications toggle\r\n            // Add/Remove tab-nav--comments-enabled class. This changes the size of streamfields\r\n            if (visible) {\r\n                $(commentNotificationsToggle).show();\r\n                tabContentElement.classList.add('tab-content--comments-enabled');\r\n            }\r\n            else {\r\n                $(commentNotificationsToggle).hide();\r\n                tabContentElement.classList.remove('tab-content--comments-enabled');\r\n            }\r\n        };\r\n        commentToggle.addEventListener('change', function (e) {\r\n            updateCommentVisibility(e.target.checked);\r\n        });\r\n        updateCommentVisibility(commentToggle.checked);\r\n        // Keep number of comments up to date with comment app\r\n        var commentCounter = formElement.querySelector('.comments-toggle__count');\r\n        var updateCommentCount = function () {\r\n            var commentCount = commentApp.selectors.selectCommentCount(commentApp.store.getState());\r\n            if (commentCount > 0) {\r\n                commentCounter.innerText = commentCount.toString();\r\n            }\r\n            else {\r\n                // Note: CSS will hide the circle when its content is empty\r\n                commentCounter.innerText = '';\r\n            }\r\n        };\r\n        commentApp.store.subscribe(updateCommentCount);\r\n        updateCommentCount();\r\n    }\r\n    return {\r\n        commentApp: commentApp,\r\n        getContentPath: getContentPath,\r\n        isCommentShortcut: isCommentShortcut,\r\n        initAddCommentButton: initAddCommentButton,\r\n        initCommentsInterface: initCommentsInterface,\r\n    };\r\n})();\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n// It's empty as some runtime module handles the default behavior\n__webpack_require__.x = function() {}\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.j = 324;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t324: 0\n};\n\nvar deferredModules = [\n\t[68251,920],\n\t[90971,920]\n];\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = function() {};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tvar executeModules = data[3];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkwagtail\"] = self[\"webpackChunkwagtail\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = function() {};\n\t}\n\treturn result;\n}\nvar startup = __webpack_require__.x;\n__webpack_require__.x = function() {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = startup || (function() {});\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};","// run startup\nreturn __webpack_require__.x();\n"],"sourceRoot":""}