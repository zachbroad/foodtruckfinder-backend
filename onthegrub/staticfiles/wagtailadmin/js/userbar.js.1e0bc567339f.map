{"version":3,"sources":["webpack://wagtail/./client/src/entrypoints/admin/userbar.js"],"names":["document","addEventListener","e","userbar","querySelector","trigger","list","className","hasTouch","window","clickEvent","hideUserbar","classList","remove","sandboxClick","removeEventListener","clickOutside","toggleUserbar","e2","stopPropagation","contains","add","preventDefault"],"mappings":"AAGAA,SAASC,iBAAiB,oBAAoB,SAAUC,GACpD,IAAIC,EAAUH,SAASI,cAAc,0BACjCC,EAAUF,EAAQC,cAAc,kCAChCE,EAAOH,EAAQC,cAAc,0BAC7BG,EAAY,YACZC,EAAW,iBAAkBC,OAC7BC,EAAa,QA0BjB,SAASC,IACLR,EAAQS,UAAUC,OAAON,GAEzBD,EAAKL,iBAAiBS,EAAYI,GAAc,GAEhDL,OAAOM,oBAAoBL,EAAYM,GAAc,GAEzD,SAASC,EAAcC,GACnBA,EAAGC,kBACChB,EAAQS,UAAUQ,SAASb,GAC3BI,KAhBJR,EAAQS,UAAUS,IAAId,GAEtBD,EAAKL,iBAAiBS,EAAYI,GAAc,GAEhDL,OAAOR,iBAAiBS,EAAYM,GAAc,IAkBtD,SAASF,EAAaI,GAClBA,EAAGC,kBAEP,SAASH,IACLL,IA7CAH,GACAL,EAAQS,UAAUS,IAAI,SAGtBhB,EAAQJ,iBAAiB,YAAY,SAAUiB,GAC3ChB,EAAEoB,iBAEFL,EAAcC,OAIlBf,EAAQS,UAAUS,IAAI,YAG1BhB,EAAQJ,iBAAiBS,EAAYO,GAAe,GAGpDR,OAAOR,iBAAiB,WAAYU,GAAa","file":"wagtail\\admin\\static\\wagtailadmin\\js\\userbar.js","sourcesContent":["// This entrypoint is not bundled with any polyfills to keep it as light as possible\r\n// Please stick to old JS APIs and avoid importing anything that might require a vendored module\r\n// More background can be found in webpack.config.js\r\ndocument.addEventListener('DOMContentLoaded', function (e) {\r\n    var userbar = document.querySelector('[data-wagtail-userbar]');\r\n    var trigger = userbar.querySelector('[data-wagtail-userbar-trigger]');\r\n    var list = userbar.querySelector('.wagtail-userbar-items');\r\n    var className = 'is-active';\r\n    var hasTouch = 'ontouchstart' in window;\r\n    var clickEvent = 'click';\r\n    if (hasTouch) {\r\n        userbar.classList.add('touch');\r\n        // Bind to touchend event, preventDefault to prevent DELAY and CLICK\r\n        // in accordance with: https://hacks.mozilla.org/2013/04/detecting-touch-its-the-why-not-the-how/\r\n        trigger.addEventListener('touchend', function (e2) {\r\n            e.preventDefault();\r\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n            toggleUserbar(e2);\r\n        });\r\n    }\r\n    else {\r\n        userbar.classList.add('no-touch');\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n    trigger.addEventListener(clickEvent, toggleUserbar, false);\r\n    // make sure userbar is hidden when navigating back\r\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n    window.addEventListener('pageshow', hideUserbar, false);\r\n    function showUserbar() {\r\n        userbar.classList.add(className);\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        list.addEventListener(clickEvent, sandboxClick, false);\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        window.addEventListener(clickEvent, clickOutside, false);\r\n    }\r\n    function hideUserbar() {\r\n        userbar.classList.remove(className);\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        list.addEventListener(clickEvent, sandboxClick, false);\r\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n        window.removeEventListener(clickEvent, clickOutside, false);\r\n    }\r\n    function toggleUserbar(e2) {\r\n        e2.stopPropagation();\r\n        if (userbar.classList.contains(className)) {\r\n            hideUserbar();\r\n        }\r\n        else {\r\n            showUserbar();\r\n        }\r\n    }\r\n    function sandboxClick(e2) {\r\n        e2.stopPropagation();\r\n    }\r\n    function clickOutside() {\r\n        hideUserbar();\r\n    }\r\n});\r\n"],"sourceRoot":""}